!function(a,b){"use strict";function c(a,c,d){function e(a,d,e){var g,h;e=e||{},h=e.expires,g=b.isDefined(e.path)?e.path:f,b.isUndefined(d)&&(h="Thu, 01 Jan 1970 00:00:00 GMT",d=""),b.isString(h)&&(h=new Date(h));var i=encodeURIComponent(a)+"="+encodeURIComponent(d);i+=g?";path="+g:"",i+=e.domain?";domain="+e.domain:"",i+=h?";expires="+h.toUTCString():"",i+=e.secure?";secure":"";var j=i.length+1;return j>4096&&c.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+j+" > 4096 bytes)!"),i}var f=d.baseHref(),g=a[0];return function(a,b,c){g.cookie=e(a,b,c)}}b.module("ngCookies",["ng"]).provider("$cookies",[function(){function a(a){return a?b.extend({},c,a):c}var c=this.defaults={};this.$get=["$$cookieReader","$$cookieWriter",function(c,d){return{get:function(a){return c()[a]},getObject:function(a){var c=this.get(a);return c?b.fromJson(c):c},getAll:function(){return c()},put:function(b,c,e){d(b,c,a(e))},putObject:function(a,c,d){this.put(a,b.toJson(c),d)},remove:function(b,c){d(b,void 0,a(c))}}}]}]),b.module("ngCookies").factory("$cookieStore",["$cookies",function(a){return{get:function(b){return a.getObject(b)},put:function(b,c){a.putObject(b,c)},remove:function(b){a.remove(b)}}}]),c.$inject=["$document","$log","$browser"],b.module("ngCookies").provider("$$cookieWriter",function(){this.$get=c})}(window,window.angular),function(a,b){"use strict";var c=864e5,d=function(){if(b.userAgent&&(b.userAgent.match(/Android/i)||b.userAgent.match(/webOS/i)||b.userAgent.match(/iPhone/i)||b.userAgent.match(/iPad/i)||b.userAgent.match(/iPod/i)||b.userAgent.match(/BlackBerry/i)||b.userAgent.match(/Windows Phone/i)))return!0}(),e=function(a,b){return d?['<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-mobile-item _720kb-datepicker-calendar-month">','<select ng-model="month" title="{{ dateMonthTitle }}" ng-change="selectedMonthHandle(month)">','<option ng-repeat="item in months" ng-selected="item === month" ng-disabled=\'!isSelectableMaxDate(item + " " + day + ", " + year) || !isSelectableMinDate(item + " " + day + ", " + year)\' ng-value="$index + 1" value="$index + 1">',"{{ item }}","</option>","</select>","</div>","</div>",'<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-mobile-item _720kb-datepicker-calendar-month">','<select ng-model="mobileYear" title="{{ dateYearTitle }}" ng-change="setNewYear(mobileYear)">','<option ng-repeat="item in paginationYears track by $index" ng-selected="year === item" ng-disabled="!isSelectableMinYear(item) || !isSelectableMaxYear(item)" ng-value="item" value="item">',"{{ item }}","</option>","</select>","</div>","</div>"]:['<div class="_720kb-datepicker-calendar-header">','<div class="_720kb-datepicker-calendar-header-left">','<a class="_720kb-datepicker-calendar-month-button" href="javascript:void(0)" ng-class="{\'_720kb-datepicker-item-hidden\': !willPrevMonthBeSelectable()}" ng-click="prevMonth()" title="{{ buttonPrevTitle }}">',a,"</a>","</div>",'<div class="_720kb-datepicker-calendar-header-middle _720kb-datepicker-calendar-month">',"{{month}}&nbsp;",'<a href="javascript:void(0)" ng-click="paginateYears(year); showYearsPagination = !showYearsPagination;">',"<span>","{{year}}","<i ng-class=\"{'_720kb-datepicker-calendar-header-closed-pagination': !showYearsPagination, '_720kb-datepicker-calendar-header-opened-pagination': showYearsPagination}\"></i>","</span>","</a>","</div>",'<div class="_720kb-datepicker-calendar-header-right">','<a class="_720kb-datepicker-calendar-month-button" ng-class="{\'_720kb-datepicker-item-hidden\': !willNextMonthBeSelectable()}" href="javascript:void(0)" ng-click="nextMonth()" title="{{ buttonNextTitle }}">',b,"</a>","</div>","</div>"]},f=function(a,b){return['<div class="_720kb-datepicker-calendar-header" ng-show="showYearsPagination">','<div class="_720kb-datepicker-calendar-years-pagination">','<a ng-class="{\'_720kb-datepicker-active\': y === year, \'_720kb-datepicker-disabled\': !isSelectableMaxYear(y) || !isSelectableMinYear(y)}" href="javascript:void(0)" ng-click="setNewYear(y)" ng-repeat="y in paginationYears track by $index">',"{{y}}","</a>","</div>",'<div class="_720kb-datepicker-calendar-years-pagination-pages">','<a href="javascript:void(0)" ng-click="paginateYears(paginationYears[0])" ng-class="{\'_720kb-datepicker-item-hidden\': paginationYearsPrevDisabled}">',a,"</a>",'<a href="javascript:void(0)" ng-click="paginateYears(paginationYears[paginationYears.length -1 ])" ng-class="{\'_720kb-datepicker-item-hidden\': paginationYearsNextDisabled}">',b,"</a>","</div>","</div>"]},g=function(){return['<div class="_720kb-datepicker-calendar-days-header">','<div ng-repeat="d in daysInString">',"{{d}}","</div>","</div>"]},h=function(){return['<div class="_720kb-datepicker-calendar-body">','<a href="javascript:void(0)" ng-repeat="px in prevMonthDays" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{px}}","</a>","<a href=\"javascript:void(0)\" ng-repeat=\"item in days\" ng-click=\"setDatepickerDay(item)\" ng-class=\"{'_720kb-datepicker-active': day === item, '_720kb-datepicker-disabled': !isSelectableMinDate(year + '/' + monthNumber + '/' + item ) || !isSelectableMaxDate(year + '/' + monthNumber + '/' + item) || !isSelectableDate(monthNumber, year, item)}\" class=\"_720kb-datepicker-calendar-day\">","{{item}}","</a>",'<a href="javascript:void(0)" ng-repeat="nx in nextMonthDays" class="_720kb-datepicker-calendar-day _720kb-datepicker-disabled">',"{{nx}}","</a>","</div>"]},i=function(a,b){var c=['<div class="_720kb-datepicker-calendar {{datepickerClass}} {{datepickerID}}" ng-class="{\'_720kb-datepicker-forced-to-open\': checkVisibility()}" ng-blur="hideCalendar()">',"</div>"],d=e(a,b),i=f(a,b),j=g(),k=h(),l=function(a){c.splice(c.length-1,0,a)};return d.forEach(l),i.forEach(l),j.forEach(l),k.forEach(l),c.join("")},j=function(b,e,f,g,h){var j=function(j,k,l){var m,n,o=l.selector,p=a.element(o?k[0].querySelector("."+o):k[0].children[0]),q='<b class="_720kb-datepicker-default-button">&lang;</b>',r='<b class="_720kb-datepicker-default-button">&rang;</b>',s=l.buttonPrev||q,t=l.buttonNext||r,u=l.dateFormat,v=j.$eval(j.dateDisabledDates),w=new Date,x=!1,y=!1,z=f.DATETIME_FORMATS,A=864e5,B=i(s,t),C=function(){x||y||!m||j.hideCalendar()},D=function(){j.month=g("date")(new Date(j.dateMinLimit),"MMMM"),j.monthNumber=Number(g("date")(new Date(j.dateMinLimit),"MM")),j.day=Number(g("date")(new Date(j.dateMinLimit),"dd")),j.year=Number(g("date")(new Date(j.dateMinLimit),"yyyy"))},E=function(){j.month=g("date")(new Date(j.dateMaxLimit),"MMMM"),j.monthNumber=Number(g("date")(new Date(j.dateMaxLimit),"MM")),j.day=Number(g("date")(new Date(j.dateMaxLimit),"dd")),j.year=Number(g("date")(new Date(j.dateMaxLimit),"yyyy"))},F=function(){j.year=Number(j.year)-1},G=function(){j.year=Number(j.year)+1},H=function(){if(!j.isSelectableMinDate(j.year+"/"+j.monthNumber+"/"+j.day)||!j.isSelectableMaxDate(j.year+"/"+j.monthNumber+"/"+j.day))return!1;var a=new Date(j.year+"/"+j.monthNumber+"/"+j.day);l.dateFormat?p.val(g("date")(a,u)):p.val(a),p.triggerHandler("input"),p.triggerHandler("change")},I={add:function(a,b){var c;a.className.indexOf(b)>-1||(c=a.className.split(" "),c.push(b),a.className=c.join(" "))},remove:function(a,b){var c,d;if(a.className.indexOf(b)!==-1){for(d=a.className.split(" "),c=0;c<d.length;c+=1)if(d[c]===b){d=d.slice(0,c).concat(d.slice(c+1));break}a.className=d.join(" ")}}},J=function(){n=b.document.getElementsByClassName("_720kb-datepicker-calendar"),a.forEach(n,function(a,b){n[b].classList?n[b].classList.remove("_720kb-datepicker-open"):I.remove(n[b],"_720kb-datepicker-open")}),m.classList?m.classList.add("_720kb-datepicker-open"):I.add(m,"_720kb-datepicker-open")},K=function(){return!j.datepickerToggle||j.$eval(j.datepickerToggle)},L=function(){return!!j.datepickerShow&&j.$eval(j.datepickerShow)},M=function(a,b){var c,d,e,f,g=new Date(b,a,0).getDate(),h=new Date(b+"/"+a+"/1").getDay(),i=new Date(b+"/"+a+"/"+g).getDay(),k=[],l=[];for(j.days=[],c=1;c<=g;c+=1)j.days.push(c);if(0===h)j.prevMonthDays=[];else{for(e=h,f=1===Number(a)?12:a-1,c=1;c<=new Date(b,f,0).getDate();c+=1)k.push(c);j.prevMonthDays=k.slice(-e)}if(i<6){for(d=6-i,c=1;c<=d;c+=1)l.push(c);j.nextMonthDays=l}else j.nextMonthDays=[]},N=j.$watch("dateSet",function(a){a&&(w=new Date(a),j.month=g("date")(w,"MMMM"),j.monthNumber=Number(g("date")(w,"MM")),j.day=Number(g("date")(w,"dd")),j.year=Number(g("date")(w,"yyyy")),M(j.monthNumber,j.year),"true"!==j.dateSetHidden&&H())});j.nextMonth=function(){12===j.monthNumber?(j.monthNumber=1,G()):j.monthNumber+=1,j.dateMaxLimit&&(j.isSelectableMaxDate(j.year+"/"+j.monthNumber+"/"+j.days[0])||E()),j.month=g("date")(new Date(j.year,j.monthNumber-1),"MMMM"),M(j.monthNumber,j.year),j.day=void 0},j.willPrevMonthBeSelectable=function(){var a=j.monthNumber,b=j.year,c=g("date")(new Date(new Date(b+"/"+a+"/01").getTime()-A),"dd");return 1===a?(a=12,b-=1):a-=1,!(j.dateMinLimit&&!j.isSelectableMinDate(b+"/"+a+"/"+c))},j.willNextMonthBeSelectable=function(){var a=j.monthNumber,b=j.year;return 12===a?(a=1,b+=1):a+=1,!(j.dateMaxLimit&&!j.isSelectableMaxDate(b+"/"+a+"/01"))},j.prevMonth=function(){1===j.monthNumber?(j.monthNumber=12,F()):j.monthNumber-=1,j.dateMinLimit&&(j.isSelectableMinDate(j.year+"/"+j.monthNumber+"/"+j.days[j.days.length-1])||D()),j.month=g("date")(new Date(j.year,j.monthNumber-1),"MMMM"),M(j.monthNumber,j.year),j.day=void 0},j.selectedMonthHandle=function(a){j.monthNumber=Number(g("date")(new Date(a+"/01/2000"),"MM")),M(j.monthNumber,j.year),H()},j.setNewYear=function(a){if(d||(j.day=void 0),j.dateMaxLimit&&j.year<Number(a)){if(!j.isSelectableMaxYear(a))return}else if(j.dateMinLimit&&j.year>Number(a)&&!j.isSelectableMinYear(a))return;j.year=Number(a),M(j.monthNumber,j.year),j.paginateYears(a),j.showYearsPagination=!1},j.hideCalendar=function(){m.classList?m.classList.remove("_720kb-datepicker-open"):I.remove(m,"_720kb-datepicker-open")},j.setDatepickerDay=function(a){j.isSelectableDate(j.monthNumber,j.year,a)&&j.isSelectableMaxDate(j.year+"/"+j.monthNumber+"/"+a)&&j.isSelectableMinDate(j.year+"/"+j.monthNumber+"/"+a)&&(j.day=Number(a),H(),l.hasOwnProperty("dateRefocus")&&p[0].focus(),j.hideCalendar())},j.paginateYears=function(a){var b,c=[],e=10,f=10;for(j.paginationYears=[],d&&(e=50,f=50,j.dateMinLimit&&j.dateMaxLimit&&(a=new Date(j.dateMaxLimit).getFullYear(),e=a-new Date(j.dateMinLimit).getFullYear(),f=1)),b=e;b>0;b-=1)c.push(Number(a)-b);for(b=0;b<f;b+=1)c.push(Number(a)+b);"true"===j.dateTyper&&p.on("keyup blur",function(){if(p[0].value&&p[0].value.length&&p[0].value.length>0)try{w=new Date(p[0].value.toString()),w.getFullYear()&&!isNaN(w.getDay())&&!isNaN(w.getMonth())&&j.isSelectableDate(w)&&j.isSelectableMaxDate(w)&&j.isSelectableMinDate(w)&&j.$apply(function(){j.month=g("date")(w,"MMMM"),j.monthNumber=Number(g("date")(w,"MM")),j.day=Number(g("date")(w,"dd")),4===w.getFullYear().toString().length&&(j.year=Number(g("date")(w,"yyyy"))),M(j.monthNumber,j.year)})}catch(a){return a}}),j.dateMaxLimit&&c&&c.length&&!j.isSelectableMaxYear(Number(c[c.length-1])+1)?j.paginationYearsNextDisabled=!0:j.paginationYearsNextDisabled=!1,j.dateMinLimit&&c&&c.length&&!j.isSelectableMinYear(Number(c[0])-1)?j.paginationYearsPrevDisabled=!0:j.paginationYearsPrevDisabled=!1,j.paginationYears=c},j.isSelectableDate=function(a,b,c){var d=0;if(v&&v.length>0)for(d;d<=v.length;d+=1)if(new Date(v[d]).getTime()===new Date(a+"/"+c+"/"+b).getTime())return!1;return!0},j.isSelectableMinDate=function(a){return!(j.dateMinLimit&&new Date(j.dateMinLimit)&&new Date(a).getTime()<new Date(j.dateMinLimit).getTime())},j.isSelectableMaxDate=function(a){return!(j.dateMaxLimit&&new Date(j.dateMaxLimit)&&new Date(a).getTime()>new Date(j.dateMaxLimit).getTime())},j.isSelectableMaxYear=function(a){return!(j.dateMaxLimit&&a>new Date(j.dateMaxLimit).getFullYear())},j.isSelectableMinYear=function(a){return!(j.dateMinLimit&&a<new Date(j.dateMinLimit).getFullYear())},B=B.replace(/{{/g,h.startSymbol()).replace(/}}/g,h.endSymbol()),j.dateMonthTitle=j.dateMonthTitle||"Select month",j.dateYearTitle=j.dateYearTitle||"Select year",j.buttonNextTitle=j.buttonNextTitle||"Next",j.buttonPrevTitle=j.buttonPrevTitle||"Prev",j.month=g("date")(w,"MMMM"),j.monthNumber=Number(g("date")(w,"MM")),j.day=Number(g("date")(w,"dd")),j.dateMaxLimit?j.year=Number(g("date")(new Date(j.dateMaxLimit),"yyyy")):j.year=Number(g("date")(w,"yyyy")),j.months=z.MONTH,j.daysInString=["0","1","2","3","4","5","6"].map(function(a){return g("date")(new Date(new Date("06/08/2014").valueOf()+c*a),"EEE")}),j.datepickerAppendTo&&j.datepickerAppendTo.indexOf(".")!==-1?(j.datepickerID="datepicker-id-"+(new Date).getTime()+(Math.floor(6*Math.random())+8),a.element(document.getElementsByClassName(j.datepickerAppendTo.replace(".",""))[0]).append(e(a.element(B))(j,function(b){m=a.element(b)[0]}))):j.datepickerAppendTo&&j.datepickerAppendTo.indexOf("#")!==-1?(j.datepickerID="datepicker-id-"+(new Date).getTime()+(Math.floor(6*Math.random())+8),a.element(document.getElementById(j.datepickerAppendTo.replace("#",""))).append(e(a.element(B))(j,function(b){m=a.element(b)[0]}))):j.datepickerAppendTo&&"body"===j.datepickerAppendTo?(j.datepickerID="datepicker-id-"+((new Date).getTime()+(Math.floor(6*Math.random())+8)),a.element(document).find("body").append(e(a.element(B))(j,function(b){m=a.element(b)[0]}))):(p.after(e(a.element(B))(j)),m=k[0].querySelector("._720kb-datepicker-calendar")),K()&&p.on("focus click focusin",function(){y=!0,x||y||!m?J():j.hideCalendar()}),p.on("focusout blur",function(){y=!1}),a.element(m).on("mouseenter",function(){x=!0}),a.element(m).on("mouseleave",function(){x=!1}),a.element(m).on("focusin",function(){x=!0}),a.element(b).on("click focus focusin",C),(j.dateMinLimit&&!j.isSelectableMinYear(j.year)||!j.isSelectableMinDate(j.year+"/"+j.monthNumber+"/"+j.day))&&D(),(j.dateMaxLimit&&!j.isSelectableMaxYear(j.year)||!j.isSelectableMaxDate(j.year+"/"+j.monthNumber+"/"+j.day))&&E(),j.paginateYears(j.year),M(j.monthNumber,j.year),j.checkVisibility=L,j.$on("$destroy",function(){N(),p.off("focus click focusout blur"),a.element(m).off("mouseenter mouseleave focusin"),a.element(b).off("click focus focusin",C)})};return{restrict:"AEC",scope:{dateSet:"@",dateMinLimit:"@",dateMaxLimit:"@",dateMonthTitle:"@",dateYearTitle:"@",buttonNextTitle:"@",buttonPrevTitle:"@",dateDisabledDates:"@",dateSetHidden:"@",dateTyper:"@",datepickerAppendTo:"@",datepickerToggle:"@",datepickerClass:"@",datepickerShow:"@"},link:j}};a.module("720kb.datepicker",[]).directive("datepicker",["$window","$compile","$locale","$filter","$interpolate",j])}(angular,navigator),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports?module.exports=b(require("angular")):b(a.angular)}(this,function(a,b){"use strict";return a.module("angular-google-analytics",[]).provider("Analytics",function(){var c,d,e,f,g,h=!0,i="auto",j=!1,k=!1,l="USD",m=!1,n=!1,o=!1,p=!1,q=!1,r=!1,s=!1,t=!1,u=!1,v=!1,w=!1,x="$routeChangeSuccess",y=!1,z=!1,A=!1,B="",C=!0,D=!1;this.log=[],this.offlineQueue=[],this.setAccount=function(d){return c=a.isUndefined(d)||d===!1?b:a.isArray(d)?d:a.isObject(d)?[d]:[{tracker:d,trackEvent:!0}],this},this.trackPages=function(a){return C=!!a,this},this.trackPrefix=function(a){return B=a,this},this.setDomainName=function(a){return e=a,this},this.useDisplayFeatures=function(a){return o=!!a,this},this.useAnalytics=function(a){return h=!!a,this},this.useEnhancedLinkAttribution=function(a){return s=!!a,this},this.useCrossDomainLinker=function(a){return k=!!a,this},this.setCrossLinkDomains=function(a){return d=a,this},this.setPageEvent=function(a){return x=a,this},this.setCookieConfig=function(a){return i=a,this},this.useECommerce=function(a,b){return q=!!a,r=!!b,this},this.setCurrency=function(a){return l=a,this},this.setRemoveRegExp=function(a){return a instanceof RegExp&&(g=a),this},this.setExperimentId=function(a){return f=a,this},this.ignoreFirstPageLoad=function(a){return t=!!a,this},this.trackUrlParams=function(a){return D=!!a,this},this.disableAnalytics=function(a){return p=!!a,this},this.setHybridMobileSupport=function(a){return v=!!a,this},this.startOffline=function(a){return w=!!a,w===!0&&this.delayScriptTag(!0),this},this.delayScriptTag=function(a){return n=!!a,this},this.logAllCalls=function(a){return u=!!a,this},this.enterTestMode=function(){return z=!0,this},this.enterDebugMode=function(a){return m=!0,A=!!a,this},this.readFromRoute=function(a){return y=!!a,this},this.$get=["$document","$location","$log","$rootScope","$window","$injector",function(E,F,G,H,I,J){var K=this,L=function(b,c){return a.isObject(c)&&a.isDefined(c[b])},M=function(a,b,c){return L(a,b)&&b[a]===c},N=function(b,c){return a.isString(c)?c+"."+b:L("name",c)?c.name+"."+b:b},O={};y&&(J.has("$route")?O=J.get("$route"):G.warn("$route service is not available. Make sure you have included ng-route in your application dependencies."));var P=function(){if(y&&O.current&&"pageTrack"in O.current)return O.current.pageTrack;var a=D?F.url():F.path();return g?a.replace(g,""):a},Q=function(){var b={utm_source:"campaignSource",utm_medium:"campaignMedium",utm_term:"campaignTerm",utm_content:"campaignContent",utm_campaign:"campaignName"},c={};return a.forEach(F.search(),function(d,e){var f=b[e];a.isDefined(f)&&(c[f]=d)}),c},R=function(a,b,c,d,e,f,g,h,i){var j={};return a&&(j.id=a),b&&(j.affiliation=b),c&&(j.revenue=c),d&&(j.tax=d),e&&(j.shipping=e),f&&(j.coupon=f),g&&(j.list=g),h&&(j.step=h),i&&(j.option=i),j},S=function(a){!h&&I._gaq&&"function"==typeof a&&a()},T=function(){var a=Array.prototype.slice.call(arguments);return w===!0?void K.offlineQueue.push([T,a]):(I._gaq||(I._gaq=[]),u===!0&&K._log.apply(K,a),void I._gaq.push(a))},U=function(a){h&&I.ga&&"function"==typeof a&&a()},V=function(){var a=Array.prototype.slice.call(arguments);return w===!0?void K.offlineQueue.push([V,a]):"function"!=typeof I.ga?void K._log("warn","ga function not set on window"):(u===!0&&K._log.apply(K,a),void I.ga.apply(null,a))},W=function(a){var b=Array.prototype.slice.call(arguments,1),d=b[0],e=[];return"function"==typeof a?c.forEach(function(b){a(b)&&e.push(b)}):e=c,0===e.length?void V.apply(K,b):void e.forEach(function(a){L("select",a)&&"function"==typeof a.select&&!a.select(b)||(b[0]=N(d,a),V.apply(K,b))})};return this._log=function(){var a=Array.prototype.slice.call(arguments);if(a.length>0){if(a.length>1)switch(a[0]){case"debug":case"error":case"info":case"log":case"warn":G[a[0]](a.slice(1))}K.log.push(a)}},this._createScriptTag=function(){if(!c||c.length<1)return void K._log("warn","No account id set to create script tag");if(c.length>1&&(K._log("warn","Multiple trackers are not supported with ga.js. Using first tracker only"),c=c.slice(0,1)),j===!0)return void K._log("warn","ga.js or analytics.js script tag already created");p===!0&&(K._log("info","Analytics disabled: "+c[0].tracker),I["ga-disable-"+c[0].tracker]=!0),T("_setAccount",c[0].tracker),e&&T("_setDomainName",e),s&&T("_require","inpage_linkid","//www.google-analytics.com/plugins/ga/inpage_linkid.js"),C&&!t&&(g?T("_trackPageview",P()):T("_trackPageview"));var a,b=E[0];return a=o===!0?("https:"===b.location.protocol?"https://":"http://")+"stats.g.doubleclick.net/dc.js":("https:"===b.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js",z!==!0?!function(){var c=b.createElement("script");c.type="text/javascript",c.async=!0,c.src=a;var d=b.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)}():K._log("inject",a),j=!0,!0},this._createAnalyticsScriptTag=function(){if(!c)return void K._log("warn","No account id set to create analytics script tag");if(j===!0)return void K._log("warn","ga.js or analytics.js script tag already created");p===!0&&c.forEach(function(a){K._log("info","Analytics disabled: "+a.tracker),I["ga-disable-"+a.tracker]=!0});var b=E[0],e=v===!0?"https:":"",g=e+"//www.google-analytics.com/"+(m?"analytics_debug.js":"analytics.js");if(z!==!0?!function(a,b,c,d,e,f,g){a.GoogleAnalyticsObject=e,a[e]=a[e]||function(){(a[e].q=a[e].q||[]).push(arguments)},a[e].l=1*new Date,f=b.createElement(c),g=b.getElementsByTagName(c)[0],f.async=1,f.src=d,g.parentNode.insertBefore(f,g)}(window,b,"script",g,"ga"):("function"!=typeof I.ga&&(I.ga=function(){}),K._log("inject",g)),A&&(I.ga_debug={trace:!0}),c.forEach(function(b){b.crossDomainLinker=L("crossDomainLinker",b)?b.crossDomainLinker:k,b.crossLinkDomains=L("crossLinkDomains",b)?b.crossLinkDomains:d,b.displayFeatures=L("displayFeatures",b)?b.displayFeatures:o,b.enhancedLinkAttribution=L("enhancedLinkAttribution",b)?b.enhancedLinkAttribution:s,b.set=L("set",b)?b.set:{},b.trackEcommerce=L("trackEcommerce",b)?b.trackEcommerce:q,b.trackEvent=!!L("trackEvent",b)&&b.trackEvent;var c={};L("fields",b)?c=b.fields:L("cookieConfig",b)?a.isString(b.cookieConfig)?c.cookieDomain=b.cookieConfig:c=b.cookieConfig:a.isString(i)?c.cookieDomain=i:i&&(c=i),b.crossDomainLinker===!0&&(c.allowLinker=!0),L("name",b)&&(c.name=b.name),b.fields=c,V("create",b.tracker,b.fields),v===!0&&V(N("set",b),"checkProtocolTask",null);for(var e in b.set)b.set.hasOwnProperty(e)&&V(N("set",b),e,b.set[e]);b.crossDomainLinker===!0&&(V(N("require",b),"linker"),a.isDefined(b.crossLinkDomains)&&V(N("linker:autoLink",b),b.crossLinkDomains)),b.displayFeatures&&V(N("require",b),"displayfeatures"),b.trackEcommerce&&(r?(V(N("require",b),"ec"),V(N("set",b),"&cu",l)):V(N("require",b),"ecommerce")),b.enhancedLinkAttribution&&V(N("require",b),"linkid"),C&&!t&&V(N("send",b),"pageview",B+P())}),f){var h=b.createElement("script"),n=b.getElementsByTagName("script")[0];h.src=e+"//www.google-analytics.com/cx/api.js?experiment="+f,n.parentNode.insertBefore(h,n)}return j=!0,!0},this._ecommerceEnabled=function(a,b){var c=q&&!r;return a===!0&&c===!1&&(q&&r?K._log("warn",b+" is not available when Enhanced Ecommerce is enabled with analytics.js"):K._log("warn","Ecommerce must be enabled to use "+b+" with analytics.js")),c},this._enhancedEcommerceEnabled=function(a,b){var c=q&&r;return a===!0&&c===!1&&K._log("warn","Enhanced Ecommerce must be enabled to use "+b+" with analytics.js"),c},this._trackPage=function(c,d,e){c=c?c:P(),d=d?d:E[0].title,S(function(){T("_set","title",d),T("_trackPageview",B+c)}),U(function(){var f={page:B+c,title:d};a.extend(f,Q()),a.isObject(e)&&a.extend(f,e),W(b,"send","pageview",f)})},this._trackEvent=function(b,c,d,e,f,g){S(function(){T("_trackEvent",b,c,d,e,!!f)}),U(function(){var h={},i=function(a){return M("trackEvent",a,!0)};a.isDefined(f)&&(h.nonInteraction=!!f),a.isObject(g)&&a.extend(h,g),a.isDefined(h.page)||(h.page=P()),W(i,"send","event",b,c,d,e,h)})},this._addTrans=function(a,b,c,d,e,f,g,h,i){S(function(){T("_addTrans",a,b,c,d,e,f,g,h)}),U(function(){if(K._ecommerceEnabled(!0,"addTrans")){var f=function(a){return M("trackEcommerce",a,!0)};W(f,"ecommerce:addTransaction",{id:a,affiliation:b,revenue:c,tax:d,shipping:e,currency:i||"USD"})}})},this._addItem=function(a,b,c,d,e,f){S(function(){T("_addItem",a,b,c,d,e,f)}),U(function(){if(K._ecommerceEnabled(!0,"addItem")){var g=function(a){return M("trackEcommerce",a,!0)};W(g,"ecommerce:addItem",{id:a,name:c,sku:b,category:d,price:e,quantity:f})}})},this._trackTrans=function(){S(function(){T("_trackTrans")}),U(function(){if(K._ecommerceEnabled(!0,"trackTrans")){var a=function(a){return M("trackEcommerce",a,!0)};W(a,"ecommerce:send")}})},this._clearTrans=function(){U(function(){if(K._ecommerceEnabled(!0,"clearTrans")){var a=function(a){return M("trackEcommerce",a,!0)};W(a,"ecommerce:clear")}})},this._addProduct=function(b,c,d,e,f,g,h,i,j,k){S(function(){T("_addProduct",b,c,d,e,f,g,h,i,j)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addProduct")){var l=function(a){return M("trackEcommerce",a,!0)},m={id:b,name:c,category:d,brand:e,variant:f,price:g,quantity:h,coupon:i,position:j};a.isObject(k)&&a.extend(m,k),W(l,"ec:addProduct",m)}})},this._addImpression=function(a,b,c,d,e,f,g,h){S(function(){T("_addImpression",a,b,c,d,e,f,g,h)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addImpression")){var i=function(a){return M("trackEcommerce",a,!0)};W(i,"ec:addImpression",{id:a,name:b,category:e,brand:d,variant:f,list:c,position:g,price:h})}})},this._addPromo=function(a,b,c,d){S(function(){T("_addPromo",a,b,c,d)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"addPromo")){var e=function(a){return M("trackEcommerce",a,!0)};W(e,"ec:addPromo",{id:a,name:b,creative:c,position:d})}})},this._setAction=function(a,b){S(function(){T("_setAction",a,b)}),U(function(){if(K._enhancedEcommerceEnabled(!0,"setAction")){var c=function(a){return M("trackEcommerce",a,!0)};W(c,"ec:setAction",a,b)}})},this._trackTransaction=function(a,b,c,d,e,f,g,h,i){this._setAction("purchase",R(a,b,c,d,e,f,g,h,i))},this._trackRefund=function(a){this._setAction("refund",R(a))},this._trackCheckOut=function(a,b){this._setAction("checkout",R(null,null,null,null,null,null,null,a,b))},this._trackDetail=function(){this._setAction("detail"),this._pageView()},this._trackCart=function(a,b){["add","remove"].indexOf(a)!==-1&&(this._setAction(a,{list:b}),this._trackEvent("UX","click",a+("add"===a?" to cart":" from cart")))},this._promoClick=function(a){this._setAction("promo_click"),this._trackEvent("Internal Promotions","click",a)},this._productClick=function(a){this._setAction("click",R(null,null,null,null,null,null,a,null,null)),this._trackEvent("UX","click",a)},this._pageView=function(a){U(function(){V(N("send",a),"pageview")})},this._send=function(){var a=Array.prototype.slice.call(arguments);a.unshift("send"),U(function(){V.apply(K,a)})},this._set=function(a,b,c){U(function(){V(N("set",c),a,b)})},this._trackTimings=function(a,c,d,e){U(function(){W(b,"send","timing",a,c,d,e)})},this._trackException=function(a,c){U(function(){W(b,"send","exception",{exDescription:a,exFatal:!!c})})},n||(h?this._createAnalyticsScriptTag():this._createScriptTag()),C&&H.$on(x,function(){(!y||O.current&&O.current.templateUrl&&!O.current.doNotTrack)&&K._trackPage()}),{log:K.log,offlineQueue:K.offlineQueue,configuration:{accounts:c,universalAnalytics:h,crossDomainLinker:k,crossLinkDomains:d,currency:l,debugMode:m,delayScriptTag:n,disableAnalytics:p,displayFeatures:o,domainName:e,ecommerce:K._ecommerceEnabled(),enhancedEcommerce:K._enhancedEcommerceEnabled(),enhancedLinkAttribution:s,experimentId:f,hybridMobileSupport:v,ignoreFirstPageLoad:t,logAllCalls:u,pageEvent:x,readFromRoute:y,removeRegExp:g,testMode:z,traceDebuggingMode:A,trackPrefix:B,trackRoutes:C,trackUrlParams:D},getUrl:P,setCookieConfig:K._setCookieConfig,getCookieConfig:function(){return i},createAnalyticsScriptTag:function(a){return a&&(i=a),K._createAnalyticsScriptTag()},createScriptTag:function(){return K._createScriptTag()},offline:function(a){if(a===!0&&w===!1&&(w=!0),a===!1&&w===!0)for(w=!1;K.offlineQueue.length>0;){var b=K.offlineQueue.shift();b[0].apply(K,b[1])}return w},trackPage:function(a,b,c){K._trackPage.apply(K,arguments)},trackEvent:function(a,b,c,d,e,f){K._trackEvent.apply(K,arguments)},addTrans:function(a,b,c,d,e,f,g,h,i){K._addTrans.apply(K,arguments)},addItem:function(a,b,c,d,e,f){K._addItem.apply(K,arguments)},trackTrans:function(){K._trackTrans.apply(K,arguments)},clearTrans:function(){K._clearTrans.apply(K,arguments)},addProduct:function(a,b,c,d,e,f,g,h,i,j){K._addProduct.apply(K,arguments)},addPromo:function(a,b,c,d){K._addPromo.apply(K,arguments)},addImpression:function(a,b,c,d,e,f,g,h){K._addImpression.apply(K,arguments)},productClick:function(a){K._productClick.apply(K,arguments)},promoClick:function(a){K._promoClick.apply(K,arguments)},trackDetail:function(){K._trackDetail.apply(K,arguments)},trackCart:function(a,b){K._trackCart.apply(K,arguments)},trackCheckout:function(a,b){K._trackCheckOut.apply(K,arguments)},trackTimings:function(a,b,c,d){K._trackTimings.apply(K,arguments)},trackTransaction:function(a,b,c,d,e,f,g,h,i){K._trackTransaction.apply(K,arguments)},trackException:function(a,b){K._trackException.apply(K,arguments)},setAction:function(a,b){K._setAction.apply(K,arguments)},pageView:function(){K._pageView.apply(K,arguments)},send:function(a){K._send.apply(K,arguments)},set:function(a,b,c){K._set.apply(K,arguments)}}}]}).directive("gaTrackEvent",["Analytics","$parse",function(a,b){return{restrict:"A",link:function(c,d,e){var f=b(e.gaTrackEvent);d.bind("click",function(){e.gaTrackEventIf&&!c.$eval(e.gaTrackEventIf)||f.length>1&&a.trackEvent.apply(a,f(c))})}}}]),a.module("angular-google-analytics")}),function(a,b){"use strict";function c(a,b){if(h(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(i(a)){b=b||{};for(var e in a)"$"===e.charAt(0)&&"$"===e.charAt(1)||(b[e]=a[e])}return b||a}function d(){function a(a,c){return b.extend(Object.create(a),c)}function d(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(a,b,c,d){var f="?"===d||"*?"===d?"?":null,g="*"===d||"*?"===d?"*":null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}h=b.isArray,i=b.isObject;var e={};this.when=function(a,f){var g=c(f);if(b.isUndefined(g.reloadOnSearch)&&(g.reloadOnSearch=!0),b.isUndefined(g.caseInsensitiveMatch)&&(g.caseInsensitiveMatch=this.caseInsensitiveMatch),e[a]=b.extend(g,a&&d(a,g)),a){var h="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";e[h]=b.extend({redirectTo:a},d(h,g))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,d,f,g,h,i,j){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;f<g;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=v.current;s=q(),t=s&&d&&s.$$route===d.$$route&&b.equals(s.pathParams,d.pathParams)&&!s.reloadOnSearch&&!u,t||!d&&!s||c.$broadcast("$routeChangeStart",s,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=v.current,e=s;t?(a.params=e.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(e||a)&&(u=!1,v.current=e,e&&e.redirectTo&&(b.isString(e.redirectTo)?d.path(r(e.redirectTo,e.params)).search(e.params).replace():d.url(e.redirectTo(e.pathParams,d.path(),d.search())).replace()),g.when(e).then(o).then(function(d){e==v.current&&(e&&(e.locals=d,b.copy(e.params,f)),c.$broadcast("$routeChangeSuccess",e,a))},function(b){e==v.current&&c.$broadcast("$routeChangeError",e,a,b)}))}function o(a){if(a){var c=b.extend({},a.resolve);b.forEach(c,function(a,d){c[d]=b.isString(a)?h.get(a):h.invoke(a,null,null,d)});var d=p(a);return b.isDefined(d)&&(c.$template=d),g.all(c)}}function p(a){var c,d;return b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),b.isDefined(d)&&(a.loadedTemplateUrl=j.valueOf(d),c=i(d))),c}function q(){var c,f;return b.forEach(e,function(e,g){!f&&(c=l(d.path(),e))&&(f=a(e,{params:b.extend({},d.search(),c),pathParams:c}),f.$$route=e)}),f||e[null]&&a(e[null],{params:{},pathParams:{}})}function r(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var s,t,u=!1,v={routes:e,reload:function(){u=!0;var a={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,u=!1}};c.$evalAsync(function(){m(a),a.defaultPrevented||n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw k("norout","Tried updating route when with no current route");a=b.extend({},this.current.params,a),d.path(r(this.current.$$route.originalPath,a)),
d.search(a)}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),v}]}function e(){this.$get=function(){return{}}}function f(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function g(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}d[f.resolveAs||"$resolve"]=g,h(d)}}}var h,i,j=b.module("ngRoute",["ng"]).provider("$route",d),k=b.$$minErr("ngRoute");j.provider("$routeParams",e),j.directive("ngView",f),j.directive("ngView",g),f.$inject=["$route","$anchorScroll","$animate"],g.$inject=["$compile","$controller","$route"]}(window,window.angular);var cbpAnimatedHeader=function(){function a(){window.addEventListener("scroll",function(a){f||(f=!0,setTimeout(b,250))},!1)}function b(){var a=c();a>=g?classie.add(e,"navbar-shrink"):classie.remove(e,"navbar-shrink"),f=!1}function c(){return window.pageYOffset||d.scrollTop}var d=document.documentElement,e=document.querySelector(".navbar-default"),f=!1,g=300;a()}();!function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")});var g={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c};"function"==typeof define&&define.amd?define(g):a.classie=g}(window),function(){function a(a){return!!a.exifdata}function b(a,b){b=b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"",a=a.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var c=atob(a),d=c.length,e=new ArrayBuffer(d),f=new Uint8Array(e),g=0;g<d;g++)f[g]=c.charCodeAt(g);return e}function c(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onload=function(a){200!=this.status&&0!==this.status||b(this.response)},c.send()}function d(a,d){function g(b){var c=e(b),g=f(b);a.exifdata=c||{},a.iptcdata=g||{},d&&d.call(a)}if(a.src)if(/^data\:/i.test(a.src)){var h=b(a.src);g(h)}else if(/^blob\:/i.test(a.src)){var i=new FileReader;i.onload=function(a){g(a.target.result)},c(a.src,function(a){i.readAsArrayBuffer(a)})}else{var j=new XMLHttpRequest;j.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";g(j.response),j=null},j.open("GET",a.src,!0),j.responseType="arraybuffer",j.send(null)}else if(window.FileReader&&(a instanceof window.Blob||a instanceof window.File)){var i=new FileReader;i.onload=function(a){l&&console.log("Got file of length "+a.target.result.byteLength),g(a.target.result)},i.readAsArrayBuffer(a)}}function e(a){var b=new DataView(a);if(l&&console.log("Got file of length "+a.byteLength),255!=b.getUint8(0)||216!=b.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var c,d=2,e=a.byteLength;d<e;){if(255!=b.getUint8(d))return l&&console.log("Not a valid marker at offset "+d+", found: "+b.getUint8(d)),!1;if(c=b.getUint8(d+1),l&&console.log(c),225==c)return l&&console.log("Found 0xFFE1 marker"),k(b,d+4,b.getUint16(d+2)-2);d+=2+b.getUint16(d+2)}}function f(a){var b=new DataView(a);if(l&&console.log("Got file of length "+a.byteLength),255!=b.getUint8(0)||216!=b.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var c=2,d=a.byteLength,e=function(a,b){return 56===a.getUint8(b)&&66===a.getUint8(b+1)&&73===a.getUint8(b+2)&&77===a.getUint8(b+3)&&4===a.getUint8(b+4)&&4===a.getUint8(b+5)};c<d;){if(e(b,c)){var f=b.getUint8(c+7);f%2!==0&&(f+=1),0===f&&(f=4);var h=c+8+f,i=b.getUint16(c+6+f);return g(a,h,i)}c++}}function g(a,b,c){for(var d,e,f,g,h,i=new DataView(a),k={},l=b;l<b+c;)28===i.getUint8(l)&&2===i.getUint8(l+1)&&(g=i.getUint8(l+2),g in t&&(f=i.getInt16(l+3),h=f+5,e=t[g],d=j(i,l+5,f),k.hasOwnProperty(e)?k[e]instanceof Array?k[e].push(d):k[e]=[k[e],d]:k[e]=d)),l++;return k}function h(a,b,c,d,e){var f,g,h,j=a.getUint16(c,!e),k={};for(h=0;h<j;h++)f=c+12*h+2,g=d[a.getUint16(f,!e)],!g&&l&&console.log("Unknown tag: "+a.getUint16(f,!e)),k[g]=i(a,f,b,c,e);return k}function i(a,b,c,d,e){var f,g,h,i,k,l,m=a.getUint16(b+2,!e),n=a.getUint32(b+4,!e),o=a.getUint32(b+8,!e)+c;switch(m){case 1:case 7:if(1==n)return a.getUint8(b+8,!e);for(f=n>4?o:b+8,g=[],i=0;i<n;i++)g[i]=a.getUint8(f+i);return g;case 2:return f=n>4?o:b+8,j(a,f,n-1);case 3:if(1==n)return a.getUint16(b+8,!e);for(f=n>2?o:b+8,g=[],i=0;i<n;i++)g[i]=a.getUint16(f+2*i,!e);return g;case 4:if(1==n)return a.getUint32(b+8,!e);for(g=[],i=0;i<n;i++)g[i]=a.getUint32(o+4*i,!e);return g;case 5:if(1==n)return k=a.getUint32(o,!e),l=a.getUint32(o+4,!e),h=new Number(k/l),h.numerator=k,h.denominator=l,h;for(g=[],i=0;i<n;i++)k=a.getUint32(o+8*i,!e),l=a.getUint32(o+4+8*i,!e),g[i]=new Number(k/l),g[i].numerator=k,g[i].denominator=l;return g;case 9:if(1==n)return a.getInt32(b+8,!e);for(g=[],i=0;i<n;i++)g[i]=a.getInt32(o+4*i,!e);return g;case 10:if(1==n)return a.getInt32(o,!e)/a.getInt32(o+4,!e);for(g=[],i=0;i<n;i++)g[i]=a.getInt32(o+8*i,!e)/a.getInt32(o+4+8*i,!e);return g}}function j(a,b,c){var d="";for(n=b;n<b+c;n++)d+=String.fromCharCode(a.getUint8(n));return d}function k(a,b){if("Exif"!=j(a,b,4))return l&&console.log("Not valid EXIF data! "+j(a,b,4)),!1;var c,d,e,f,g,i=b+6;if(18761==a.getUint16(i))c=!1;else{if(19789!=a.getUint16(i))return l&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;c=!0}if(42!=a.getUint16(i+2,!c))return l&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var k=a.getUint32(i+4,!c);if(k<8)return l&&console.log("Not valid TIFF data! (First offset less than 8)",a.getUint32(i+4,!c)),!1;if(d=h(a,i,i+k,q,c),d.ExifIFDPointer){f=h(a,i,i+d.ExifIFDPointer,p,c);for(e in f){switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":f[e]=s[e][f[e]];break;case"ExifVersion":case"FlashpixVersion":f[e]=String.fromCharCode(f[e][0],f[e][1],f[e][2],f[e][3]);break;case"ComponentsConfiguration":f[e]=s.Components[f[e][0]]+s.Components[f[e][1]]+s.Components[f[e][2]]+s.Components[f[e][3]]}d[e]=f[e]}}if(d.GPSInfoIFDPointer){g=h(a,i,i+d.GPSInfoIFDPointer,r,c);for(e in g){switch(e){case"GPSVersionID":g[e]=g[e][0]+"."+g[e][1]+"."+g[e][2]+"."+g[e][3]}d[e]=g[e]}}return d}var l=!1,m=this,o=function(a){return a instanceof o?a:this instanceof o?void(this.EXIFwrapped=a):new o(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=o),exports.EXIF=o):m.EXIF=o;var p=o.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},q=o.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},r=o.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},s=o.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},t={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};o.getData=function(b,c){return!((b instanceof Image||b instanceof HTMLImageElement)&&!b.complete)&&(a(b)?c&&c.call(b):d(b,c),!0)},o.getTag=function(b,c){if(a(b))return b.exifdata[c]},o.getAllTags=function(b){if(!a(b))return{};var c,d=b.exifdata,e={};for(c in d)d.hasOwnProperty(c)&&(e[c]=d[c]);return e},o.pretty=function(b){if(!a(b))return"";var c,d=b.exifdata,e="";for(c in d)d.hasOwnProperty(c)&&(e+="object"==typeof d[c]?d[c]instanceof Number?c+" : "+d[c]+" ["+d[c].numerator+"/"+d[c].denominator+"]\r\n":c+" : ["+d[c].length+" values]\r\n":c+" : "+d[c]+"\r\n");return e},o.readFromBinaryFile=function(a){return e(a)},"function"==typeof define&&define.amd&&define("exif-js",[],function(){return o})}.call(this),function(a){a.fn.fitText=function(b,c){var d=b||1,e=a.extend({minFontSize:Number.NEGATIVE_INFINITY,maxFontSize:Number.POSITIVE_INFINITY},c);return this.each(function(){var b=a(this),c=function(){b.css("font-size",Math.max(Math.min(b.width()/(10*d),parseFloat(e.maxFontSize)),parseFloat(e.minFontSize)))};c(),a(window).on("resize.fittext orientationchange.fittext",c)})}}(jQuery),function(){"use strict";var a=angular.module("ngImgCrop",[]);a.factory("cropAreaCircle",["cropArea",function(a){var b=function(){a.apply(this,arguments),this._boxResizeBaseSize=20,this._boxResizeNormalRatio=.9,this._boxResizeHoverRatio=1.2,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio,this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._boxResizeIsHover=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!1,this._areaIsDragging=!1};return b.prototype=new a,b.prototype._calcCirclePerimeterCoords=function(a){var b=this._size/2,c=a*(Math.PI/180),d=this._x+b*Math.cos(c),e=this._y+b*Math.sin(c);return[d,e]},b.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},b.prototype._isCoordWithinArea=function(a){return Math.sqrt((a[0]-this._x)*(a[0]-this._x)+(a[1]-this._y)*(a[1]-this._y))<this._size/2},b.prototype._isCoordWithinBoxResize=function(a){var b=this._calcResizeIconCenterCoords(),c=this._boxResizeHoverSize/2;return a[0]>b[0]-c&&a[0]<b[0]+c&&a[1]>b[1]-c&&a[1]<b[1]+c},b.prototype._drawArea=function(a,b,c){a.arc(b[0],b[1],c/2,0,2*Math.PI)},b.prototype.draw=function(){a.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio),this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},b.prototype.processMouseMove=function(a,b){var c="default",d=!1;if(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)this._x=a-this._posDragStartX,this._y=b-this._posDragStartY,this._areaIsHover=!0,c="move",d=!0,this._events.trigger("area-move");else if(this._boxResizeIsDragging){c="nesw-resize";var e,f,g;f=a-this._posResizeStartX,g=this._posResizeStartY-b,e=f>g?this._posResizeStartSize+2*g:this._posResizeStartSize+2*f,this._size=Math.max(this._minSize,e),this._boxResizeIsHover=!0,d=!0,this._events.trigger("area-resize")}else this._isCoordWithinBoxResize([a,b])?(c="nesw-resize",this._areaIsHover=!1,this._boxResizeIsHover=!0,d=!0):this._isCoordWithinArea([a,b])&&(c="move",this._areaIsHover=!0,d=!0);return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:c}),d},b.prototype.processMouseDown=function(a,b){this._isCoordWithinBoxResize([a,b])?(this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=a,this._posResizeStartY=b,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([a,b])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1,this._posDragStartX=a-this._x,this._posDragStartY=b-this._y,this._events.trigger("area-move-start"))},b.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._boxResizeIsHover=!1,this._posDragStartX=0,this._posDragStartY=0},b}]),a.factory("cropAreaSquare",["cropArea",function(a){var b=function(){a.apply(this,arguments),this._resizeCtrlBaseRadius=10,this._resizeCtrlNormalRatio=.75,this._resizeCtrlHoverRatio=1,this._iconMoveNormalRatio=.9,this._iconMoveHoverRatio=1.2,this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio,this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio,this._posDragStartX=0,this._posDragStartY=0,this._posResizeStartX=0,this._posResizeStartY=0,this._posResizeStartSize=0,this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._resizeCtrlIsDragging=-1,this._areaIsDragging=!1};return b.prototype=new a,b.prototype._calcSquareCorners=function(){var a=this._size/2;return[[this._x-a,this._y-a],[this._x+a,this._y-a],[this._x-a,this._y+a],[this._x+a,this._y+a]]},b.prototype._calcSquareDimensions=function(){var a=this._size/2;return{left:this._x-a,top:this._y-a,right:this._x+a,bottom:this._y+a}},b.prototype._isCoordWithinArea=function(a){var b=this._calcSquareDimensions();return a[0]>=b.left&&a[0]<=b.right&&a[1]>=b.top&&a[1]<=b.bottom},b.prototype._isCoordWithinResizeCtrl=function(a){for(var b=this._calcSquareCorners(),c=-1,d=0,e=b.length;d<e;d++){var f=b[d];if(a[0]>f[0]-this._resizeCtrlHoverRadius&&a[0]<f[0]+this._resizeCtrlHoverRadius&&a[1]>f[1]-this._resizeCtrlHoverRadius&&a[1]<f[1]+this._resizeCtrlHoverRadius){c=d;break}}return c},b.prototype._drawArea=function(a,b,c){var d=c/2;a.rect(b[0]-d,b[1]-d,c,c)},b.prototype.draw=function(){a.prototype.draw.apply(this,arguments),this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var b=this._calcSquareCorners(),c=0,d=b.length;c<d;c++){var e=b[c];this._cropCanvas.drawIconResizeCircle(e,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===c?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)}},b.prototype.processMouseMove=function(a,b){var c="default",d=!1;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this._x=a-this._posDragStartX,this._y=b-this._posDragStartY,this._areaIsHover=!0,c="move",d=!0,this._events.trigger("area-move");else if(this._resizeCtrlIsDragging>-1){var e,f;switch(this._resizeCtrlIsDragging){case 0:e=-1,f=-1,c="nwse-resize";break;case 1:e=1,f=-1,c="nesw-resize";break;case 2:e=-1,f=1,c="nesw-resize";break;case 3:e=1,f=1,c="nwse-resize"}var g,h=(a-this._posResizeStartX)*e,i=(b-this._posResizeStartY)*f;g=h>i?this._posResizeStartSize+i:this._posResizeStartSize+h;var j=this._size;this._size=Math.max(this._minSize,g);var k=(this._size-j)/2;this._x+=k*e,this._y+=k*f,this._resizeCtrlIsHover=this._resizeCtrlIsDragging,d=!0,this._events.trigger("area-resize")}else{var l=this._isCoordWithinResizeCtrl([a,b]);if(l>-1){switch(l){case 0:c="nwse-resize";break;case 1:c="nesw-resize";break;case 2:c="nesw-resize";break;case 3:c="nwse-resize"}this._areaIsHover=!1,this._resizeCtrlIsHover=l,d=!0}else this._isCoordWithinArea([a,b])&&(c="move",this._areaIsHover=!0,d=!0)}return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:c}),d},b.prototype.processMouseDown=function(a,b){var c=this._isCoordWithinResizeCtrl([a,b]);c>-1?(this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=c,this._resizeCtrlIsHover=c,this._posResizeStartX=a,this._posResizeStartY=b,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([a,b])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1,this._posDragStartX=a-this._x,this._posDragStartY=b-this._y,this._events.trigger("area-move-start"))},b.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end")),this._resizeCtrlIsDragging>-1&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end")),this._areaIsHover=!1,this._resizeCtrlIsHover=-1,this._posDragStartX=0,this._posDragStartY=0},b}]),a.factory("cropArea",["cropCanvas",function(a){var b=function(b,c){this._ctx=b,this._events=c,this._minSize=80,this._cropCanvas=new a(b),this._image=new Image,this._x=0,this._y=0,this._size=200};return b.prototype.getImage=function(){return this._image},b.prototype.setImage=function(a){this._image=a},b.prototype.getX=function(){return this._x},b.prototype.setX=function(a){this._x=a,this._dontDragOutside()},b.prototype.getY=function(){return this._y},b.prototype.setY=function(a){this._y=a,this._dontDragOutside()},b.prototype.getSize=function(){return this._size},b.prototype.setSize=function(a){this._size=Math.max(this._minSize,a),this._dontDragOutside()},b.prototype.getMinSize=function(){return this._minSize},b.prototype.setMinSize=function(a){this._minSize=a,this._size=Math.max(this._minSize,this._size),this._dontDragOutside()},b.prototype._dontDragOutside=function(){var a=this._ctx.canvas.height,b=this._ctx.canvas.width;this._size>b&&(this._size=b),this._size>a&&(this._size=a),this._x<this._size/2&&(this._x=this._size/2),this._x>b-this._size/2&&(this._x=b-this._size/2),this._y<this._size/2&&(this._y=this._size/2),this._y>a-this._size/2&&(this._y=a-this._size/2)},b.prototype._drawArea=function(){},b.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,[this._x,this._y],this._size,this._drawArea)},b.prototype.processMouseMove=function(){},b.prototype.processMouseDown=function(){},b.prototype.processMouseUp=function(){},b}]),a.factory("cropCanvas",[function(){var a=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],b=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],c=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],d=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],e=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],f=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],g=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],h=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],i={areaOutline:"#fff",resizeBoxStroke:"#fff",resizeBoxFill:"#444",resizeBoxArrowFill:"#fff",resizeCircleStroke:"#fff",resizeCircleFill:"#444",moveIconFill:"#fff"};return function(j){var k=function(a,b,c){return[c*a[0]+b[0],c*a[1]+b[1]]},l=function(a,b,c,d){j.save(),j.fillStyle=b,j.beginPath();var e,f=k(a[0],c,d);j.moveTo(f[0],f[1]);for(var g in a)g>0&&(e=k(a[g],c,d),j.lineTo(e[0],e[1]));j.lineTo(f[0],f[1]),j.fill(),j.closePath(),j.restore()};this.drawIconMove=function(a,b){l(e,i.moveIconFill,a,b),l(f,i.moveIconFill,a,b),l(g,i.moveIconFill,a,b),l(h,i.moveIconFill,a,b)},this.drawIconResizeCircle=function(a,b,c){var d=b*c;j.save(),j.strokeStyle=i.resizeCircleStroke,j.lineWidth=2,j.fillStyle=i.resizeCircleFill,j.beginPath(),j.arc(a[0],a[1],d,0,2*Math.PI),j.fill(),j.stroke(),j.closePath(),j.restore()},this.drawIconResizeBoxBase=function(a,b,c){var d=b*c;j.save(),j.strokeStyle=i.resizeBoxStroke,j.lineWidth=2,j.fillStyle=i.resizeBoxFill,j.fillRect(a[0]-d/2,a[1]-d/2,d,d),j.strokeRect(a[0]-d/2,a[1]-d/2,d,d),j.restore()},this.drawIconResizeBoxNESW=function(a,d,e){this.drawIconResizeBoxBase(a,d,e),l(b,i.resizeBoxArrowFill,a,e),l(c,i.resizeBoxArrowFill,a,e)},this.drawIconResizeBoxNWSE=function(b,c,e){this.drawIconResizeBoxBase(b,c,e),l(a,i.resizeBoxArrowFill,b,e),l(d,i.resizeBoxArrowFill,b,e)},this.drawCropArea=function(a,b,c,d){var e=a.width/j.canvas.width,f=a.height/j.canvas.height,g=b[0]-c/2,h=b[1]-c/2;j.save(),j.strokeStyle=i.areaOutline,j.lineWidth=2,j.beginPath(),d(j,b,c),j.stroke(),j.clip(),c>0&&j.drawImage(a,g*e,h*f,c*e,c*f,g,h,c,c),j.beginPath(),d(j,b,c),j.stroke(),j.clip(),j.restore()}}}]),a.service("cropEXIF",[function(){function a(a){return!!a.exifdata}function b(a,b){b=b||a.match(/^data\:([^\;]+)\;base64,/im)[1]||"",a=a.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var c=atob(a),d=c.length,e=new ArrayBuffer(d),f=new Uint8Array(e),g=0;g<d;g++)f[g]=c.charCodeAt(g);return e}function c(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onload=function(a){200!=this.status&&0!==this.status||b(this.response)},c.send()}function d(a,d){function g(b){var c=e(b),g=f(b);a.exifdata=c||{},a.iptcdata=g||{},d&&d.call(a)}if(a.src)if(/^data\:/i.test(a.src)){var h=b(a.src);g(h)}else if(/^blob\:/i.test(a.src)){var i=new FileReader;i.onload=function(a){g(a.target.result)},c(a.src,function(a){i.readAsArrayBuffer(a)})}else{var j=new XMLHttpRequest;j.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";g(j.response),j=null},j.open("GET",a.src,!0),j.responseType="arraybuffer",j.send(null)}else if(window.FileReader&&(a instanceof window.Blob||a instanceof window.File)){var i=new FileReader;i.onload=function(a){l&&console.log("Got file of length "+a.target.result.byteLength),g(a.target.result)},i.readAsArrayBuffer(a)}}function e(a){var b=new DataView(a);if(l&&console.log("Got file of length "+a.byteLength),255!=b.getUint8(0)||216!=b.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var c,d=2,e=a.byteLength;d<e;){if(255!=b.getUint8(d))return l&&console.log("Not a valid marker at offset "+d+", found: "+b.getUint8(d)),!1;if(c=b.getUint8(d+1),l&&console.log(c),225==c)return l&&console.log("Found 0xFFE1 marker"),k(b,d+4,b.getUint16(d+2)-2);d+=2+b.getUint16(d+2)}}function f(a){var b=new DataView(a);if(l&&console.log("Got file of length "+a.byteLength),255!=b.getUint8(0)||216!=b.getUint8(1))return l&&console.log("Not a valid JPEG"),!1;for(var c=2,d=a.byteLength,e=function(a,b){return 56===a.getUint8(b)&&66===a.getUint8(b+1)&&73===a.getUint8(b+2)&&77===a.getUint8(b+3)&&4===a.getUint8(b+4)&&4===a.getUint8(b+5)};c<d;){if(e(b,c)){var f=b.getUint8(c+7);f%2!==0&&(f+=1),0===f&&(f=4);var h=c+8+f,i=b.getUint16(c+6+f);return g(a,h,i)}c++}}function g(a,b,c){for(var d,e,f,g,h,i=new DataView(a),k={},l=b;l<b+c;)28===i.getUint8(l)&&2===i.getUint8(l+1)&&(g=i.getUint8(l+2),g in q&&(f=i.getInt16(l+3),h=f+5,e=q[g],d=j(i,l+5,f),k.hasOwnProperty(e)?k[e]instanceof Array?k[e].push(d):k[e]=[k[e],d]:k[e]=d)),l++;return k}function h(a,b,c,d,e){var f,g,h,j=a.getUint16(c,!e),k={};for(h=0;h<j;h++)f=c+12*h+2,g=d[a.getUint16(f,!e)],!g&&l&&console.log("Unknown tag: "+a.getUint16(f,!e)),k[g]=i(a,f,b,c,e);return k}function i(a,b,c,d,e){var f,g,h,i,k,l,m=a.getUint16(b+2,!e),n=a.getUint32(b+4,!e),o=a.getUint32(b+8,!e)+c;switch(m){case 1:case 7:if(1==n)return a.getUint8(b+8,!e);for(f=n>4?o:b+8,g=[],i=0;i<n;i++)g[i]=a.getUint8(f+i);return g;case 2:return f=n>4?o:b+8,j(a,f,n-1);case 3:if(1==n)return a.getUint16(b+8,!e);for(f=n>2?o:b+8,g=[],i=0;i<n;i++)g[i]=a.getUint16(f+2*i,!e);return g;case 4:if(1==n)return a.getUint32(b+8,!e);for(g=[],i=0;i<n;i++)g[i]=a.getUint32(o+4*i,!e);return g;case 5:if(1==n)return k=a.getUint32(o,!e),l=a.getUint32(o+4,!e),h=new Number(k/l),h.numerator=k,h.denominator=l,h;for(g=[],i=0;i<n;i++)k=a.getUint32(o+8*i,!e),l=a.getUint32(o+4+8*i,!e),g[i]=new Number(k/l),g[i].numerator=k,g[i].denominator=l;return g;case 9:if(1==n)return a.getInt32(b+8,!e);for(g=[],i=0;i<n;i++)g[i]=a.getInt32(o+4*i,!e);return g;case 10:if(1==n)return a.getInt32(o,!e)/a.getInt32(o+4,!e);for(g=[],i=0;i<n;i++)g[i]=a.getInt32(o+8*i,!e)/a.getInt32(o+4+8*i,!e);return g}}function j(a,b,c){for(var d="",e=b;e<b+c;e++)d+=String.fromCharCode(a.getUint8(e));return d}function k(a,b){if("Exif"!=j(a,b,4))return l&&console.log("Not valid EXIF data! "+j(a,b,4)),!1;var c,d,e,f,g,i=b+6;if(18761==a.getUint16(i))c=!1;else{if(19789!=a.getUint16(i))return l&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;c=!0}if(42!=a.getUint16(i+2,!c))return l&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var k=a.getUint32(i+4,!c);if(k<8)return l&&console.log("Not valid TIFF data! (First offset less than 8)",a.getUint32(i+4,!c)),!1;if(d=h(a,i,i+k,n,c),d.ExifIFDPointer){f=h(a,i,i+d.ExifIFDPointer,m,c);for(e in f){switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":f[e]=p[e][f[e]];break;case"ExifVersion":case"FlashpixVersion":f[e]=String.fromCharCode(f[e][0],f[e][1],f[e][2],f[e][3]);break;case"ComponentsConfiguration":f[e]=p.Components[f[e][0]]+p.Components[f[e][1]]+p.Components[f[e][2]]+p.Components[f[e][3]]}d[e]=f[e]}}if(d.GPSInfoIFDPointer){g=h(a,i,i+d.GPSInfoIFDPointer,o,c);for(e in g){switch(e){case"GPSVersionID":g[e]=g[e][0]+"."+g[e][1]+"."+g[e][2]+"."+g[e][3]}d[e]=g[e]}}return d}var l=!1,m=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},n=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",
315:"Artist",33432:"Copyright"},o=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},p=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},q={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};this.getData=function(b,c){return!((b instanceof Image||b instanceof HTMLImageElement)&&!b.complete)&&(a(b)?c&&c.call(b):d(b,c),!0)},this.getTag=function(b,c){if(a(b))return b.exifdata[c]},this.getAllTags=function(b){if(!a(b))return{};var c,d=b.exifdata,e={};for(c in d)d.hasOwnProperty(c)&&(e[c]=d[c]);return e},this.pretty=function(b){if(!a(b))return"";var c,d=b.exifdata,e="";for(c in d)d.hasOwnProperty(c)&&(e+="object"==typeof d[c]?d[c]instanceof Number?c+" : "+d[c]+" ["+d[c].numerator+"/"+d[c].denominator+"]\r\n":c+" : ["+d[c].length+" values]\r\n":c+" : "+d[c]+"\r\n");return e},this.readFromBinaryFile=function(a){return e(a)}}]),a.factory("cropHost",["$document","cropAreaCircle","cropAreaSquare","cropEXIF",function(a,b,c,d){var e=function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{top:Math.round(i),left:Math.round(j)}};return function(f,g,h){function i(){j.clearRect(0,0,j.canvas.width,j.canvas.height),null!==k&&(j.drawImage(k,0,0,j.canvas.width,j.canvas.height),j.save(),j.fillStyle="rgba(0, 0, 0, 0.65)",j.fillRect(0,0,j.canvas.width,j.canvas.height),j.restore(),l.draw())}var j=null,k=null,l=null,m=[100,100],n=[300,300],o=200,p="image/png",q=null,r=function(){if(null!==k){l.setImage(k);var a=[k.width,k.height],b=k.width/k.height,c=a;c[0]>n[0]?(c[0]=n[0],c[1]=c[0]/b):c[0]<m[0]&&(c[0]=m[0],c[1]=c[0]/b),c[1]>n[1]?(c[1]=n[1],c[0]=c[1]*b):c[1]<m[1]&&(c[1]=m[1],c[0]=c[1]*b),f.prop("width",c[0]).prop("height",c[1]).css({"margin-left":-c[0]/2+"px","margin-top":-c[1]/2+"px"}),l.setX(j.canvas.width/2),l.setY(j.canvas.height/2),l.setSize(Math.min(200,j.canvas.width/2,j.canvas.height/2))}else f.prop("width",0).prop("height",0).css({"margin-top":0});i()},s=function(a){return angular.isDefined(a.changedTouches)?a.changedTouches:a.originalEvent.changedTouches},t=function(a){if(null!==k){var b,c,d=e(j.canvas);"touchmove"===a.type?(b=s(a)[0].pageX,c=s(a)[0].pageY):(b=a.pageX,c=a.pageY),l.processMouseMove(b-d.left,c-d.top),i()}},u=function(a){if(a.preventDefault(),a.stopPropagation(),null!==k){var b,c,d=e(j.canvas);"touchstart"===a.type?(b=s(a)[0].pageX,c=s(a)[0].pageY):(b=a.pageX,c=a.pageY),l.processMouseDown(b-d.left,c-d.top),i()}},v=function(a){if(null!==k){var b,c,d=e(j.canvas);"touchend"===a.type?(b=s(a)[0].pageX,c=s(a)[0].pageY):(b=a.pageX,c=a.pageY),l.processMouseUp(b-d.left,c-d.top),i()}};this.getResultImageDataURI=function(){var a,b;return b=angular.element("<canvas></canvas>")[0],a=b.getContext("2d"),b.width=o,b.height=o,null!==k&&a.drawImage(k,(l.getX()-l.getSize()/2)*(k.width/j.canvas.width),(l.getY()-l.getSize()/2)*(k.height/j.canvas.height),l.getSize()*(k.width/j.canvas.width),l.getSize()*(k.height/j.canvas.height),0,0,o,o),null!==q?b.toDataURL(p,q):b.toDataURL(p)},this.setNewImageSource=function(a){if(k=null,r(),h.trigger("image-updated"),a){var b=new Image;"http"===a.substring(0,4).toLowerCase()&&(b.crossOrigin="anonymous"),b.onload=function(){h.trigger("load-done"),d.getData(b,function(){var a=d.getTag(b,"Orientation");if([3,6,8].indexOf(a)>-1){var c=document.createElement("canvas"),e=c.getContext("2d"),f=b.width,g=b.height,i=0,j=0,l=0,m=0,n=0;switch(m=f,n=g,a){case 3:i=-b.width,j=-b.height,l=180;break;case 6:f=b.height,g=b.width,j=-b.height,m=g,n=f,l=90;break;case 8:f=b.height,g=b.width,i=-b.width,m=g,n=f,l=270}var o=1e3;if(f>o||g>o){var p=0;f>o?(p=o/f,f=o,g=p*g):g>o&&(p=o/g,g=o,f=p*f),j=p*j,i=p*i,m=p*m,n=p*n}c.width=f,c.height=g,e.rotate(l*Math.PI/180),e.drawImage(b,i,j,m,n),k=new Image,k.onload=function(){r(),h.trigger("image-updated")},k.src=c.toDataURL("image/png")}else k=b;r(),h.trigger("image-updated")})},b.onerror=function(){h.trigger("load-error")},h.trigger("load-start"),b.src=a}},this.setMaxDimensions=function(a,b){if(n=[a,b],null!==k){var c=j.canvas.width,d=j.canvas.height,e=[k.width,k.height],g=k.width/k.height,h=e;h[0]>n[0]?(h[0]=n[0],h[1]=h[0]/g):h[0]<m[0]&&(h[0]=m[0],h[1]=h[0]/g),h[1]>n[1]?(h[1]=n[1],h[0]=h[1]*g):h[1]<m[1]&&(h[1]=m[1],h[0]=h[1]*g),f.prop("width",h[0]).prop("height",h[1]).css({"margin-left":-h[0]/2+"px","margin-top":-h[1]/2+"px"});var o=j.canvas.width/c,p=j.canvas.height/d,q=Math.min(o,p);l.setX(l.getX()*o),l.setY(l.getY()*p),l.setSize(l.getSize()*q)}else f.prop("width",0).prop("height",0).css({"margin-top":0});i()},this.setAreaMinSize=function(a){a=parseInt(a,10),isNaN(a)||(l.setMinSize(a),i())},this.setResultImageSize=function(a){a=parseInt(a,10),isNaN(a)||(o=a)},this.setResultImageFormat=function(a){p=a},this.setResultImageQuality=function(a){a=parseFloat(a),!isNaN(a)&&a>=0&&a<=1&&(q=a)},this.setAreaType=function(a){var d=l.getSize(),e=l.getMinSize(),f=l.getX(),g=l.getY(),m=b;"square"===a&&(m=c),l=new m(j,h),l.setMinSize(e),l.setSize(d),l.setX(f),l.setY(g),null!==k&&l.setImage(k),i()},j=f[0].getContext("2d"),l=new b(j,h),a.on("mousemove",t),f.on("mousedown",u),a.on("mouseup",v),a.on("touchmove",t),f.on("touchstart",u),a.on("touchend",v),this.destroy=function(){a.off("mousemove",t),f.off("mousedown",u),a.off("mouseup",t),a.off("touchmove",t),f.off("touchstart",u),a.off("touchend",t),f.remove()}}}]),a.factory("cropPubSub",[function(){return function(){var a={};this.on=function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},this.trigger=function(b,c){return angular.forEach(a[b],function(a){a.call(null,c)}),this}}}]),a.directive("imgCrop",["$timeout","cropHost","cropPubSub",function(a,b,c){return{restrict:"E",scope:{image:"=",resultImage:"=",changeOnFly:"=",areaType:"@",areaMinSize:"=",resultImageSize:"=",resultImageFormat:"@",resultImageQuality:"=",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas></canvas>",controller:["$scope",function(a){a.events=new c}],link:function(c,d){var e,f=c.events,g=new b(d.find("canvas"),{},f),h=function(a){var b=g.getResultImageDataURI();e!==b&&(e=b,angular.isDefined(a.resultImage)&&(a.resultImage=b),a.onChange({$dataURI:a.resultImage}))},i=function(b){return function(){a(function(){c.$apply(function(a){b(a)})})}};f.on("load-start",i(function(a){a.onLoadBegin({})})).on("load-done",i(function(a){a.onLoadDone({})})).on("load-error",i(function(a){a.onLoadError({})})).on("area-move area-resize",i(function(a){a.changeOnFly&&h(a)})).on("area-move-end area-resize-end image-updated",i(function(a){h(a)})),c.$watch("image",function(){g.setNewImageSource(c.image)}),c.$watch("areaType",function(){g.setAreaType(c.areaType),h(c)}),c.$watch("areaMinSize",function(){g.setAreaMinSize(c.areaMinSize),h(c)}),c.$watch("resultImageSize",function(){g.setResultImageSize(c.resultImageSize),h(c)}),c.$watch("resultImageFormat",function(){g.setResultImageFormat(c.resultImageFormat),h(c)}),c.$watch("resultImageQuality",function(){g.setResultImageQuality(c.resultImageQuality),h(c)}),c.$watch(function(){return[d[0].clientWidth,d[0].clientHeight]},function(a){g.setMaxDimensions(a[0],a[1]),h(c)},!0),c.$on("$destroy",function(){g.destroy()})}}}])}(),function(a,b){"object"==typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):a.Spinner=b()}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(k.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",k.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b])return b;for(d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}k.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k,l=["webkit","Moz","ms","O"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function a(){h++;for(var b=0;b<d.lines;b++)g=Math.max(1-(h+(d.lines-b)*n)%l*m,d.opacity),c.opacity(f,b*d.direction+i,g,d);c.timeout=c.el&&setTimeout(a,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),"undefined"!=typeof document){k=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}();var o=e(a("group"),{behavior:"url(#default#VML)"});!d(o,"transform")&&o.adj?i():j=d(o,"animation")}return h}),function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";return angular.module("tmh.dynamicLocale",[]).config(["$provide",function(a){function b(a){return a.$stateful=!0,a}a.decorator("dateFilter",["$delegate",b]),a.decorator("numberFilter",["$delegate",b]),a.decorator("currencyFilter",["$delegate",b])}]).constant("tmhDynamicLocale.STORAGE_KEY","tmhDynamicLocale.locale").provider("tmhDynamicLocale",["tmhDynamicLocale.STORAGE_KEY",function(a){function b(a,b,c,d){var f=document.createElement("script"),g=e?e:document.getElementsByTagName("body")[0],h=!1;f.type="text/javascript",f.readyState?f.onreadystatechange=function(){"complete"!==f.readyState&&"loaded"!==f.readyState||(f.onreadystatechange=null,d(function(){h||(h=!0,g.removeChild(f),b())},30,!1))}:(f.onload=function(){h||(h=!0,g.removeChild(f),b())},f.onerror=function(){h||(h=!0,g.removeChild(f),c())}),f.src=a,f.async=!0,g.appendChild(f)}function c(a,c,d,e,h,i,l){function m(a,b){g===d&&(angular.forEach(a,function(c,d){b[d]?angular.isArray(b[d])&&(a[d].length=b[d].length):delete a[d]}),angular.forEach(b,function(c,d){angular.isArray(b[d])||angular.isObject(b[d])?(a[d]||(a[d]=angular.isArray(b[d])?[]:{}),m(a[d],b[d])):a[d]=b[d]}))}if(k[d])return g=d,k[d];var n,o=h.defer();return d===g?o.resolve(c):(n=i.get(d))?(g=d,e.$evalAsync(function(){m(c,n),f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})):(g=d,k[d]=o.promise,b(a,function(){var a=angular.injector(["ngLocale"]),b=a.get("$locale");m(c,b),i.put(d,b),delete k[d],e.$applyAsync(function(){f.put(j,d),e.$broadcast("$localeChangeSuccess",d,c),o.resolve(c)})},function(){delete k[d],e.$applyAsync(function(){g===d&&(g=c.id),e.$broadcast("$localeChangeError",d),o.reject(d)})},l)),o.promise}var d,e,f,g,h="angular/i18n/angular-locale_{{locale}}.js",i="tmhDynamicLocaleStorageCache",j=a,k={},l={};this.localeLocationPattern=function(a){return a?(h=a,this):h},this.appendScriptTo=function(a){e=a},this.useStorage=function(a){i=a},this.useCookieStorage=function(){this.useStorage("$cookieStore")},this.defaultLocale=function(a){d=a},this.storageKey=function(a){return a?(j=a,this):j},this.addLocalePatternValue=function(a,b){l[a]=b},this.$get=["$rootScope","$injector","$interpolate","$locale","$q","tmhDynamicLocaleCache","$timeout",function(a,b,e,k,m,n,o){function p(b){var d={locale:b,angularVersion:angular.version.full};return c(q(angular.extend({},l,d)),k,b,a,m,n,o)}var q=e(h);return f=b.get(i),a.$evalAsync(function(){var a;(a=f.get(j)||d)&&p(a)}),{set:p,get:function(){return g}}}]}]).provider("tmhDynamicLocaleCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales")}]}).provider("tmhDynamicLocaleStorageCache",function(){this.$get=["$cacheFactory",function(a){return a("tmh.dynamicLocales.store")}]}).run(["tmhDynamicLocale",angular.noop]),"tmh.dynamicLocale"}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{link:function(d,f,g){function h(){r=!!("horizontal"in g),r?(s={width:""},t={width:"0"}):(s={height:""},t={height:"0"}),d.$eval(g.uibCollapse)||f.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(s)}function i(a){return r?{width:a.scrollWidth+"px"}:{height:a.scrollHeight+"px"}}function j(){f.hasClass("collapse")&&f.hasClass("in")||b.resolve(n(d)).then(function(){f.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(f,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:i(f[0])}).start().finally(k):a.addClass(f,"in",{css:{overflow:"hidden"},to:i(f[0])}).then(k)})}function k(){f.removeClass("collapsing").addClass("collapse").css(s),o(d)}function l(){return f.hasClass("collapse")||f.hasClass("in")?void b.resolve(p(d)).then(function(){f.css(i(f[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),e?e(f,{removeClass:"in",to:t}).start().finally(m):a.removeClass(f,"in",{to:t}).then(m)}):m()}function m(){f.css(t),f.removeClass("collapsing").addClass("collapse"),q(d)}var n=c(g.expanding),o=c(g.expanded),p=c(g.collapsing),q=c(g.collapsed),r=!1,s={},t={};h(),d.$watch(g.uibCollapse,function(a){a?l():j()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(a,b,c){c.$observe("disabled",function(a){c.$set("tabindex",a?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);b!==-1&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){b.addClass("panel"),d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)};var e="accordiongroup-"+a.$id+"-"+Math.floor(1e4*Math.random());a.headingId=e+"-tab",a.panelId=e+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){function a(){return"uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"}return{require:"^uibAccordionGroup",link:function(b,c,d,e){b.$watch(function(){return e[d.uibAccordionTransclude]},function(b){if(b){var d=angular.element(c[0].querySelector(a()));d.html(""),d.append(b)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(a,b,c,d,e){a.closeable=!!c.close,b.addClass("alert"),c.$set("role","alert"),a.closeable&&b.addClass("alert-dismissible");var f=angular.isDefined(c.dismissOnTimeout)?d(c.dismissOnTimeout)(a.$parent):null;f&&e(function(){a.close()},parseInt(f,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);a&&!angular.isDefined(d.uncheckable)||b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(){for(;t.length;)t.shift()}function g(a){for(var b=0;b<q.length;b++)q[b].slide.active=b===a}function h(c,d,i){if(!u){if(angular.extend(c,{direction:i}),angular.extend(q[s].slide||{},{direction:i}),e.enabled(b)&&!a.$currentTransition&&q[d].element&&p.slides.length>1){q[d].element.data(r,c.direction);var j=p.getCurrentIndex();angular.isNumber(j)&&q[j].element&&q[j].element.data(r,c.direction),a.$currentTransition=!0,e.on("addClass",q[d].element,function(b,c){if("close"===c&&(a.$currentTransition=null,e.off("addClass",b),t.length)){var d=t.pop().slide,g=d.index,i=g>p.getCurrentIndex()?"next":"prev";f(),h(d,g,i)}})}a.active=c.index,s=c.index,g(d),l()}}function i(a){for(var b=0;b<q.length;b++)if(q[b].slide===a)return b}function j(){n&&(c.cancel(n),n=null)}function k(b){b.length||(a.$currentTransition=null,f())}function l(){j();var b=+a.interval;!isNaN(b)&&b>0&&(n=c(m,b))}function m(){var b=+a.interval;o&&!isNaN(b)&&b>0&&q.length?a.next():a.pause()}var n,o,p=this,q=p.slides=a.slides=[],r="uib-slideDirection",s=a.active,t=[],u=!1;b.addClass("carousel"),p.addSlide=function(b,c){q.push({slide:b,element:c}),q.sort(function(a,b){return+a.slide.index-+b.slide.index}),(b.index===a.active||1===q.length&&!angular.isNumber(a.active))&&(a.$currentTransition&&(a.$currentTransition=null),s=b.index,a.active=b.index,g(s),p.select(q[i(b)]),1===q.length&&a.play())},p.getCurrentIndex=function(){for(var a=0;a<q.length;a++)if(q[a].slide.index===s)return a},p.next=a.next=function(){var b=(p.getCurrentIndex()+1)%q.length;return 0===b&&a.noWrap()?void a.pause():p.select(q[b],"next")},p.prev=a.prev=function(){var b=p.getCurrentIndex()-1<0?q.length-1:p.getCurrentIndex()-1;return a.noWrap()&&b===q.length-1?void a.pause():p.select(q[b],"prev")},p.removeSlide=function(b){var c=i(b),d=t.indexOf(q[c]);d!==-1&&t.splice(d,1),q.splice(c,1),q.length>0&&s===c?c>=q.length?(s=q.length-1,a.active=s,g(s),p.select(q[q.length-1])):(s=c,a.active=s,g(s),p.select(q[c])):s>c&&(s--,a.active=s),0===q.length&&(s=null,a.active=null,f())},p.select=a.select=function(b,c){var d=i(b.slide);void 0===c&&(c=d>p.getCurrentIndex()?"next":"prev"),b.slide.index===s||a.$currentTransition?b&&b.slide.index!==s&&a.$currentTransition&&t.push(q[d]):h(b.slide,d,c)},a.indexOfSlide=function(a){return+a.slide.index},a.isActive=function(b){return a.active===b.slide.index},a.isPrevDisabled=function(){return 0===a.active&&a.noWrap()},a.isNextDisabled=function(){return a.active===q.length-1&&a.noWrap()},a.pause=function(){a.noPause||(o=!1,j())},a.play=function(){o||(o=!0,l())},b.on("mouseenter",a.pause),b.on("mouseleave",a.play),a.$on("$destroy",function(){u=!0,j()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",l),a.$watchCollection("slides",k),a.$watch("active",function(a){if(angular.isNumber(a)&&s!==a){for(var b=0;b<q.length;b++)if(q[b].slide.index===a){a=b;break}var c=q[a];c&&(g(a),p.select(q[a]),s=a)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(a){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(b,c,d,e){c.addClass("item"),e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(b){a[b?"addClass":"removeClass"](c,"active")})}}}]).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter",function(a,b,c,d){function e(a){var b=[],c=a.split(""),e=a.indexOf("'");if(e>-1){var f=!1;a=a.split("");for(var g=e;g<a.length;g++)f?("'"===a[g]&&(g+1<a.length&&"'"===a[g+1]?(a[g+1]="$",c[g+1]=""):(c[g]="",f=!1)),a[g]="$"):"'"===a[g]&&(a[g]="$",c[g]="",f=!0);a=a.join("")}return angular.forEach(q,function(d){var e=a.indexOf(d.key);if(e>-1){a=a.split(""),c[e]="("+d.regex+")",a[e]="$";for(var f=e+1,g=e+d.key.length;f<g;f++)c[f]="",a[f]="$";a=a.join(""),b.push({index:e,key:d.key,apply:d.apply,matcher:d.regex})}}),{regex:new RegExp("^"+c.join("")+"$"),map:d(b,"index")}}function f(a){for(var b,c,d=[],e=0;e<a.length;)if(angular.isNumber(c)){if("'"===a.charAt(e))(e+1>=a.length||"'"!==a.charAt(e+1))&&(d.push(g(a,c,e)),c=null);else if(e===a.length)for(;c<a.length;)b=h(a,c),d.push(b),c=b.endIdx;e++}else"'"!==a.charAt(e)?(b=h(a,e),d.push(b.parser),e=b.endIdx):(c=e,e++);return d}function g(a,b,c){return function(){return a.substr(b+1,c-b-1)}}function h(a,b){for(var c=a.substr(b),d=0;d<q.length;d++)if(new RegExp("^"+q[d].key).test(c)){var e=q[d];return{endIdx:b+e.key.length,parser:e.formatter}}return{endIdx:b+1,parser:function(){return c.charAt(0)}}}function i(a,b,c){return!(c<1)&&(1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3!==b&&5!==b&&8!==b&&10!==b||c<31)}function j(a){return parseInt(a,10)}function k(a,b){return a&&b?o(a,b):a}function l(a,b){return a&&b?o(a,b,!0):a}function m(a,b){a=a.replace(/:/g,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function n(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function o(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=m(b,d);return n(a,c*(e-d))}var p,q,r=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){p=b.id,this.parsers={},this.formatters={},q=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(a){a=+a,this.year=a<69?a+2e3:a+1900},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),
c(b,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a},formatter:function(a){var b=new Date;return b.setFullYear(Math.abs(a.getFullYear())),c(b,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){var b=a.getMonth();return/^[0-9]$/.test(b)?c(a,"MM"):c(a,"M")}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)},formatter:function(a){return c(a,"MMMM")}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)},formatter:function(a){return c(a,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1},formatter:function(a){return c(a,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){var b=a.getDate();return/^[1-9]$/.test(b)?c(a,"dd"):c(a,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a},formatter:function(a){return c(a,"d")}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|"),formatter:function(a){return c(a,"EEEE")}},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(a){return c(a,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a},formatter:function(a){return c(a,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a},formatter:function(a){return c(a,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a},formatter:function(a){return c(a,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a},formatter:function(a){return c(a,"s")}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)},formatter:function(a){return c(a,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=j(c+d),this.minutes+=j(c+e)},formatter:function(a){return c(a,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(a){return c(a,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(a){return c(a,"w")}},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(a){return c(a,"GGGG")}},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GGG")}},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"GG")}},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|"),formatter:function(a){return c(a,"G")}}]},this.init(),this.filter=function(a,c){if(!angular.isDate(a)||isNaN(a)||!c)return"";c=b.DATETIME_FORMATS[c]||c,b.id!==p&&this.init(),this.formatters[c]||(this.formatters[c]=f(c));var d=this.formatters[c];return d.reduce(function(b,c){return b+c(a)},"")},this.parse=function(c,d,f){if(!angular.isString(c)||!d)return c;d=b.DATETIME_FORMATS[d]||d,d=d.replace(r,"\\$&"),b.id!==p&&this.init(),this.parsers[d]||(this.parsers[d]=e(d,"apply"));var g=this.parsers[d],h=g.regex,j=g.map,k=c.match(h),l=!1;if(k&&k.length){var m,n;angular.isDate(f)&&!isNaN(f.getTime())?m={year:f.getFullYear(),month:f.getMonth(),date:f.getDate(),hours:f.getHours(),minutes:f.getMinutes(),seconds:f.getSeconds(),milliseconds:f.getMilliseconds()}:(f&&a.warn("dateparser:","baseDate is not a valid date"),m={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var o=1,q=k.length;o<q;o++){var s=j[o-1];"Z"===s.matcher&&(l=!0),s.apply&&s.apply.call(m,k[o])}var t=l?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=l?Date.prototype.setUTCHours:Date.prototype.setHours;return i(m.year,m.month,m.date)&&(!angular.isDate(f)||isNaN(f.getTime())||l?(n=new Date(0),t.call(n,m.year,m.month,m.date),u.call(n,m.hours||0,m.minutes||0,m.seconds||0,m.milliseconds||0)):(n=new Date(f),t.call(n,m.year,m.month,m.date),u.call(n,m.hours,m.minutes,m.seconds,m.milliseconds))),n}},this.toTimezone=k,this.fromTimezone=l,this.timezoneToOffset=m,this.addDateMinutes=n,this.convertTimezoneToLocal=o}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);if(d===b)return c=a,!0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(b){a.datepickerMode=b,a.datepickerOptions.datepickerMode=b}var n=this,o={$setViewValue:angular.noop},p={},q=[];b.addClass("uib-datepicker"),c.$set("role","application"),a.datepickerOptions||(a.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(b){switch(b){case"customClass":case"dateDisabled":a[b]=a.datepickerOptions[b]||angular.noop;break;case"datepickerMode":a.datepickerMode=angular.isDefined(a.datepickerOptions.datepickerMode)?a.datepickerOptions.datepickerMode:i.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":n[b]=angular.isDefined(a.datepickerOptions[b])?e(a.datepickerOptions[b])(a.$parent):i[b];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":n[b]=angular.isDefined(a.datepickerOptions[b])?a.datepickerOptions[b]:i[b];break;case"startingDay":angular.isDefined(a.datepickerOptions.startingDay)?n.startingDay=a.datepickerOptions.startingDay:angular.isNumber(i.startingDay)?n.startingDay=i.startingDay:n.startingDay=(f.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":a.$watch("datepickerOptions."+b,function(a){a?angular.isDate(a)?n[b]=l.fromTimezone(new Date(a),p.timezone):(j&&g.warn("Literal date support has been deprecated, please switch to date object usage"),n[b]=new Date(h(a,"medium"))):n[b]=i[b]?l.fromTimezone(new Date(i[b]),p.timezone):null,n.refreshView()});break;case"maxMode":case"minMode":a.datepickerOptions[b]?a.$watch(function(){return a.datepickerOptions[b]},function(c){n[b]=a[b]=angular.isDefined(c)?c:a.datepickerOptions[b],("minMode"===b&&n.modes.indexOf(a.datepickerOptions.datepickerMode)<n.modes.indexOf(n[b])||"maxMode"===b&&n.modes.indexOf(a.datepickerOptions.datepickerMode)>n.modes.indexOf(n[b]))&&(a.datepickerMode=n[b],a.datepickerOptions.datepickerMode=n[b])}):n[b]=a[b]=i[b]||null}}),a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),a.disabled=angular.isDefined(c.disabled)||!1,angular.isDefined(c.ngDisabled)&&q.push(a.$parent.$watch(c.ngDisabled,function(b){a.disabled=b,n.refreshView()})),a.isActive=function(b){return 0===n.compare(b.date,n.activeDate)&&(a.activeDateId=b.uid,!0)},this.init=function(b){o=b,p=b.$options||a.datepickerOptions.ngModelOptions||i.ngModelOptions,a.datepickerOptions.initDate?(n.activeDate=l.fromTimezone(a.datepickerOptions.initDate,p.timezone)||new Date,a.$watch("datepickerOptions.initDate",function(a){a&&(o.$isEmpty(o.$modelValue)||o.$invalid)&&(n.activeDate=l.fromTimezone(a,p.timezone),n.refreshView())})):n.activeDate=new Date;var c=o.$modelValue?new Date(o.$modelValue):new Date;this.activeDate=isNaN(c)?l.fromTimezone(new Date,p.timezone):l.fromTimezone(c,p.timezone),o.$render=function(){n.render()}},this.render=function(){if(o.$viewValue){var a=new Date(o.$viewValue),b=!isNaN(a);b?this.activeDate=l.fromTimezone(a,p.timezone):k||g.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=o.$viewValue?new Date(o.$viewValue):null;b=l.fromTimezone(b,p.timezone),o.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=o.$viewValue?new Date(o.$viewValue):null;d=l.fromTimezone(d,p.timezone);var e=new Date;e=l.fromTimezone(e,p.timezone);var f=this.compare(b,e),g={date:b,label:l.filter(b,c),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),past:f<0,current:0===f,future:f>0,customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=g),n.activeDate&&0===this.compare(g.date,n.activeDate)&&(a.activeDt=g),g},this.isDisabled=function(b){return a.disabled||this.minDate&&this.compare(b,this.minDate)<0||this.maxDate&&this.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===n.minMode){var c=o.$viewValue?l.fromTimezone(new Date(o.$viewValue),p.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=l.toTimezone(c,p.timezone),o.$setViewValue(c),o.$render()}else n.activeDate=b,m(n.modes[n.modes.indexOf(a.datepickerMode)-1]),a.$emit("uib:datepicker.mode");a.$broadcast("uib:datepicker.focus")},a.move=function(a){var b=n.activeDate.getFullYear()+a*(n.step.years||0),c=n.activeDate.getMonth()+a*(n.step.months||0);n.activeDate.setFullYear(b,c,1),n.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===n.maxMode&&1===b||a.datepickerMode===n.minMode&&b===-1||(m(n.modes[n.modes.indexOf(a.datepickerMode)+b]),a.$emit("uib:datepicker.mode"))},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var r=function(){n.element[0].focus()};a.$on("uib:datepicker.focus",r),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),n.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(n.isDisabled(n.activeDate))return;a.select(n.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(n.handleKeyDown(c,b),n.refreshView()):a.toggleMode("up"===c?1:-1)},b.on("keydown",function(b){a.$apply(function(){a.keydown(b)})}),a.$on("$destroy",function(){for(;q.length;)q.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;f<b;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;k<42;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;l<7;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;o<n;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;f<12;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,this.monthColumns),a.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=this.monthColumns;else if("right"===a)c+=1;else if("down"===a)c+=this.monthColumns;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());g<f;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d,e={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},f={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},g=/(HTML|BODY)/;return{getRawNode:function(a){return a.nodeName?a:a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(e){if(e){if(angular.isUndefined(d)){var f=a.find("body");f.addClass("uib-position-body-scrollbar-measure"),d=b.innerWidth-f[0].clientWidth,d=isFinite(d)?d:0,f.removeClass("uib-position-body-scrollbar-measure")}return d}if(angular.isUndefined(c)){var g=angular.element('<div class="uib-position-scrollbar-measure"></div>');a.find("body").append(g),c=g[0].offsetWidth-g[0].clientWidth,c=isFinite(c)?c:0,g.remove()}return c},scrollbarPadding:function(a){a=this.getRawNode(a);var c=b.getComputedStyle(a),d=this.parseStyle(c.paddingRight),e=this.parseStyle(c.paddingBottom),f=this.scrollParent(a,!1,!0),h=this.scrollbarWidth(f,g.test(f.tagName));return{scrollbarWidth:h,widthOverflow:f.scrollWidth>f.clientWidth,right:d+h,originalRight:d,heightOverflow:f.scrollHeight>f.clientHeight,bottom:e+h,originalBottom:e}},isScrollable:function(a,c){a=this.getRawNode(a);var d=c?e.hidden:e.normal,f=b.getComputedStyle(a);return d.test(f.overflow+f.overflowY+f.overflowX)},scrollParent:function(c,d,f){c=this.getRawNode(c);var g=d?e.hidden:e.normal,h=a[0].documentElement,i=b.getComputedStyle(c);if(f&&g.test(i.overflow+i.overflowY+i.overflowX))return c;var j="absolute"===i.position,k=c.parentElement||h;if(k===h||"fixed"===i.position)return h;for(;k.parentElement&&k!==h;){var l=b.getComputedStyle(k);if(j&&"static"!==l.position&&(j=!1),!j&&g.test(l.overflow+l.overflowY+l.overflowX))break;k=k.parentElement}return k},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=f.auto.test(a);return b&&(a=a.replace(f.auto,"")),a=a.split("-"),a[0]=a[0]||"top",f.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",f.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,e){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=e?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a,e),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(f.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":f.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},adjustTop:function(a,b,c,d){if(a.indexOf("top")!==-1&&c!==d)return{top:b.top-d+"px"}},positionArrow:function(a,c){a=this.getRawNode(a);var d=a.querySelector(".tooltip-inner, .popover-inner");if(d){var e=angular.element(d).hasClass("tooltip-inner"),g=e?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){var h={top:"",bottom:"",left:"",right:""};if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css(h);var i="border-"+c[0]+"-width",j=b.getComputedStyle(g)[i],k="border-";k+=f.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],k+="-radius";var l=b.getComputedStyle(e?d:a)[k];switch(c[0]){case"top":h.bottom=e?"0":"-"+j;break;case"bottom":h.top=e?"0":"-"+j;break;case"left":h.right=e?"0":"-"+j;break;case"right":h.left=e?"0":"-"+j}h[c[1]]=l,angular.element(g).css(h)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(b){var c=l.parse(b,w,a.date);if(isNaN(c))for(var d=0;d<I.length;d++)if(c=l.parse(b,I[d],a.date),!isNaN(c))return c;return c}function r(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=q(a);if(!isNaN(b))return l.fromTimezone(b,G.timezone)}return F.$options&&F.$options.allowInvalid?a:void 0}function s(a,b){var d=a||b;return!c.ngRequired&&!d||(angular.isNumber(d)&&(d=new Date(d)),!d||(!(!angular.isDate(d)||isNaN(d))||!!angular.isString(d)&&!isNaN(q(d))))}function t(c){if(a.isOpen||!a.disabled){var d=H[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function u(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}function v(){if(a.isOpen){var d=angular.element(H[0].querySelector(".uib-datepicker-popup")),e=c.popupPlacement?c.popupPlacement:m.placement,f=j.positionElements(b,d,e,y);d.css({top:f.top+"px",left:f.left+"px"}),d.hasClass("uib-position-measure")&&d.removeClass("uib-position-measure")}}var w,x,y,z,A,B,C,D,E,F,G,H,I,J=!1,K=[];this.init=function(e){if(F=e,G=angular.isObject(e.$options)?e.$options:{timezone:null},x=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):m.closeOnDateSelection,y=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):m.appendToBody,z=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):m.onOpenFocus,A=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:m.datepickerPopupTemplateUrl,B=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:m.datepickerTemplateUrl,I=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):m.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):m.showButtonBar,m.html5Types[c.type]?(w=m.html5Types[c.type],J=!0):(w=c.uibDatepickerPopup||m.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||m.datepickerPopup;if(c!==w&&(w=c,F.$modelValue=null,!w))throw new Error("uibDatepickerPopup must have a date format specified.")})),!w)throw new Error("uibDatepickerPopup must have a date format specified.");if(J&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");C=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),C.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":A}),D=angular.element(C.children()[0]),D.attr("template-url",B),a.datepickerOptions||(a.datepickerOptions={}),J&&"month"===c.type&&(a.datepickerOptions.datepickerMode="month",a.datepickerOptions.minMode="month"),D.attr("datepicker-options","datepickerOptions"),J?F.$formatters.push(function(b){return a.date=l.fromTimezone(b,G.timezone),b}):(F.$$parserName="date",F.$validators.date=s,F.$parsers.unshift(r),F.$formatters.push(function(b){return F.$isEmpty(b)?(a.date=b,b):(angular.isNumber(b)&&(b=new Date(b)),a.date=l.fromTimezone(b,G.timezone),l.filter(a.date,w))})),F.$viewChangeListeners.push(function(){a.date=q(F.$viewValue)}),b.on("keydown",u),H=d(C)(a),C.remove(),y?h.find("body").append(H):b.after(H),a.$on("$destroy",function(){for(a.isOpen===!0&&(i.$$phase||a.$apply(function(){a.isOpen=!1})),H.remove(),b.off("keydown",u),h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v);K.length;)K.shift()()})},a.getText=function(b){return a[b+"Text"]||m[b+"Text"]},a.isDisabled=function(b){"today"===b&&(b=l.fromTimezone(new Date,G.timezone));var c={};return angular.forEach(["minDate","maxDate"],function(b){a.datepickerOptions[b]?angular.isDate(a.datepickerOptions[b])?c[b]=new Date(a.datepickerOptions[b]):(p&&e.warn("Literal date support has been deprecated, please switch to date object usage"),c[b]=new Date(k(a.datepickerOptions[b],"medium"))):c[b]=null}),a.datepickerOptions&&c.minDate&&a.compare(b,c.minDate)<0||c.maxDate&&a.compare(b,c.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){a.date=c;var d=a.date?l.filter(a.date,w):null;b.val(d),F.$setViewValue(d),x&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b,c){if(c.stopPropagation(),"today"===b){var d=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(d.getFullYear(),d.getMonth(),d.getDate())):(b=l.fromTimezone(d,G.timezone),b.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(c){c.stopPropagation(),a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&K.push(a.$parent.$watch(f(c.ngDisabled),function(b){a.disabled=b})),a.$watch("isOpen",function(d){d?a.disabled?a.isOpen=!1:n(function(){v(),z&&a.$broadcast("uib:datepicker.focus"),h.on("click",t);var d=c.popupPlacement?c.popupPlacement:m.placement;y||j.parsePlacement(d)[2]?(E=E||angular.element(j.scrollParent(b)),E&&E.on("scroll",v)):E=null,angular.element(g).on("resize",v)},0,!1):(h.off("click",t),E&&E.off("scroll",v),angular.element(g).off("resize",v))}),a.$on("uib:datepicker.mode",function(){n(v,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b,e){c||a.on("click",d),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b,e){c===b&&(c=null,a.off("click",d),a.off("keydown",this.keybindFilter))};var d=function(a){if(c&&!(a&&"disabled"===c.getAutoClose()||a&&3===a.which)){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.focusToggleElement(),
c.isOpen=!1,b.$$phase||c.$apply())}}};this.keybindFilter=function(a){var b=c.getDropdownElement(),e=c.getToggleElement(),f=b&&b[0].contains(a.target),g=e&&e[0].contains(a.target);27===a.which?(a.stopPropagation(),c.focusToggleElement(),d()):c.isKeynavEnabled()&&[38,40].indexOf(a.which)!==-1&&c.isOpen&&(f||g)&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.appendToOpenClass,q=e.openClass,r=angular.noop,s=c.onToggle?d(c.onToggle):angular.noop,t=!1,u=null,v=!1,w=i.find("body");b.addClass("dropdown"),this.init=function(){if(c.isOpen&&(m=d(c.isOpen),r=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),angular.isDefined(c.dropdownAppendTo)){var e=d(c.dropdownAppendTo)(o);e&&(u=angular.element(e))}t=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.keyboardNav),t&&!u&&(u=w),u&&n.dropdownMenu&&(u.append(n.dropdownMenu),b.on("$destroy",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen,angular.isFunction(r)&&r(o,o.isOpen),o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||"always"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return v},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch("isOpen",function(c,d){if(u&&n.dropdownMenu){var e,m,v,w=h.positionElements(b,n.dropdownMenu,"bottom-left",!0),x=0;if(e={top:w.top+"px",display:c?"block":"none"},m=n.dropdownMenu.hasClass("dropdown-menu-right"),m?(e.left="auto",v=h.scrollbarPadding(u),v.heightOverflow&&v.scrollbarWidth&&(x=v.scrollbarWidth),e.right=window.innerWidth-x-(w.left+b.prop("offsetWidth"))+"px"):(e.left=w.left+"px",e.right="auto"),!t){var y=h.offset(u);e.top=w.top-y.top+"px",m?e.right=window.innerWidth-(w.left-y.left+b.prop("offsetWidth"))+"px":e.left=w.left-y.left+"px"}n.dropdownMenu.css(e)}var z=u?u:b,A=z.hasClass(u?p:q);if(A===!c&&g[c?"addClass":"removeClass"](z,u?p:q).then(function(){angular.isDefined(c)&&c!==d&&s(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl?k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b,i.on("keydown",f.keybindFilter)})}):i.on("keydown",f.keybindFilter),o.focusToggleElement(),f.open(o,b);else{if(f.close(o,b),n.dropdownMenuTemplateUrl){l&&l.$destroy();var B=angular.element('<ul class="dropdown-menu"></ul>');n.dropdownMenu.replaceWith(B),n.dropdownMenu=B}n.selectedOption=null}angular.isFunction(r)&&r(a,c)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.pop()},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap","ui.bootstrap.position"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);e!==-1&&d.splice(e,1),d.length||delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a.addClass(d,e.modalInClass),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a.removeClass(d,e.modalInClass).then(g):g()}))}return{restrict:"A",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(a,b,c,d){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(e,f,g){f.addClass(g.windowTopClass||""),e.size=g.size,e.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},f.on("click",e.close),e.$isRendered=!0;var h=b.defer();e.$$postDigest(function(){h.resolve()}),h.promise.then(function(){var h=null;g.modalInClass&&(h=c(f,{addClass:g.modalInClass}).start(),e.$on(a.NOW_CLOSING_EVENT,function(a,b){var d=b();c(f,{removeClass:g.modalInClass}).start().then(d)})),b.when(h).then(function(){var b=a.getTop();if(b&&a.modalRendered(b.key),!d[0].activeElement||!f[0].contains(d[0].activeElement)){var c=f[0].querySelector("[autofocus]");c?c.focus():f[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(a){return{link:function(b,c,d,e,f){f(b.$parent,function(b){c.empty(),a.enter(b,c)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(a,b,c,d,e,f,g,h,i){function j(a){var b="-";return a.replace(C,function(a,c){return(c?b:"")+a.toLowerCase()})}function k(a){return!!(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function l(){for(var a=-1,b=w.keys(),c=0;c<b.length;c++)w.get(b[c]).value.backdrop&&(a=c);return a>-1&&a<z&&(a=z),a}function m(a,b){var c=w.get(a).value,d=c.appendTo;w.remove(a),A=w.top(),A&&(z=parseInt(A.value.modalDomEl.attr("index"),10)),p(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||v;x.remove(b,a);var e=x.hasKey(b);d.toggleClass(b,e),!e&&u&&u.heightOverflow&&u.scrollbarWidth&&(u.originalRight?d.css({paddingRight:u.originalRight+"px"}):d.css({paddingRight:""}),u=null),n(!0)},c.closedDeferred),o(),b&&b.focus?b.focus():d.focus&&d.focus()}function n(a){var b;w.length()>0&&(b=w.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function o(){if(s&&l()===-1){var a=t;p(s,t,function(){a=null}),s=void 0,t=void 0}}function p(b,c,d,e){function g(){g.done||(g.done=!0,a.leave(b).then(function(){d&&d(),b.remove(),e&&e.resolve()}),c.$destroy())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(y.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function q(a){if(a.isDefaultPrevented())return a;var b=w.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){y.dismiss(b.key,"escape key press")}));break;case 9:var c=y.loadFocusElementList(b),d=!1;a.shiftKey?(y.isFocusInFirstItem(a,c)||y.isModalFocused(a,b))&&(d=y.focusLastFocusableElement(c)):y.isFocusInLastItem(a,c)&&(d=y.focusFirstFocusableElement(c)),d&&(a.preventDefault(),a.stopPropagation())}}function r(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var s,t,u,v="modal-open",w=h.createNew(),x=g.createNew(),y={NOW_CLOSING_EVENT:"modal.stack.now-closing"},z=0,A=null,B="a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]",C=/[A-Z]/g;return e.$watch(l,function(a){t&&(t.index=a)}),c.on("keydown",q),e.$on("$destroy",function(){c.off("keydown",q)}),y.open=function(b,f){var g=c[0].activeElement,h=f.openedClass||v;n(!1),A=w.top(),w.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),x.put(h,b);var k=f.appendTo,m=l();if(!k.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");m>=0&&!s&&(t=e.$new(!0),t.modalOptions=f,t.index=m,s=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),s.attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),f.backdropClass&&s.addClass(f.backdropClass),f.animation&&s.attr("modal-animation","true"),d(s)(t),a.enter(s,k),i.isScrollable(k)&&(u=i.scrollbarPadding(k),u.heightOverflow&&u.scrollbarWidth&&k.css({paddingRight:u.right+"px"})));var o;f.component?(o=document.createElement(j(f.component.name)),o=angular.element(o),o.attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):o=f.content,z=A?parseInt(A.value.modalDomEl.attr("index"),10)+1:0;var p=angular.element('<div uib-modal-window="modal-window"></div>');p.attr({class:"modal","template-url":f.windowTemplateUrl,"window-top-class":f.windowTopClass,role:"dialog","aria-labelledby":f.ariaLabelledBy,"aria-describedby":f.ariaDescribedBy,size:f.size,index:z,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(o),f.windowClass&&p.addClass(f.windowClass),f.animation&&p.attr("modal-animation","true"),k.addClass(h),f.scope&&(f.scope.$$topModalIndex=z),a.enter(d(p)(f.scope),k),w.top().value.modalDomEl=p,w.top().value.modalOpener=g},y.close=function(a,b){var c=w.get(a);return c&&r(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),m(a,c.value.modalOpener),!0):!c},y.dismiss=function(a,b){var c=w.get(a);return c&&r(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),m(a,c.value.modalOpener),!0):!c},y.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},y.getTop=function(){return w.top()},y.modalRendered=function(a){var b=w.get(a);b&&b.value.renderDeferred.resolve()},y.focusFirstFocusableElement=function(a){return a.length>0&&(a[0].focus(),!0)},y.focusLastFocusableElement=function(a){return a.length>0&&(a[a.length-1].focus(),!0)},y.isModalFocused=function(a,b){if(a&&b){var c=b.value.modalDomEl;if(c&&c.length)return(a.target||a.srcElement)===c[0]}return!1},y.isFocusInFirstItem=function(a,b){return b.length>0&&(a.target||a.srcElement)===b[0]},y.isFocusInLastItem=function(a,b){return b.length>0&&(a.target||a.srcElement)===b[b.length-1]},y.loadFocusElementList=function(a){if(a){var b=a.value.modalDomEl;if(b&&b.length){var c=b[0].querySelectorAll(B);return c?Array.prototype.filter.call(c,function(a){return k(a)}):c}}},y}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return q}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.component&&!e.template&&!e.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var q;q=e.component?c.when(g.resolve(e.resolve,{},null,null)):c.all([i(e),g.resolve(e.resolve,{},null,null)]);var r;return r=k=c.all([k]).then(j,j).then(function(a){function c(b,c,d,e){b.$scope=g,b.$scope.$resolve={},d?b.$scope.$uibModalInstance=p:b.$uibModalInstance=p;var f=c?a[1]:a;angular.forEach(f,function(a,c){e&&(b[c]=a),b.$scope.$resolve[c]=a})}var d=e.scope||b,g=d.$new();g.$close=p.close,g.$dismiss=p.dismiss,g.$on("$destroy",function(){g.$$uibDestructionScheduled||g.$dismiss("$uibUnscheduledDestruction")});var i,j,k={scope:g,deferred:l,renderDeferred:o,closedDeferred:n,animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,ariaLabelledBy:e.ariaLabelledBy,ariaDescribedBy:e.ariaDescribedBy,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo},q={},r={};e.component?(c(q,!1,!0,!1),q.name=e.component,k.component=q):e.controller&&(c(r,!0,!1,!0),j=f(e.controller,r,!0,e.controllerAs),e.controllerAs&&e.bindToController&&(i=j.instance,i.$close=g.$close,i.$dismiss=g.$dismiss,angular.extend(i,{$resolve:r.$scope.$resolve},d)),i=j(),angular.isFunction(i.$onInit)&&i.$onInit()),e.component||(k.content=a[0]),h.open(p,k),m.resolve(!0)},function(a){m.reject(a),l.reject(a)}).finally(function(){k===r&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b._watchers=[],b.init=function(a,e){b.ngModelCtrl=a,b.config=e,a.$render=function(){b.render()},d.itemsPerPage?b._watchers.push(c.$parent.$watch(d.itemsPerPage,function(a){b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()})):b.itemsPerPage=e.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()},c.$on("$destroy",function(){for(;b._watchers.length;)b._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},link:function(b,c,d,e){c.addClass("pager");var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&i<b;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;h<=e;h++){var n=f(h,m(h),h===a);c.push(n)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var o=f(d-1,"...",!1);c.unshift(o)}if(l){if(3===d){var p=f(2,"2",!1);c.unshift(p)}var q=f(1,"1",!1);c.unshift(q)}}if(e<b){if(!l||e<b-2){var r=f(e+1,"...",!1);c.push(r)}if(l){if(e===b-2){var s=f(b-1,b-1,!1);c.push(s)}var t=f(b,b,!1);c.push(t)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers,m=angular.isDefined(b.pageLabel)?function(c){return a.$parent.$eval(b.pageLabel,{$page:c})}:angular.identity;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,d.create(this,a,b),b.maxSize&&h._watchers.push(a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()}));var n=this.render;this.render=function(){n(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},link:function(a,c,d,e){c.addClass("pagination");var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),b=null)}}var o=m.createNew();return h.on("keyup",n),k.$on("$destroy",function(){h.off("keyup",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup uib-title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'origin-scope="origScope" class="uib-position-measure '+k+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){N.isOpen?q():m()}function m(){M&&!a.$eval(d[k+"Enable"])||(u(),x(),N.popupDelay?G||(G=g(r,N.popupDelay,!1)):r())}function q(){s(),N.popupCloseDelay?H||(H=g(t,N.popupCloseDelay,!1)):t()}function r(){return s(),u(),N.content?(v(),void N.$evalAsync(function(){N.isOpen=!0,y(!0),S()})):angular.noop}function s(){G&&(g.cancel(G),G=null),I&&(g.cancel(I),I=null)}function t(){N&&N.$evalAsync(function(){N&&(N.isOpen=!1,y(!1),N.animation?F||(F=g(w,150,!1)):w())})}function u(){H&&(g.cancel(H),H=null),F&&(g.cancel(F),F=null)}function v(){D||(E=N.$new(),D=c(E,function(a){K?h.find("body").append(a):b.after(a)}),o.add(N,{close:t}),z())}function w(){s(),u(),A(),D&&(D.remove(),D=null),o.remove(N),E&&(E.$destroy(),E=null)}function x(){N.title=d[k+"Title"],Q?N.content=Q(a):N.content=d[e],N.popupClass=d[k+"Class"],N.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=i.parsePlacement(N.placement);J=b[1]?b[0]+"-"+b[1]:b[0];var c=parseInt(d[k+"PopupDelay"],10),f=parseInt(d[k+"PopupCloseDelay"],10);N.popupDelay=isNaN(c)?n.popupDelay:c,N.popupCloseDelay=isNaN(f)?n.popupCloseDelay:f}function y(b){P&&angular.isFunction(P.assign)&&P.assign(a,b)}function z(){R.length=0,Q?(R.push(a.$watch(Q,function(a){N.content=a,!a&&N.isOpen&&t()})),R.push(E.$watch(function(){O||(O=!0,E.$$postDigest(function(){O=!1,N&&N.isOpen&&S()}))}))):R.push(d.$observe(e,function(a){N.content=a,!a&&N.isOpen?t():S()})),R.push(d.$observe(k+"Title",function(a){N.title=a,N.isOpen&&S()})),R.push(d.$observe(k+"Placement",function(a){N.placement=a?a:n.placement,N.isOpen&&S()}))}function A(){R.length&&(angular.forEach(R,function(a){a()}),R.length=0)}function B(a){N&&N.isOpen&&D&&(b[0].contains(a.target)||D[0].contains(a.target)||q())}function C(){var c=[],e=[],f=a.$eval(d[k+"Trigger"]);T(),angular.isObject(f)?(Object.keys(f).forEach(function(a){c.push(a),e.push(f[a])}),L={show:c,hide:e}):L=p(f),"none"!==L.show&&L.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===L.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(L.hide[c],q)),b.on("keypress",function(a){27===a.which&&q()})})}var D,E,F,G,H,I,J,K=!!angular.isDefined(n.appendToBody)&&n.appendToBody,L=p(void 0),M=angular.isDefined(d[k+"Enable"]),N=a.$new(!0),O=!1,P=!!angular.isDefined(d[k+"IsOpen"])&&l(d[k+"IsOpen"]),Q=!!n.useContentExp&&l(d[e]),R=[],S=function(){D&&D.html()&&(I||(I=g(function(){var a=i.positionElements(b,D,N.placement,K),c=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),d=K?i.offset(b):i.position(b);D.css({top:a.top+"px",left:a.left+"px"});var e=a.placement.split("-");D.hasClass(e[0])||(D.removeClass(J.split("-")[0]),D.addClass(e[0])),D.hasClass(n.placementClassPrefix+a.placement)||(D.removeClass(n.placementClassPrefix+J),D.addClass(n.placementClassPrefix+a.placement)),g(function(){var a=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),b=i.adjustTop(e,d,c,a);b&&D.css(b)},0,!1),D.hasClass("uib-position-measure")?(i.positionArrow(D,a.placement),D.removeClass("uib-position-measure")):J!==a.placement&&i.positionArrow(D,a.placement),J=a.placement,I=null},0,!1)))};N.origScope=a,N.isOpen=!1,N.contentExp=function(){return N.content},d.$observe("disabled",function(a){a&&s(),a&&N.isOpen&&t()}),P&&a.$watch(P,function(a){N&&!a===N.isOpen&&j()});var T=function(){L.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j))}),L.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};C();var U=a.$eval(d[k+"Animation"]);N.animation=angular.isDefined(U)?!!U:n.animation;var V,W=k+"AppendToBody";V=W in d&&void 0===d[W]||a.$eval(d[W]),K=angular.isDefined(V)?V:K,a.$on("$destroy",function(){T(),w(),N=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}b.popupClass&&c.addClass(b.popupClass),b.animation&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){function d(){return angular.isDefined(a.maxParam)?a.maxParam:c.max}var e=this,f=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=d(),this.addBar=function(a,b,c){f||b.css({transition:"none"}),this.bars.push(a),a.max=d(),a.title=c&&angular.isDefined(c.title)?c.title:"progressbar",a.$watch("value",function(b){a.recalculatePercentage()}),a.recalculatePercentage=function(){var b=e.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);b>100&&(a.percent-=b-100)},a.$on("$destroy",function(){b=null,e.removeBar(a)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("maxParam",function(a){e.bars.forEach(function(a){a.max=d(),a.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop},e=this;this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff,this.enableReset=angular.isDefined(b.enableReset)?a.$parent.$eval(b.enableReset):c.enableReset;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;b<c;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){if(!a.readonly&&b>=0&&b<=a.range.length){var c=e.enableReset&&d.$viewValue===b?0:b;d.$setViewValue(c),d.$render()}},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue,a.title=e.getTitle(a.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){function b(a){for(var b=0;b<d.tabs.length;b++)if(d.tabs[b].index===a)return b}var c,d=this;d.tabs=[],d.select=function(a,f){if(!e){var g=b(c),h=d.tabs[g];if(h){if(h.tab.onDeselect({$event:f,$selectedIndex:a}),f&&f.isDefaultPrevented())return;h.tab.active=!1}var i=d.tabs[a];i?(i.tab.onSelect({$event:f}),i.tab.active=!0,d.active=i.index,c=i.index):!i&&angular.isDefined(c)&&(d.active=null,c=null)}},d.addTab=function(a){if(d.tabs.push({tab:a,index:a.index}),d.tabs.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0}),a.index===d.active||!angular.isDefined(d.active)&&1===d.tabs.length){var c=b(a.index);d.select(c)}},d.removeTab=function(a){for(var b,c=0;c<d.tabs.length;c++)if(d.tabs[c].tab===a){b=c;break}if(d.tabs[b].index===d.active){var e=b===d.tabs.length-1?b-1:b+1%d.tabs.length;d.select(e)}d.tabs.splice(b,1)},a.$watch("tabset.active",function(a){angular.isDefined(a)&&a!==c&&d.select(b(a))});var e;
a.$on("$destroy",function(){e=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tabset.html"},link:function(a,b,c){a.vertical=!!angular.isDefined(c.vertical)&&a.$parent.$eval(c.vertical),a.justified=!!angular.isDefined(c.justified)&&a.$parent.$eval(c.justified)}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),angular.isUndefined(d.index)&&(e.tabs&&e.tabs.length?b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1:b.index=0),angular.isUndefined(d.classes)&&(b.classes=""),b.select=function(a){if(!b.disabled){for(var c,d=0;d<e.tabs.length;d++)if(e.tabs[d].tab===b){c=d;break}e.select(c,a)}},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase()||"uib:tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude).tab;e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&b<13:b>=0&&b<24;if(c&&""!==a.hours)return a.showMeridian&&(12===b&&(b=0),a.meridian===v[1]&&(b+=12)),b}function i(){var b=+a.minutes,c=b>=0&&b<60;if(c&&""!==a.minutes)return b}function j(){var b=+a.seconds;return b>=0&&b<60?b:void 0}function k(a,b){return null===a?"":angular.isDefined(a)&&a.toString().length<2&&!b?"0"+a:a.toString()}function l(a){m(),u.$setViewValue(new Date(s)),n(a)}function m(){u.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(u.$modelValue){var c=s.getHours(),d=s.getMinutes(),e=s.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c,!w),"m"!==b&&(a.minutes=k(d)),a.meridian=s.getHours()<12?v[0]:v[1],"s"!==b&&(a.seconds=k(e)),a.meridian=s.getHours()<12?v[0]:v[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=v[0]}function o(a){s=q(s,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}function r(){return(null===a.hours||""===a.hours)&&(null===a.minutes||""===a.minutes)&&(!a.showSeconds||a.showSeconds&&(null===a.seconds||""===a.seconds))}var s=new Date,t=[],u={$setViewValue:angular.noop},v=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS,w=!angular.isDefined(c.padHours)||a.$parent.$eval(c.padHours);a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){u=b,u.$render=this.render,u.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2),i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var x=g.hourStep;c.hourStep&&t.push(a.$parent.$watch(d(c.hourStep),function(a){x=+a}));var y=g.minuteStep;c.minuteStep&&t.push(a.$parent.$watch(d(c.minuteStep),function(a){y=+a}));var z;t.push(a.$parent.$watch(d(c.min),function(a){var b=new Date(a);z=isNaN(b)?void 0:b}));var A;t.push(a.$parent.$watch(d(c.max),function(a){var b=new Date(a);A=isNaN(b)?void 0:b}));var B=!1;c.ngDisabled&&t.push(a.$parent.$watch(d(c.ngDisabled),function(a){B=a})),a.noIncrementHours=function(){var a=p(s,60*x);return B||a>A||a<s&&a<z},a.noDecrementHours=function(){var a=p(s,60*-x);return B||a<z||a>s&&a>A},a.noIncrementMinutes=function(){var a=p(s,y);return B||a>A||a<s&&a<z},a.noDecrementMinutes=function(){var a=p(s,-y);return B||a<z||a>s&&a>A},a.noIncrementSeconds=function(){var a=q(s,C);return B||a>A||a<s&&a<z},a.noDecrementSeconds=function(){var a=q(s,-C);return B||a<z||a>s&&a>A},a.noToggleMeridian=function(){return s.getHours()<12?B||p(s,720)>A:B||p(s,-720)<z};var C=g.secondStep;c.secondStep&&t.push(a.$parent.$watch(d(c.secondStep),function(a){C=+a})),a.showSeconds=g.showSeconds,c.showSeconds&&t.push(a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b})),a.showMeridian=g.showMeridian,c.showMeridian&&t.push(a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,u.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(s.setHours(c),l())}else n()})),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){B||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){B||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.bind("mousewheel wheel",function(b){B||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.bind("keydown",function(b){B||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.bind("keydown",function(b){B||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.bind("keydown",function(b){B||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){u.$setViewValue(null),u.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c),angular.isDefined(d)&&(a.invalidSeconds=d)};a.updateHours=function(){var a=h(),b=i();u.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(s.setHours(a),s.setMinutes(b),s<z||s>A?e(!0):l("h")):e(!0)},b.bind("blur",function(b){u.$setTouched(),r()?m():null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours,!w)})}),a.updateMinutes=function(){var a=i(),b=h();u.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(s.setHours(b),s.setMinutes(a),s<z||s>A?e(void 0,!0):l("m")):e(void 0,!0)},c.bind("blur",function(b){u.$setTouched(),r()?m():null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();u.$setDirty(),angular.isDefined(a)?(s.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.bind("blur",function(b){r()?m():!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=u.$viewValue;isNaN(b)?(u.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(s=b),s<z||s>A?(u.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*x*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-x*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*y)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-y)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(C)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-C)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(s.getHours()<12?60:-60)):a.meridian=a.meridian===v[0]?v[1]:v[0])},a.blur=function(){u.$setTouched()},a.$on("$destroy",function(){for(;t.length;)t.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){O.moveInProgress||(O.moveInProgress=!0,O.$digest()),Z()}function o(){O.position=E?l.offset(b):l.position(b),O.position.top+=b.prop("offsetHeight")}var p,q,r=[9,13,27,38,40],s=200,t=a.$eval(c.typeaheadMinLength);t||0===t||(t=1),a.$watch(c.typeaheadMinLength,function(a){t=a||0===a?a:1});var u=a.$eval(c.typeaheadWaitMs)||0,v=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){v=a!==!1});var w,x,y=e(c.typeaheadLoading).assign||angular.noop,z=c.typeaheadShouldSelect?e(c.typeaheadShouldSelect):function(a,b){var c=b.$event;return 13===c.which||9===c.which},A=e(c.typeaheadOnSelect),B=!!angular.isDefined(c.typeaheadSelectOnBlur)&&a.$eval(c.typeaheadSelectOnBlur),C=e(c.typeaheadNoResults).assign||angular.noop,D=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,E=!!c.typeaheadAppendToBody&&a.$eval(c.typeaheadAppendToBody),F=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,G=a.$eval(c.typeaheadFocusFirst)!==!1,H=!!c.typeaheadSelectOnExact&&a.$eval(c.typeaheadSelectOnExact),I=e(c.typeaheadIsOpen).assign||angular.noop,J=a.$eval(c.typeaheadShowHint)||!1,K=e(c.ngModel),L=e(c.ngModel+"($$$p)"),M=function(b,c){return angular.isFunction(K(a))&&q&&q.$options&&q.$options.getterSetter?L(b,{$$$p:c}):K.assign(b,c)},N=m.parse(c.uibTypeahead),O=a.$new(),P=a.$on("$destroy",function(){O.$destroy()});O.$on("$destroy",P);var Q="typeahead-"+O.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":Q});var R,S;J&&(R=angular.element("<div></div>"),R.css("position","relative"),b.after(R),S=b.clone(),S.attr("placeholder",""),S.attr("tabindex","-1"),S.val(""),S.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),S.attr("id")&&S.removeAttr("id"),R.append(S),S.after(b));var T=angular.element("<div uib-typeahead-popup></div>");T.attr({id:Q,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&T.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&T.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var U=function(){J&&S.val("")},V=function(){O.matches=[],O.activeIdx=-1,b.attr("aria-expanded",!1),U()},W=function(a){return Q+"-option-"+a};O.$watch("activeIdx",function(a){a<0?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",W(a))});var X=function(a,b){return!!(O.matches.length>b&&a)&&a.toUpperCase()===O.matches[b].label.toUpperCase()},Y=function(c,d){var e={$viewValue:c};y(a,!0),C(a,!1),f.when(N.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&w)if(f&&f.length>0){O.activeIdx=G?0:-1,C(a,!1),O.matches.length=0;for(var h=0;h<f.length;h++)e[N.itemName]=f[h],O.matches.push({id:W(h),label:N.viewMapper(O,e),model:f[h]});if(O.query=c,o(),b.attr("aria-expanded",!0),H&&1===O.matches.length&&X(c,0)&&(angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?k(function(){O.select(0,d)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate.default):O.select(0,d)),J){var i=O.matches[0].label;angular.isString(c)&&c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?S.val(c+i.slice(c.length)):S.val("")}}else V(),C(a,!0);g&&y(a,!1)},function(){V(),y(a,!1),C(a,!0)})};E&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var Z=k(function(){O.matches.length&&o(),O.moveInProgress=!1},s);O.moveInProgress=!1,O.query=void 0;var $,_=function(a){$=g(function(){Y(a)},u)},aa=function(){$&&g.cancel($)};V(),O.assignIsOpen=function(b){I(a,b)},O.select=function(d,e){var f,h,i={};x=!0,i[N.itemName]=h=O.matches[d].model,f=N.modelMapper(a,i),M(a,f),p.$setValidity("editable",!0),p.$setValidity("parse",!0),A(a,{$item:h,$model:f,$label:N.viewMapper(a,i),$event:e}),V(),O.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(b){if(0!==O.matches.length&&r.indexOf(b.which)!==-1){var c=z(a,{$event:b});if(O.activeIdx===-1&&c||9===b.which&&b.shiftKey)return V(),void O.$digest();b.preventDefault();var d;switch(b.which){case 27:b.stopPropagation(),V(),a.$digest();break;case 38:O.activeIdx=(O.activeIdx>0?O.activeIdx:O.matches.length)-1,O.$digest(),d=T[0].querySelectorAll(".uib-typeahead-match")[O.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;case 40:O.activeIdx=(O.activeIdx+1)%O.matches.length,O.$digest(),d=T[0].querySelectorAll(".uib-typeahead-match")[O.activeIdx],d.parentNode.scrollTop=d.offsetTop;break;default:c&&O.$apply(function(){angular.isNumber(O.debounceUpdate)||angular.isObject(O.debounceUpdate)?k(function(){O.select(O.activeIdx,b)},angular.isNumber(O.debounceUpdate)?O.debounceUpdate:O.debounceUpdate.default):O.select(O.activeIdx,b)})}}}),b.bind("focus",function(a){w=!0,0!==t||p.$viewValue||g(function(){Y(p.$viewValue,a)},0)}),b.bind("blur",function(a){B&&O.matches.length&&O.activeIdx!==-1&&!x&&(x=!0,O.$apply(function(){angular.isObject(O.debounceUpdate)&&angular.isNumber(O.debounceUpdate.blur)?k(function(){O.select(O.activeIdx,a)},O.debounceUpdate.blur):O.select(O.activeIdx,a)})),!v&&p.$error.editable&&(p.$setViewValue(),O.$apply(function(){p.$setValidity("editable",!0),p.$setValidity("parse",!0)}),b.val("")),w=!1,x=!1});var ba=function(c){b[0]!==c.target&&3!==c.which&&0!==O.matches.length&&(V(),j.$$phase||a.$digest())};h.on("click",ba),a.$on("$destroy",function(){h.off("click",ba),(E||F)&&ca.remove(),E&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),T.remove(),J&&R.remove()});var ca=d(T)(O);E?h.find("body").append(ca):F?angular.element(F).eq(0).append(ca):b.after(ca),this.init=function(b,c){p=b,q=c,O.debounceUpdate=p.$options&&e(p.$options.debounce)(a),p.$parsers.unshift(function(b){return w=!0,0===t||b&&b.length>=t?u>0?(aa(),_(b)):Y(b):(y(a,!1),aa(),V()),v?b:b?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(b){var c,d,e={};return v||p.$setValidity("editable",!0),D?(e.$model=b,D(a,e)):(e[N.itemName]=b,c=N.viewMapper(a,e),e[N.itemName]=void 0,d=N.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e.default):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){
a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),angular.module("DealersApp",["ngAnimate","ngRoute","ngCookies","ngMaterial","ui.bootstrap","ngImgCrop","angular-google-analytics","pascalprecht.translate","tmh.dynamicLocale"]).config(["$mdThemingProvider",function(a){a.theme("default").primaryPalette("purple",{default:"500"}).accentPalette("purple",{default:"500"})}]).config(["AnalyticsProvider",function(a){a.setAccount({tracker:"UA-62425106-3",trackEvent:!0,trackEcommerce:!0}),a.useECommerce(!0,!1),a.setCurrency("ILS"),a.readFromRoute(!0)}]).config(["$translateProvider","tmhDynamicLocaleProvider",function(a,b){a.useMissingTranslationHandlerLog(),a.useStaticFilesLoader({prefix:"resources/locale-",suffix:".json"}),a.registerAvailableLanguageKeys(["he","en"],{"he*":"he","en*":"en"}),a.determinePreferredLanguage(),a.fallbackLanguage("en"),a.useSanitizeValueStrategy("escape"),a.useLocalStorage(),b.localeLocationPattern("/assets/locales/angular-locale_{{locale}}.js")}]).constant("LOCALES",{locales:{he:"עברית",en:"English"},localeFlags:{"עברית":"/assets/images/icons/@2x/flag-israel.png",English:"/assets/images/icons/@2x/flag-usa.png"},preferredLocale:"en"}).filter("htmlEscape",function(){return function(a){if(a)return a.replace("&amp;","&")}}).run(["$rootScope","$location","$cookies","$http","$timeout","$mdToast","DealerPhotos","Analytics","$translate","$translateLocalStorage",function(a,b,c,d,e,f,g,h,i,j){function k(b){var c=new Date(b.register_date).getTime();window.Intercom("boot",{app_id:a.INTERCOM_APP_ID,user_id:b.id,user_hash:b.intercom_code,created_at:c/1e3,name:b.full_name,email:b.email,date_of_birth:b.date_of_birth,gender:b.gender,location:b.location,role:b.role,rank:b.rank,language:a.language})}function l(){var b=a.dealer,c=a.dealer.photo;"None"!=c&&""!=c?(g.getPhoto(c,b.id,a.userProfilePicSender),a.$on("downloaded-"+a.userProfilePicSender+"-dealer-pic-"+b.id,function(b,c){c.success?e(function(){a.userProfilePic=c.data,a.$apply()},1e3):(a.userProfilePic=null,console.log(c.message))})):a.userProfilePic=g.DEFAULT_PROFILE_PIC}a.language="",a.baseUrl="https://api.dealers-app.com",a.homeUrl="https://www.dealers-app.com",a.stripe_publishable_key="pk_live_mgdZB9xHsOnYaQDXMXJJm4xU",a.INTERCOM_APP_ID="z1b3ijln",a.AWSKey="AKIAIWJFJX72FWKD2LYQ",a.AWSSecretKey="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",a.AWSS3Bucket="dealers-app",a.directImageURlPrefix="https://"+a.AWSS3Bucket+".s3.amazonaws.com/",a.DEFAULT_PRODUCT_PHOTO_URL="assets/images/icons/@2x/Web_Icons_product_photo_placeholder.png",AWS.config.update({accessKeyId:a.AWSKey,secretAccessKey:a.AWSSecretKey}),AWS.config.region="eu-west-1",a.s3=new AWS.S3,a.setUserProfilePic=l,a.language=i.proposedLanguage();var m="NG_TRANSLATE_LANG_KEY";if(j.get(m)?"he"==a.language&&(document.documentElement.setAttribute("dir","rtl"),document.documentElement.setAttribute("lang",a.language)):(console.log("Determining according to country"),$.getJSON("https://ipinfo.io/json",function(b){var c=b.country;c=c.toLowerCase(),"il"==c&&(a.language="he",document.documentElement.setAttribute("dir","rtl")),i.use(a.language),document.documentElement.setAttribute("lang",a.language)})),"[object Object]"!==c.get("globals"))if(a.globals=c.getObject("globals")||{},a.globals.currentUser){d.defaults.headers.common.Authorization="Token "+a.globals.currentUser.token;var n=localStorage.getItem("dealer");n&&(a.dealer=JSON.parse(n),a.userProfilePic="",a.userProfilePicSender="user-dealer-pic",l(),k(a.dealer),a.$broadcast("DEALER_LOADED"))}else window.Intercom("boot",{app_id:a.INTERCOM_APP_ID});a.roles={guest:"Guest",viewer:"Viewer",dealer:"Dealer",admin:"Admin"},a.categoriesLocal=["All Categories","Art","Automotive","Health & Beauty","Books & Magazines","Electronics","Entertainment & Events","Fashion","Food & Groceries","Home & Furniture","Kids & Babies","Music","Pets","Restaurants & Bars","Services","Sports & Outdoor","Travel","Other"],a.categories=[i.instant("general.all-categories"),i.instant("general.art"),i.instant("general.automotive"),i.instant("general.health-beauty"),i.instant("general.books-magazines"),i.instant("general.electronics"),i.instant("general.entertainment-events"),i.instant("general.fashion"),i.instant("general.food-groceries"),i.instant("general.home-furniture"),i.instant("general.kids-events"),i.instant("general.music"),i.instant("general.pets"),i.instant("general.restaurants-bars"),i.instant("general.services"),i.instant("general.sports-outdoors"),i.instant("general.travel"),i.instant("general.other")],a.$on("$translateChangeSuccess",function(){a.categories=[i.instant("general.all-categories"),i.instant("general.art"),i.instant("general.automotive"),i.instant("general.health-beauty"),i.instant("general.books-magazines"),i.instant("general.electronics"),i.instant("general.entertainment-events"),i.instant("general.fashion"),i.instant("general.food-groceries"),i.instant("general.home-furniture"),i.instant("general.kids-events"),i.instant("general.music"),i.instant("general.pets"),i.instant("general.restaurants-bars"),i.instant("general.services"),i.instant("general.sports-outdoors"),i.instant("general.travel"),i.instant("general.other")]}),a.discountTypes={percentage:"PE",previousPrice:"PP"},a.showToast=function(a,b){var c=3e3;b&&(c=b),f.show(f.simple().textContent(a).position("top").hideDelay(c))},a.$on("$locationChangeStart",function(c,d,e){var f,g,h=a.roles;if(window.Intercom("update"),f=a.dealer?a.dealer.role:h.guest,f!=h.dealer){g=["/new-product","/edit-product"];for(var i=0;i<g.length;i++)if(d.indexOf(g[i])>-1)return void b.path("/")}if(f==h.dealer)for(g=["/register"],i=0;i<g.length;i++)if(d.indexOf(g[i])>-1)return void b.path("/")})}]),angular.module("DealersApp").config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"app/components/views/home.view.html",controller:"HomeController"}).when("/home",{templateUrl:"app/components/views/home.view.html",controller:"HomeController",pageTrack:"/home"}).when("/(?:all-products|Everything",{templateUrl:"app/components/views/home.view.html",controller:"ProductsGridController",pageTrack:"/all-products"}).when("/register",{templateUrl:"app/components/views/sign-in/register-as-dealer.view.html",controller:"RegisterAsDealerController",pageTrack:"/register-as-dealer"}).when("/search/products/:query",{templateUrl:"app/components/views/products/products-page.view.html",controller:"ProductsGridController",pageTrack:"/search/products"}).when("/categories",{templateUrl:"app/components/views/categories-list.view.html",controller:"CategoriesListController",pageTrack:"/categories"}).when("/categories/:category",{templateUrl:"app/components/views/products/products-page.view.html",controller:"ProductsGridController",pageTrack:"/categories"}).when("/products/:productID",{templateUrl:"app/components/views/view-deal.view.html",controller:"ViewDealController",pageTrack:"/product"}).when("/dealers/:dealerID",{templateUrl:"app/components/views/profile.view.html",controller:"ProfileController",pageTrack:"/profile"}).when("/dealers/:dealerID/sales",{templateUrl:"app/components/views/profile.view.html",controller:"ProfileController",reloadOnSearch:!1,pageTrack:"/profile-sales"}).when("/dealers/:dealerID/orders",{templateUrl:"app/components/views/profile.view.html",controller:"ProfileController",reloadOnSearch:!1,pageTrack:"/profile-orders"}).when("/edit-profile/:dealerID",{templateUrl:"app/components/views/edit-profile.view.html",controller:"EditProfileController",pageTrack:"/edit-profile"}).when("/new-product",{templateUrl:"app/components/views/products/add-product.view.html",controller:"AddProductController",pageTrack:"/add-product"}).when("/new-product/spread-the-word",{templateUrl:"app/components/views/products/add-product-finish.view.html",controller:"AddProductFinishController",pageTrack:"/add-product-finish"}).when("/edit-product/:productID",{templateUrl:"app/components/views/products/edit-product.view.html",controller:"EditProductController",pageTrack:"/edit-product"}).when("/done-registration",{templateUrl:"app/components/views/sign-in/done-registration.view.html",pageTrack:"/dealer-registration-finish"}).when("/products/:productID/checkout",{templateUrl:"app/components/views/checkout.view.html",controller:"CheckoutController",pageTrack:"/checkout"}).when("/products/:productID/checkout-finish",{templateUrl:"app/components/views/checkout-finish.view.html",controller:"CheckoutFinishController",pageTrack:"/checkout-finished"}).when("/purchase/:purchaseID",{templateUrl:"app/components/views/purchases/purchase-details.view.html",controller:"PurchaseDetailsController",pageTrack:"/purchase-details"}).when("/about",{templateUrl:"/app/components/views/about/about.view.html"}).when("/terms-and-privacy",{templateUrl:"app/components/views/about/terms-and-privacy.view.html"}).when("/contact",{templateUrl:"app/components/views/about/contact.view.html"}).when("/security",{templateUrl:"app/components/views/about/security.view.html"}).when("/help",{templateUrl:"app/components/views/about/help.view.html"}).when("/step-by-step",{templateUrl:"app/components/views/about/step-by-step.view.html"}).otherwise({redirectTo:"/"}),b.html5Mode(!0)}]),angular.module("DealersApp").controller("AddProductFinishController",["$scope","$rootScope","$location","$timeout","$mdDialog","AddProduct",function(a,b,c,d,e,f){function g(){a.product||c.path("/home")}b.baseUrl+"/products/";a.didntShare=!0,a.didShare=!1,a.product=f.getProduct(),g(),a.switchDidShare=function(b){d(function(){a.didntShare=!1},2e3),d(function(){a.didShare=!0},2500)},a.done=function(){return a.product&&a.product.id?void c.path("/products/"+a.product.id):void c.path("/home")},a.$on("$destroy",function(){f.clearSession()})}]),angular.module("DealersApp").controller("AddProductController",["$rootScope","$scope","$location","$timeout","$mdDialog","$mdConstant","AddProduct","Product","Photos","ProductPhotos","Analytics","Defaults","Dealer","ShippingMethods","Translations",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){q(),r(),s(),t(),b.$watch("product.currency",function(){"₪"==b.product.currency?b.shipping_methods.dealers.shipping_price=b.DEALERS_SHIPPING_PRICE=35:"$"==b.product.currency?b.shipping_methods.dealers.shipping_price=b.DEALERS_SHIPPING_PRICE=10:"€"==b.product.currency&&(b.shipping_methods.dealers.shipping_price=b.DEALERS_SHIPPING_PRICE=9)})}function q(){var a=g.getProduct();$.isEmptyObject(a)||null==a?g.checkForSavedSessions()?b.product=h.unStringifyObject(g.getProduct()):b.product={}:b.product=h.unStringifyObject(a),b.product.currency="₪",b.product.inventory=M,b.product.max_quantity=N}function r(){b.translations.placeholderNames=o.productEdit.placeholderNames,b.translations.placeholderOptions=o.productEdit.placeholderOptions}function s(){(b.dealer.dealers_delivery||b.dealer.custom_delivery||b.dealer.pickup_delivery)&&(b.dealer.dealers_delivery&&(b.shipping_methods.dealers=b.dealer.dealers_delivery,b.shipping_methods.dealers.selected=!0),b.dealer.custom_delivery&&(b.shipping_methods.custom=b.dealer.custom_delivery,b.shipping_methods.custom.selected=!0),b.dealer.pickup_delivery&&(b.shipping_methods.pickup=b.dealer.pickup_delivery,b.shipping_methods.pickup.selected=!0))}function t(){if(b.product&&b.product.photos&&b.product.photos.length>0){b.photos=b.product.photos;for(var a=[],c=0;c<b.photos.length;c++)i.checkIfImageData(b.photos[c])||a.push(c);for(c=0;c<a.length;c++)b.photos.splice(a[c],1);b.photosURLs=i.imageDataToUrls(b.photos),b.selectPhoto(0)}}function u(a){var c;c=1==b.photosURLs.length?500:50,b.selectedPhotoIndex=a,b.changeThumbnailSelection(a),b.shouldBeTabIndex=b.selectedTab,d(function(){$(".carousel-inner div").each(function(a){b.selectedPhotoIndex==a?$(this).addClass("active"):$(this).removeClass("active")})},c)}function v(a){var b=$("div.carousel-inner"),c=b.children();return $(c[a]).hasClass("active")}function w(a){$("div.ap-thumbnail").removeClass("selected"),$("li#"+a+"-photo div.ap-thumbnail").addClass("selected")}function x(a,b,c){e.show(e.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a).textContent(b).ariaLabel("Alert Dialog").ok("Got it").targetEvent(c))}function y(a){e.show({templateUrl:"app/components/views/loading-dialog.view.html",parent:angular.element(document.body),targetEvent:a,controller:"LoadingDialogController",locals:{message:o.productEdit.uploadLoading},escapeToClose:!1})}function z(a){e.hide()}function A(a,c){return b.product.title?0!=b.photos.length||(x(o.productEdit.missingPhotosTitle,o.productEdit.missingPhotosContent,c),!1):(x(o.productEdit.blankTitle,o.productEdit.blankTitleContent,c),!1)}function B(a,c){return null==b.product.price?(x(o.productEdit.blankPriceTitle,o.productEdit.blankPriceContent,c),!1):b.product.price<=0?(x(o.productEdit.invalidPriceTitle,o.productEdit.invalidPriceContent,c),!1):b.product.percentage_off<0?(x(o.productEdit.invalidDiscountTitle,o.productEdit.invalidDiscountContent,c),!1):b.product.percentage_off>100?(x(o.productEdit.invalidDiscountTitle,o.productEdit.invalidDiscountContent100,c),!1):(null!=b.product.original_price&&b.product.original_price<=b.product.price&&x(o.productEdit.invalidDiscountTitle,o.productEdit.invalidDiscountContentOP,c),null==b.product.category?(x(o.productEdit.blankCategoryTitle,o.productEdit.blankCategoryContent,c),!1):0==b.product.category.length?(x(o.productEdit.blankCategoryTitle,o.productEdit.blankCategoryContent,c),!1):!(b.product.max_quantity<=0||b.product.max_quantity>1e4)||(x(o.productEdit.invalidMaxQuantityTitle,o.productEdit.invalidMaxQuantityContent,c),!1))}function C(){return b.showDiscount?(b.product.percentage_off&&!b.presentPercentageOff&&(b.product.percentage_off=null),void(b.product.original_price&&!b.presentOriginalPrice&&(b.product.original_price=null))):(b.product.percentage_off=null,void(b.product.original_price=null))}function D(){for(var a in b.variants)if(b.variants.hasOwnProperty(a)){var c=b.variants[a].name;if(!(c.length>0)){delete b.variants[a];continue}for(var d=b.variants[a].options,e=d.length-1;e>=0;e--)0==d[e].length&&d.splice(e,1)}}function E(){b.shipping_methods.dealers.selected?(b.product.dealers_delivery=b.shipping_methods.dealers,b.product.dealers_delivery.delivery_method=n.DEALERS_METHOD,b.product.dealers_delivery=n.convertDeliveryToServer(b.product.dealers_delivery)):b.product.dealers_delivery=null,b.shipping_methods.custom.selected?(b.product.custom_delivery=b.shipping_methods.custom,b.product.custom_delivery.delivery_method=n.CUSTOM_METHOD,b.product.custom_delivery=n.convertDeliveryToServer(b.product.custom_delivery)):b.product.custom_delivery=null,b.shipping_methods.pickup.selected?(b.product.pickup_delivery=b.shipping_methods.pickup,b.product.pickup_delivery.delivery_method=n.PICKUP_METHOD):b.product.pickup_delivery=null}var F="The content will be lost.",G=0,H=1,I="apSession",J="photos-downloaded-for-",K="ap-upload-finished",L="/new-product/spread-the-word",M=10,N=10;b.photos=[],b.photosURLs=[],b.selectedPhotoIndex=0,b.showDiscount=!1,b.variants={},b.translations={},b.DEALERS_SHIPPING_PRICE=n.DEALERS_SHIPPING_PRICE,b.DEALERS_SHIPPING_ETD=n.DEALERS_SHIPPING_ETD,b.DEALERS_SHIPPING_DESCRIPTION=n.DEALERS_SHIPPING_DESCRIPTION,b.shipping_methods={dealers:n.DEFAULT_DEALER_SHIIPPING,custom:{selected:!1},pickup:n.DEFAULT_PICKUP_SHIIPPING},b.submitButtonTitle=o.productEdit.submitTitleNext,b.showDiscountTitle=o.productEdit.addDiscount,b.placeholderNames=o.productEdit.placeholderNames,b.placeholderOptions=o.productEdit.placeholderOptions,b.presentDealersInfo=!1,b.presentCustomInfo=!1,b.presentPickupInfo=!1,b.maxVariants=3,b.variations=[],b.keys=[f.KEY_CODE.ENTER,f.KEY_CODE.COMMA,f.KEY_CODE.TAB],b.shouldBeTabIndex=-1,b.selectPhoto=u,b.changeThumbnailSelection=w,b.checkIfActive=v,b.showAlertDialog=x,p(),b.nextPhoto=function(a){var c;c="A"==a.target.tagName?a.target:a.target.parentElement;var d,e=b.photos.length;b.checkIfActive(b.selectedPhotoIndex)&&($(c).hasClass("left")?(d=b.selectedPhotoIndex-1,d<0&&(d=e-1)):$(c).hasClass("right")&&(d=b.selectedPhotoIndex+1,d>=e&&(d=0)),b.selectPhoto(d))},b.$watchGroup(["photos[0]","photos[1]","photos[2]","photos[3]"],function(a,c){for(var d=0;d<a.length;d++)null!=a[d]&&null==c[d]&&b.selectPhoto(d)}),b.removePhoto=function(a){var c=e.confirm().title(o.general.removePhotoTitle).textContent(o.general.removePhotoConfirm).ariaLabel("Remove photo").targetEvent(a).ok(o.general.approve).cancel(o.general.cancel);e.show(c).then(function(){var c=a.target.parentElement.parentElement.id;c=parseInt(c,10),b.photos.splice(c,1),b.photosURLs.splice(c,1)})},b.openMenu=function(a,b){a(b)},b.presentDiscountControllers=function(a){b.showDiscount?(b.showDiscount=!1,b.showDiscountTitle=o.productEdit.addDiscount):(b.showDiscount=!0,b.showDiscountTitle=o.productEdit.removeDiscount)},b.changePrice=function(a){b.product.percentage_off>0&&b.changePercentageOff(a)},b.changePercentageOff=function(a){if(b.product.percentage_off){var c=100-b.product.percentage_off;c<=0?(b.product.price=0,b.product.original_price=null):b.product.original_price=b.product.price/c*100}},b.changeOriginalPrice=function(a){var c=100*(1-b.product.price/b.product.original_price);b.product.percentage_off=Math.round(100*c)/100},b.getVariantsLength=function(){return Object.keys(b.variants).length},b.addVariant=function(a){b.getVariantsLength()<b.maxVariants&&(b.variants[b.getVariantsLength()]={name:"",options:[]})},b.removeVariant=function(a,c){for(delete b.variants[a];b.variants[a+1];)b.variants[a]=b.variants[a+1],delete b.variants[a+1],a++},b.toggleDelivery=function(a,b){var c=b.indexOf(a);c>-1?b.splice(c,1):b.push(a)},b.exists=function(a,b){return b.indexOf(a)>-1},b.onTabSelected=function(a){0==a?b.submitButtonTitle=o.productEdit.submitTitleNext:b.submitButtonTitle=o.productEdit.submitTitleDone},b.addProduct=function(a,c){return b.selectedTab==G?(b.selectedTab=H,void $("html, body").animate({scrollTop:0},800)):void(A(a,c)&&B(a,c)&&n.validateShippingMethods(b.shipping_methods)&&(C(),$.isEmptyObject(b.variants)||(D(),b.product.variants=h.parseVariantsToServer(b.variants)),E(),b.product.photos=b.photos,b.product.max_quantity=Math.round(b.product.max_quantity),y(),j.uploadPhotosOfProduct(b.product,I)))},b.$on(J+I,function(a,c){c.data;c.success?(b.product=c.product,g.uploadProduct(b.product),k.trackEvent("Product","add",b.product.category)):(z(a),console.log("Couldn't upload the photos. Aborting upload process."))}),b.$on(K,function(a,b){z(),b.success?(l.updateShippingMethods(b.product,b.product.dealer),m.updateCurrentUser(b.product.dealer),Intercom("trackEvent","added_product",{product_id:b.product.id,product_title:b.product.title}),c.path(L)):(console.log(b.message),x("We're sorry, but there was a problem",b.message,a))}),window.onbeforeunload=function(){if(g.saveSession(b.product,b.photosURLs),b.photos.length>0||!$.isEmptyObject(b.product))return F};b.$on("$locationChangeStart",function(a,c){var d="new-product";if(c.indexOf(d)==-1&&(0!=b.photos.length||b.addProductForm.$dirty)){var e=confirm(o.general.confirmLeave);if(!e)return void a.preventDefault();g.clearSession()}});a.$on("$translateChangeSuccess",function(){b.submitButtonTitle=o.productEdit.submitTitleNext,b.showDiscountTitle=o.productEdit.addDiscount,b.placeholderNames=o.productEdit.placeholderNames,b.placeholderOptions=o.productEdit.placeholderOptions}),b.$on("$destroy",function(){window.onbeforeunload=null})}]),angular.module("DealersApp").controller("CategoriesListController",["$scope",function(a){a.elements=a.categories}]),angular.module("DealersApp").controller("CheckoutFinishController",["$scope","$rootScope","$location","$mdDialog","ActiveSession",function(a,b,c,d,e){
function f(){a.product||c.path("/home")}a.product=e.getTempData("PRODUCT"),a.hasPurchase=!1;var g;f(),a.$on("purchaseSaved",function(b,c){a.hasPurchase=!0,g="/purchase/"+c}),a.purchaseDetails=function(a){g&&c.path(g)},a.done=function(){c.path("/home")},a.$on("$destroy",function(){e.removeTempData("PRODUCT")})}]),angular.module("DealersApp").controller("CheckoutController",["$scope","$rootScope","$routeParams","$location","$mdMedia","$mdDialog","Checkout","ActiveSession","Product","ProductPhotos","Purchase","Dialogs","ShippingMethods","Translations",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){a.product=h.getTempData("PRODUCT"),a.$watch(function(){return e("gt-sm")},function(b){a.smallSize=!b}),a.product?(a.status=u,q()):p()}function p(){var b=c.productID;i.getProduct(b).then(function(b){a.status=u,a.product=b.data,a.product=i.mapData(a.product),a.product.max_quantity>0||(a.product.max_quantity=30),q()},function(b){a.status=w,a.errorMessage="Couldn't download the product",a.errorPrompt="Please try again..."})}function q(){r(),s(),t()}function r(){var c=g.purchase;c&&!$.isEmptyObject(c)||(c=g.retrieveSavedSession(),c&&!$.isEmptyObject(c)||(console.log("No purchase object!"),d.path("/products/"+a.product.id))),a.purchase={buyer:b.dealer.id,dealer:a.product.dealer.id,deal:a.product.id,amount:100*a.product.price,currency:a.product.currency,status:"Purchased",quantity:c.quantity,selections:c.selections}}function s(){a.product.photo?(a.productImage=a.product.photo,a.productImageStatus=u):(j.downloadPhoto(a.product.photo1,a.product.id),a.productImageStatus=v,a.$on("downloaded-photo-"+a.product.id,function(b,c){c.success?(a.productImage=c.data.url,a.product.photo=a.productImage,a.productImageStatus=u,a.$apply()):console.log(c.data.message)}))}function t(){var b=[];a.product.dealers_delivery&&b.push(a.product.dealers_delivery),a.product.custom_delivery&&b.push(a.product.custom_delivery),a.product.pickup_delivery&&b.push(a.product.pickup_delivery),1==b.length&&(a.delivery.selectedShipping=b[0].delivery_method,a.delivery.selectedShippingObj=b[0]),a.shippingMethods=b}var u="downloaded",v="downloading",w="failed";a.status=v,a.finished=!1;var x=b.dealer.shipping_address;a.shipping_address=x?x:{},a.shippingMethods=[],a.PICKUP_METHOD=m.PICKUP_METHOD,a.delivery={selectedShipping:"",selectedShippingObj:{}},o(),a.presentDetails=function(a,b){l.showAlertDialog(a.title,a.description,b)},a.updateSelectedShipping=function(b){var c=a.delivery.selectedShipping;c==m.DEALERS_METHOD?a.delivery.selectedShippingObj=a.product.dealers_delivery:c==m.CUSTOM_METHOD?a.delivery.selectedShippingObj=a.product.custom_delivery:c==m.PICKUP_METHOD&&(a.delivery.selectedShippingObj=a.product.pickup_delivery)},a.checkout=function(c,e){if(!a.purchase.quantity)return void f.show(f.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(n.checkout.invalidQuantityTitle).textContent(n.checkout.invalidQuantityContent+a.product.max_quantity+".").ariaLabel("Alert Dialog").ok(n.general.gotIt).targetEvent(e));if(!a.delivery.selectedShipping)return void f.show(f.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(n.checkout.blankDelivery).textContent("").ariaLabel("Alert Dialog").ok(n.general.gotIt).targetEvent(e));if(!c.$valid)return void f.show(f.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(n.checkout.invalidShippingAddressTitle).textContent(n.checkout.invalidShippingAddressContent).ariaLabel("Alert Dialog").ok(n.general.gotIt).targetEvent(e));var g,j=100*a.delivery.selectedShippingObj.shipping_price,l=a.product.price*a.purchase.quantity*100,m=l+j,o=b.directImageURlPrefix+a.product.dealer.photo;g=1==a.product.currency.length?i.keyForCurrency(a.product.currency):a.product.currency,a.purchase.shipping_address=a.shipping_address,a.purchase.delivery=a.delivery.selectedShippingObj.id;var p=$.extend(!0,{},a.purchase);p.currency=g;var q=StripeCheckout.configure({key:b.stripe_publishable_key,image:o,locale:"auto",email:b.dealer.email,token:function(c){var e={token:c.id,amount:m,currency:g,dealer:a.product.dealer.id,buyer:b.dealer.id};i.buyProduct(e).then(function(b){console.log("Payment successful!"),a.finished=!0,k.addPurchase(p,a.product),h.setTempData("PRODUCT",a.product),Intercom("trackEvent","purchased",{product_id:a.product.id,product_title:a.product.title,quantity:p.quantity,total_price:m,currency:g}),d.path("/products/"+a.product.id+"/checkout-finish")},function(a){console.log("Error!\n"+a)})}});q.open({name:a.product.title,description:a.product.dealer.full_name,amount:m,currency:g}),event&&event.preventDefault()},window.onbeforeunload=function(){g.saveSession(a.purchase)};a.$on("$locationChangeStart",function(){a.finished?g.clearSession():g.saveSession(a.purchase)});a.$on("$destroy",function(){g.clearSession()})}]),angular.module("DealersApp").controller("CropPhotoDialog",["$scope","$rootScope","$mdDialog","rawPhoto","Translations",function(a,b,c,d,e){e.general.crop,e.general.cancel;a.rawPhotoURL=d,a.croppedPhotoURL="",a.crop=function(){c.hide(a.croppedPhotoURL)},a.cancel=function(){c.cancel()}}]),angular.module("DealersApp").controller("EditProductController",["$scope","$rootScope","$location","$mdDialog","$mdConstant","$mdToast","$routeParams","$timeout","Product","ProductPhotos","EditProduct","ShippingMethods","Dialogs","Translations",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){var b=g.productID;i.getProduct(b).then(function(b){a.downloadedFromServer=!0;var c=b.data;c=i.mapData(c),p(),q(c),a.setProductInView(),a.variants=i.parseVariantsFromServer(a.product.variants)},function(b){a.status="failed",a.errorMessage="Couldn't download the product",a.errorPrompt="Please try again..."})}function p(){a.translations.placeholderNames=n.productEdit.placeholderNames,a.translations.placeholderOptions=n.productEdit.placeholderOptions}function q(b){b?(a.status="downloaded",a.product=$.extend(!0,{},b),a.shipping_methods=l.parseShippingFromServer(a.product,a.downloadedFromServer),a.originalShippingMethods=$.extend(!0,{},a.shipping_methods)):console.log("Something is wrong - setProduct called but there's no product!")}function r(b){if(a.product.percentage_off){var c=100-a.product.percentage_off;c<=0?(a.product.price=0,a.product.original_price=null):a.product.original_price=a.product.price/c*100}}function s(b){var c=100*(1-a.product.price/a.product.original_price);a.product.percentage_off=Math.round(100*c)/100}function t(){a.presentPercentageOff=!!a.product.percentage_off,a.presentOriginalPrice=!!a.product.original_price,a.changePercentageOff(),a.changeOriginalPrice(),w(),v()}function u(){if(a.product&&a.product.photos&&a.product.photos.length>0){a.photos=a.product.photos;for(var b=[],c=0;c<a.photos.length;c++)Photos.checkIfImageData(a.photos[c])||b.push(c);for(c=0;c<b.length;c++)a.photos.splice(b[c],1);a.photosURLs=Photos.imageDataToUrls(a.photos),a.selectPhoto(0)}}function v(){j.downloadPhotos(a.product);for(var c=0;c<j.photosNum(a.product);c++)a.photosStatus.push("loading"),a.photosURLs.push(b.DEFAULT_PRODUCT_PHOTO_URL);a.selectPhoto(0),a.$on("downloaded-photo-"+a.product.id,function(b,c){var d=c.data,e=d.photoIndex-1;c.success?(a.photos[e]=d.rawImage,a.photosURLs[e]=d.url,a.photosStatus[e]="doneLoading",a.$apply()):(console.log("Photos number "+d.photoIndex+" failed to download: \n"+d.message),a.photosStatus[e]="failed")})}function w(){var b=a.product;b&&(a.currency=b.currency,a.category=b.category)}function x(b){var c;c=1==a.photosURLs.length?500:50,a.selectedIndex=b,a.changeThumbnailSelection(b),h(function(){$(".carousel-inner div").each(function(b){a.selectedIndex==b?$(this).addClass("active"):$(this).removeClass("active")})},c)}function y(a){var b=$("div.carousel-inner"),c=b.children();return $(c[a]).hasClass("active")}function z(a){$("div.ap-thumbnail").removeClass("selected"),$("li#"+a+"-photo div.ap-thumbnail").addClass("selected")}function A(a,b,c){d.show(d.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a).textContent(b).ariaLabel("Alert Dialog").ok(n.general.gotIt).targetEvent(c))}function B(a){d.show({templateUrl:"app/components/views/loading-dialog.view.html",parent:angular.element(document.body),targetEvent:a,controller:"LoadingDialogController",locals:{message:n.general.saveChanges},escapeToClose:!1})}function C(a){d.hide()}function D(){a.product.percentage_off&&!a.presentPercentageOff&&(a.product.percentage_off=null),a.product.original_price&&!a.presentOriginalPrice&&(a.product.original_price=null)}function E(){for(var b in a.variants)if(a.variants.hasOwnProperty(b)){var c=a.variants[b].name;if(!(c.length>0)){delete a.variants[b];continue}for(var d=a.variants[b].options,e=d.length-1;e>=0;e--)0==d[e].length&&d.splice(e,1)}}function F(){k.deleteVariants(a.product.variants),delete a.product.variants;for(var b=i.parseVariantsToServer(a.variants),c=[],d=0;d<b.length;d++)b[d].deal=a.product.id,k.postVariant(b[d]).then(function(d){c.push(d.data),c.length==b.length&&(a.variantsForLater=c,a.uploadPhotosAndProduct())},function(a){console.log("Failed to post variant.")});0==b.length&&a.uploadPhotosAndProduct()}function G(b,c){return 0==a.photos.length?(A(n.productEdit.missingPhotosTitle,n.productEdit.missingPhotosContent,c),!1):a.product.title?null==a.product.price?(A(n.productEdit.blankPriceTitle,n.productEdit.blankPriceContent,c),!1):a.product.price<=0?(A(n.productEdit.invalidPriceTitle,n.productEdit.invalidPriceContent,c),!1):a.presentPercentageOff&&a.product.percentage_off<0?(A(n.productEdit.invalidDiscountTitle,n.productEdit.invalidDiscountContent,c),!1):a.presentPercentageOff&&a.product.percentage_off>100?(A(n.productEdit.invalidDiscountTitle,n.productEdit.invalidDiscountContent100,c),!1):a.presentOriginalPrice&&a.product.original_price<=a.product.price?(A(n.productEdit.invalidDiscountTitle,n.productEdit.invalidDiscountContentOP,c),!1):a.product.max_quantity>0?null==a.product.category?(A(n.productEdit.blankCategoryTitle,n.productEdit.blankCategoryContent,c),!1):0==a.product.category.length?(A(n.productEdit.blankCategoryTitle,n.productEdit.blankCategoryContent,c),!1):!!l.validateShippingMethods(a.shipping_methods):(A(n.productEdit.invalidMaxQuantityTitle,n.productEdit.invalidMaxQuantityContent,c),!1):(A(n.productEdit.blankTitle,n.productEdit.blankTitleContent,c),!1)}var H="₪",I="$",J="€",K="%",L="The changes you made will be lost.",M="/products/"+g.productID+"/",N="photos-downloaded-for-",O="ep-upload-started",P="ep-upload-finished",Q="epSession",R="Changes Saved!",S=b.baseUrl+"/alldeals/"+g.productID+"/";a.DEALERS_SHIPPING_PRICE=l.DEALERS_SHIPPING_PRICE,a.DEALERS_SHIPPING_ETD=l.DEALERS_SHIPPING_ETD,a.DEALERS_SHIPPING_DESCRIPTION=l.DEALERS_SHIPPING_DESCRIPTION,a.originalDealer={},a.product={},a.translations={},a.currency=H,a.discountType=K,a.category="",a.minDate=new Date,a.changedPhotos=!1,a.savedChanges=!1,a.downloadedFromServer=!1,a.photos=[],a.photosStatus=[],a.photosURLs=[],a.oldPhotosURLs=[],a.selectedIndex=0,a.variants={},a.maxVariants=3,a.variations=[],a.keys=[e.KEY_CODE.ENTER,e.KEY_CODE.COMMA,e.KEY_CODE.TAB],a.selectPhoto=x,a.changeThumbnailSelection=z,a.checkIfActive=y,a.changePercentageOff=r,a.changeOriginalPrice=s,a.setProductInView=t,k.product.id?(p(),q(k.product),a.setProductInView(),a.variants=i.parseVariantsFromServer(a.product.variants)):(a.status="loading",o(),u()),a.changePrice=function(b){a.product.percentage_off>0&&a.changePercentageOff(b)},a.changePresentPercentageOff=function(b){a.presentPercentageOff=!a.presentPercentageOff},a.changePresentOriginalPrice=function(b){a.presentOriginalPrice=!a.presentOriginalPrice},a.nextPhoto=function(b){var c;c="A"==b.target.tagName?b.target:b.target.parentElement;var d,e=a.photos.length;a.checkIfActive(a.selectedIndex)&&($(c).hasClass("left")?(d=a.selectedIndex-1,d<0&&(d=e-1)):$(c).hasClass("right")&&(d=a.selectedIndex+1,d>=e&&(d=0)),a.selectPhoto(d))},a.$watchGroup(["photos[0]","photos[1]","photos[2]","photos[3]"],function(b,c){for(var d=0;d<b.length;d++)null!=b[d]&&null==c[d]&&a.selectPhoto(d)}),a.removePhoto=function(b){var c=d.confirm().title(n.general.removePhotoTitle).textContent(n.general.removePhotoConfirm).ariaLabel("Remove photo").targetEvent(b).ok(n.general.approve).cancel(n.general.cancel);d.show(c).then(function(){var c=b.target.parentElement.parentElement.id;c=parseInt(c,10),a.photos.splice(c,1),a.photosURLs.splice(c,1),a.changedPhotos=!0})},a.openMenu=function(a,b){a(b)},a.changedPhoto=function(b){a.changedPhotos=!0},a.shekel=function(){a.currency=H},a.dollar=function(){a.currency=I},a.euro=function(){a.currency=J},a.getVariantsLength=function(){return Object.keys(a.variants).length},a.addVariant=function(b){a.getVariantsLength()<a.maxVariants&&(a.variants[a.getVariantsLength()]={name:"",options:[]})},a.removeVariant=function(b,c){for(delete a.variants[b];a.variants[b+1];)a.variants[b]=a.variants[b+1],delete a.variants[b+1],b++},a.$on(O,function(a){B(a)}),a.$on(P,function(d,e){C(),e.success?(a.savedChanges=!0,e.data&&(a.product=e.data,a.product.variants=a.variantsForLater,k.product=a.product),k.isAfterEdit=!0,c.path(M),h(b.showToast,1500,!0,R)):(console.log(e.message),A("We're sorry, but there was a problem",e.message,d))}),a.submitEdit=function(b){a.product.photos=a.photos,G(b,event)&&(D(),a.product.photos=a.photos,a.product.max_quantity=Math.round(a.product.max_quantity),B(),l.updateShippingMethods(a.product,a.shipping_methods,a.originalShippingMethods))},a.continueEditSubmission=function(){$.isEmptyObject(a.variants)?(delete a.product.variants,a.uploadPhotosAndProduct()):(E(),F())},a.uploadPhotosAndProduct=function(){a.changedPhotos?(a.oldPhotosURLs=j.setProductPhotosInArray(a.product),j.uploadPhotosOfProduct(a.product,Q)):k.uploadModifiedProduct(a.product)},a.$on(N+Q,function(b,c){c.success?(a.product=c.product,k.uploadModifiedProduct(a.product),a.oldPhotosURLs&&j.deletePhotos(a.oldPhotosURLs)):(C(b),m.showAlertDialog("Update Failure :(","There was an error while uploading the new photos, please try again."),console.log("Couldn't upload the photos. Aborting upload process."))}),a.$on(l.UPDATE_FINISHED,function(b,c){c.success?a.continueEditSubmission():(C(),m.showAlertDialog("Update Failure :(","There was an error in the update process, please try again."))}),a.deleteProduct=function(a){var e=d.confirm().title(n.viewDeal.deletionMessageTitle).textContent(n.viewDeal.deletionMessageContent).ariaLabel("Delete product").targetEvent(a).ok(n.general.approve).cancel(n.general.cancel);d.show(e).then(function(){i.deleteProduct(S).then(function(a){console.log("Product deleted successfully."),h(b.showToast,1e3,!0,n.viewDeal.deletedMessage),c.path("/home")},function(a){console.log(a.status+" : "+a.data),d.show(d.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title("Couldn't delete the product").textContent("Please try again!").ariaLabel("Alert Dialog").ok("OK").targetEvent(ev))})})},window.onbeforeunload=function(){return L},a.$on("$locationChangeStart",function(b,c){if(!a.savedChanges){var d=confirm(n.general.confirmLeave);d||b.preventDefault()}}),a.$on("$destroy",function(){k.product=null,window.onbeforeunload=null})}]),angular.module("DealersApp").controller("EditProfileController",["$scope","$rootScope","$location","$mdDialog","$mdMedia","$mdToast","$routeParams","$timeout","Dealer","Photos","DealerPhotos",function(a,b,c,d,e,f,g,h,i,j,k){function l(){return q(),a.profile=$.extend(!0,{},b.dealer),a.profile&&a.profile.id?void n():void m()}function m(){i.getDealer(a.dealerID).then(function(b){a.profile=b.data,n()},function(b){a.status=B,console.log("The dealer information was absent and couldn't download it from the server.")})}function n(){a.status=A,a.bank_account=a.profile.bank_accounts[a.profile.bank_accounts.length-1],o(),p(),a.userMode==G&&(a.datepicker={opened:!1,options:{formatYear:"yyyy",maxDate:new Date,showWeeks:!1,initDate:new Date(a.profile.date_of_birth)}})}function o(){a.profile.role==a.roles.dealer&&(a.userMode=F)}function p(){if(b.userProfilePic)return a.photoURL=b.userProfilePic,void(a.croppedPhotoURL=b.userProfilePic);a.profilePicStatus=z,a.hasProfilePic=k.hasProfilePic(a.profile.photo);var c="dealer";a.hasProfilePic&&(k.getPhoto(a.profile.photo,a.profile.id,c),a.profilePicStatus=z),a.$on("downloaded-"+c+"-dealer-pic-"+a.profile.id,function(b,c){c.success?a.$apply(function(){a.croppedPhotoURL=c.data,a.profilePicStatus=A}):(a.profilePicStatus=B,console.log(c.message))})}function q(){a.$on(K+E,function(c,d){d.success?(a.profile.photo=b.dealer.photo,b.userProfilePic=a.croppedPhotoURL,y()):(t(c),console.log("Couldn't upload the dealer pic. Aborting upload process."))}),a.$on(L+E,function(b,d){d.success?(console.log("Dealer was updated successfully!"),window.onbeforeunload=null,a.editingDone=!0,t(),c.path("/dealers/"+a.dealerID)):(t(b),d.message.data&&d.message.data.account_number[0]?r("Account number duplicate","The account number you entered already exists. Please check your input again.",b):r("There was a problem...","We're sorry, please try again!",b))}),a.$watch("photoURL",function(){a.photoURL&&a.photoURL.length>0&&a.photoURL!=b.userProfilePic&&(a.changedPhoto=!0,a.showCropDialog())}),a.$watch("croppedPhotoURL",function(){a.croppedPhotoURL==H?a.editProfilePic=I:a.editProfilePic=J})}function r(a,b,c){d.show(d.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a).textContent(b).ariaLabel("Alert Dialog").ok("Got it").targetEvent(c))}function s(a){d.show({templateUrl:"app/components/views/loading-dialog.view.html",parent:angular.element(document.body),targetEvent:a,controller:"LoadingDialogController",locals:{message:D},escapeToClose:!1})}function t(a){d.hide()}function u(){a.photo="",a.photoURL=""}function v(b){return!!a.profile.full_name||(r("The name field is blank","This field is required.",b),!1)}function w(b){return a.profile.full_name?a.profile.about?!!a.profile.location||(r("Location field is blank","This field is required.",b),!1):(r("About field is blank","This field is required.",b),!1):(r("The name field is blank","This field is required.",b),!1)}function x(b){return a.bank_account.account_number?a.bank_account.branch_number?a.bank_account.bank?!!a.bank_account.account_holder||(r("Account holder name is blank","This field is required.",b),!1):(r("The bank field is blank","This field is required.",b),!1):(r("Branch number is blank","This field is required.",b),!1):(r("Account number is blank","This field is required.",b),!1)}function y(){a.userMode==G?i.updateViewer(a.profile,E):i.updateDealer(a.bank_account,a.profile,E)}var z="loading",A="downloaded",B="failed",C="The changes you made will be lost.",D="Saving changes...",E="eprSession",F="dealer_mode",G="viewer_mode",H="/assets/images/icons/@2x/Web_Icons_add_profile_pic_button.png",I="Add Photo",J="Change Photo",K="dealer-pic-uploaded-for-",L="update-as-dealer-for-";a.status=z,a.dealerID=g.dealerID,a.originalDealer={},a.newDealer={},a.bank_account={},a.changedPhoto=!1,a.savedChanges=!1,a.userMode=G,a.photo="",a.photoURL="",a.croppedPhotoURL="",a.editProfilePic=J,a.editingDone=!1,l(),a.showCropDialog=function(){var b=e("xs");d.show({controller:"CropPhotoDialog",templateUrl:"app/components/views/crop-photo-dialog.view.html",parent:angular.element(document.body),fullscreen:b,locals:{rawPhoto:a.photoURL}}).then(function(b){a.croppedPhotoURL=b,u()},function(){u()})},a.openDatepicker=function(b){a.datepicker.opened=!0},a.Date=function(a){return new Date(a)},a.submitEdit=function(b){if(a.userMode==G){if(!v())return}else{if(!w())return;if(!x())return}if(s(),a.changedPhoto){var c=j.dataURItoBlob(a.croppedPhotoURL);k.uploadPhoto(c,E)}else y()},window.onbeforeunload=function(){return C},a.$on("$locationChangeStart",function(b,c){if(!a.editingDone){var d=confirm("Are you sure you want to leave this page? The changes will be lost.");d||b.preventDefault()}}),a.$on("$destroy",function(){window.onbeforeunload=null})}]),angular.module("DealersApp").controller("HomeController",["$scope","$rootScope","$location","$mdDialog","$mdMedia","Translations",function(a,b,c,d,e,f){function g(){a.role==b.roles.guest&&(a.gridDescription=f.home.seeProducts)}var h="/dealers/",i="/all-products/",j="Dealer",k="Viewer";b.dealer?(a.role=b.dealer.role,a.role==k?c.path(i):a.role==j&&c.path(h+b.dealer.id+"/")):a.role=a.roles.guest,a.isHomePage=!0,a.gridTitle="",a.gridDescription="",a.customFullscreen=e("xs"),g(),b.$on("$translateChangeSuccess",function(){a.gridDescription=f.home.seeProducts})}]),angular.module("DealersApp").controller("LoadingDialogController",["$scope","message",function(a,b){a.message=b}]),angular.module("DealersApp").controller("NavbarController",["$scope","$rootScope","$location","$routeParams","$mdMedia","$mdMenu",function(a,b,c,d,e,f){function g(){a.dealer?a.dealer.role==a.roles.admin?a.mode=a.roles.dealer:a.mode=a.dealer.role:a.mode=a.roles.guest}function h(){a.$watch(function(){return e("xs")},function(b){a.phoneMode=b}),a.$watch(function(){return e("sm")},function(b){a.tabletMode=b})}a.dealer=b.dealer,a.searchTerm={},a.catDropdownDisplay=!1,a.mode="",a.phoneMode=!1,a.searchBarPresented=!1,a.customFullscreen=e("xs"),g(),h();var i=c.path().split("/")[1];"search"==i&&(a.searchTerm.text=d.query),a.toggleSearchBar=function(b){a.searchBarPresented=!a.searchBarPresented},a.toggleMenu=function(a,b,c){b?f.hide():a(c)},a.openMenu=function(a,b){a(b)},a.closeMenu=function(a){f.hide()},a.search=function(b){c.path("/search/products/"+a.searchTerm.text)},a.selectCategory=function(a){var d=b.categoriesLocal[a];c.path("/categories/"+d)}}]),angular.module("DealersApp").controller("ProductsGridController",["$scope","$rootScope","$routeParams","ActiveSession","Product","ProductsGrid","Translations",function(a,b,c,d,e,f,g){function h(){if(a.source){if(a.page==q){var b=d.getTempData(o),f=d.getTempData(p);if(m=c.dealerID,b==m&&f)return l="activeSession",n="There are no products.",a.status=s,void j(f)}l="custom",u=a.source,n=g.productsGrid.noProducts}else c.query?(l="search",m=c.query,u+="/dealsearch/?search="+m,n=g.productsGrid.didntFind+"'"+m+"'."):c.category?(l="category",m=c.category,"All Categories"==m||"All%20Categories"==m?(l="myFeed",u+="/my_feeds/"):u+="/category_deals/?category="+e.keyForCategory(m),n=g.productsGrid.currentlyNoProducts+m+"...",a.title=g.translateCategory(m)):(l="myFeed",u+="/my_feeds/",n=g.productsGrid.noProductsInterests);a.getProducts()}function i(b){b&&(u=b),e.getProducts(u).then(function(b){a.status=s;var c;b.data.results?c=b.data.results:b.data.uploaded_deals&&(c=b.data.uploaded_deals),a.update.nextPage=b.data.next,j(c),a.update.loadingMore=!1,a.page==q&&(d.setTempData(o,m),d.setTempData(p,c))},function(b){a.status=t,a.message="Couldn't download the products",a.errorPrompt="Please try again...",a.update.loadingMore=!1})}function j(b){k(b),b.length>0?a.products=f.addProductsToArray(a.products,b):a.message=n}function k(a){for(var b=0;b<a.length;b++){var c=a[b];c=e.mapData(c)}}var l,m,n,o="profile_dealer_id",p="profile_products",q="dealer",r="loading",s="downloaded",t="failed",u=b.baseUrl;a.products=[],a.message="",a.status=r,a.update={},a.update.loadingMore=!1,a.update.nextPage="",a.getProducts=i,h()}]),angular.module("DealersApp").controller("ProfileController",["$scope","$rootScope","$routeParams","$location","Product","Dealer","DealerPhotos",function(a,b,c,d,e,f,g){function h(b){return a.profile.dealer?(a.downloadDealerStatus=A,void a.setDealerProfile()):void f.getDealer(b).then(function(b){a.profile.dealer=b.data,a.downloadDealerStatus=A,a.setDealerProfile()},function(b){a.message="Couldn't download dealer's information",a.errorPrompt="Please try again..."})}function i(){l(),r(a.profile.dealer.rank),a.getUploadedProducts()}function j(b){b&&(v=b),v+="/uploadeddeals/"+a.profile.dealer.id+"/",e.getProducts(v).then(function(b){a.status=A;var c=b.data.uploaded_deals;k(c),c.length>0?(a.uploadedProducts.push.apply(a.uploadedProducts,c),a.update.nextPage=b.data.next):a.message=s,a.update.loadingMore=!1},function(b){a.status=B,a.message="Couldn't download the products",a.errorPrompt="Please try again...",a.update.loadingMore=!1})}function k(a){for(var b=0;b<a.length;b++){var c=a[b];c=e.mapData(c)}}function l(){a.hasProfilePic=g.hasProfilePic(a.profile.dealer.photo);var b="profile";a.hasProfilePic&&(a.profilePic="",g.getPhoto(a.profile.dealer.photo,a.profile.dealer.id,b),a.profilePicStatus=z),a.$on("downloaded-"+b+"-dealer-pic-"+a.profile.dealer.id,function(b,c){c.success?a.$apply(function(){a.profilePic=c.data,a.profilePicStatus=A}):console.log(c.message)})}function m(){a.settingsDisplay?a.settingsDisplay=!1:a.settingsDisplay=!0}function n(){f.logOut(),d.path("/")}function o(a){var b="active";$(a).addClass(b),$(a).siblings().removeClass(b)}function p(b){"myProducts"==b?q(a.displayModes.myProducts):"sales"==b?q(a.displayModes.purchases):"orders"==b&&q(a.displayModes.orders)}function q(b){a.displayMode=b;var c="/dealers/"+t;b==a.displayModes.purchases?c+="/"+a.displayModes.purchases.toLowerCase():b==a.displayModes.orders&&(c+="/"+a.displayModes.orders.toLowerCase()),d.path()!=c&&d.path(c)}function r(b){var c,d;"Viewer"==b?(c=C,d="viewerIcon"):"Dealer"==b?(c=D,d="dealerIcon"):"Pro Dealer"==b?(c=E,d="proDealerIcon"):"Senior Dealer"==b?(c=F,d="seniorDealerIcon"):"Master Dealer"==b&&(c=G,d="masterDealerIcon"),a.rankIcon=c,a.rankClass=d}var s,t=c.dealerID,u=b.baseUrl,v=b.baseUrl,w="guestMode",x="myProfile",y="otherProfile",z="loading",A="downloaded",B="failed",C="../../../../assets/images/icons/@2x/Web_Icons_viewer_icon.png",D="../../../../assets/images/icons/@2x/Web_Icons_dealer_icon.png",E="../../../../assets/images/icons/@2x/Web_Icons_pro_dealer_icon.png",F="../../../../assets/images/icons/@2x/Web_Icons_senior_dealer_icon.png",G="../../../../assets/images/icons/@2x/Web_Icons_master_dealer_icon.png";a.profile={dealer:null},a.uploadedProducts=[],a.profileMode="",a.displayModes={myProducts:"MY PRODUCTS",purchases:"SALES",orders:"ORDERS"},a.message="",a.status=z,a.downloadDealerStatus=z,a.settings=["Log Out"],a.settingsDisplay=!1,a.source=b.baseUrl+"/uploadeddeals/"+t+"/",a.page="profile",a.products=[],a.settingsToggle=m,a.logOut=n,a.update={},a.update.loadingMore=!1,a.update.nextPage="",a.getDealer=h,a.setDealerProfile=i,a.getUploadedProducts=j,a.changeDisplayPresentation=o,a.changeDisplayToTab=p,q(location.href.endsWith("/sales")?a.displayModes.purchases:location.href.endsWith("/orders")?a.displayModes.orders:a.displayModes.myProducts),b.dealer?parseInt(t)==b.dealer.id?(a.profileMode=x,a.profile.dealer=b.dealer,a.profile.dealer.role==b.roles.viewer&&q(a.displayModes.orders)):(a.profileMode=y,q(a.displayModes.myProducts)):a.profileMode=w,u+="/dealers/"+t,a.getDealer(t),a.openMenu=function(a,b){a(b)},a.editProfile=function(a){d.path("/edit-profile/"+t)}}]),angular.module("DealersApp").controller("PurchaseDetailsController",["$scope","$rootScope","$routeParams","$location","$mdDialog","$mdMedia","ActiveSession","Purchase","Product","Dealer","ShippingMethods","Translations",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){a.status=s,a.screenIsSmall=f("xs"),a.purchase=g.getTempData(u),a.isDealer=!1,a.purchase?(a.status=r,p()):n()}function n(){var b=c.purchaseID;h.getPurchase(b).then(function(b){a.status=r,a.purchase=b.data,p()},function(b){a.status=t,a.errorMessage="Couldn't download the purchase object.",a.errorPrompt="Please try again..."})}function o(){k.getDelivery(a.purchase.delivery).then(function(b){a.delivery=b.data,a.delivery=k.convertDeliveryFromServer(a.delivery),a.downloadedDelivery=!0},function(a){console.log("There was an error while downloading the delivery method: "+a.data)})}function p(){a.shipping_address=a.purchase.shipping_address,o(),a.purchase.buyer.id||j.getShortDealer(a.purchase.buyer).then(function(b){a.purchase.buyer=b.data},function(a){console.log("Couldn't download the buyer's name and photo.")});var c=a.purchase.dealer.id?a.purchase.dealer.id:a.purchase.dealer;a.isDealer=c==b.dealer.id;var d=a.purchase.currency;a.purchase.currency=i.currencyForKey(d),q(a.purchase.deal.id?a.purchase.deal.id:a.purchase.deal)}function q(b){i.getProduct(b).then(function(b){a.product=b.data,a.product=i.mapData(a.product)},function(b){a.status=t,a.errorMessage="Couldn't download the product",a.errorPrompt="Please try again..."})}var r="downloaded",s="downloading",t="failed",u="PURCHASE";a.downloadedDelivery=!1,m(),a.markButtonTitle=function(b){return b?a.isDealer?b.status==h.SENT_STATUS?l.purchaseDetails.sent:b.status==h.RECEIVED_STATUS?l.purchaseDetails.received:l.purchaseDetails.markSent:b.status==h.RECEIVED_STATUS?l.purchaseDetails.received:l.purchaseDetails.markReceived:""},a.parseForPresentation=function(a){return a.status==h.PURCHASED_STATUS?l.purchaseDetails.purchased:a.status==h.SENT_STATUS?l.purchaseDetails.sent:a.status==h.RECEIVED_STATUS?l.purchaseDetails.received:void 0},a.$on("$destroy",function(){g.removeTempData(u)})}]),angular.module("DealersApp").controller("RegisterAsDealerController",["$scope","$rootScope","$location","$mdDialog","$mdMedia","Dealer","DealerPhotos","Photos","Translations",function(a,b,c,d,e,f,g,h,i){function j(b){return a.croppedPhotoURL==t?(m(i.dealerRegistration.missingPhotoTitle,i.dealerRegistration.missingPhotoContent,b),!1):a.dealer.about?!!a.dealer.location||(m(i.dealerRegistration.blankLocationTitle,i.dealerRegistration.requiredField,b),!1):(m(i.dealerRegistration.blankAboutTitle,i.dealerRegistration.requiredField,b),!1)}function k(b){return a.bank_account.account_number?a.bank_account.branch_number?a.bank_account.bank?!!a.bank_account.account_holder||(m(i.dealerRegistration.blankAccountHolderTitle,i.dealerRegistration.requiredField,b),!1):(m(i.dealerRegistration.blankBankTitle,i.dealerRegistration.requiredField,b),!1):(m(i.dealerRegistration.blankBranchNumberTitle,i.dealerRegistration.requiredField,b),!1):(m(i.dealerRegistration.blankAccountNumberTitle,i.dealerRegistration.requiredField,b),!1)}function l(){a.$on(u+q,function(c,d){d.success?(b.userProfilePic=a.croppedPhotoURL,f.registerDealer(a.bank_account,q)):(o(c),console.log("Couldn't upload the dealer pic. Aborting upload process."))}),a.$on(v+q,function(b,d){d.success?(console.log("Dealer is registered successfully!"),window.onbeforeunload=null,a.registrationDone=!0,o(),c.path("/done-registration")):(o(b),d.message.data&&d.message.data.account_number[0]?m(i.dealerRegistration.accountNumberDuplicateTitle,i.dealerRegistration.accountNumberDuplicateContent,b):m(i.dealerRegistration.generalProblemTitle,i.dealerRegistration.generalProblemContent,b))}),a.$watch("photoURL",function(){a.photoURL&&a.photoURL.length>0&&a.showCropDialog()}),a.$watch("croppedPhotoURL",function(){a.croppedPhotoURL==t?a.editProfilePic=i.dealerRegistration.addPhoto:a.editProfilePic=i.dealerRegistration.changePhoto}),a.$watch(function(){return e("xs")})}function m(a,b,c){d.show(d.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a).textContent(b).ariaLabel("Alert Dialog").ok(i.general.gotIt).targetEvent(c))}function n(a){d.show({templateUrl:"app/components/views/loading-dialog.view.html",parent:angular.element(document.body),targetEvent:a,controller:"LoadingDialogController",locals:{message:i.dealerRegistration.uploading},escapeToClose:!1})}function o(a){d.hide()}function p(){a.photo="",a.photoURL=""}var q="register-as-dealer-session",r=0,s=1,t="/assets/images/icons/@2x/Web_Icons_add_profile_pic_button.png",u="dealer-pic-uploaded-for-",v="register-as-dealer-for-";a.photo="",a.photoURL="",a.croppedPhotoURL=t,a.registrationDone=!1,a.dealer=b.dealer,a.bank_account={},l(),a.onTabSelected=function(b){0==b?a.submitButtonTitle=i.dealerRegistration.next:a.submitButtonTitle=i.dealerRegistration.done},a.showCropDialog=function(){var b=e("xs");d.show({controller:"CropPhotoDialog",templateUrl:"app/components/views/crop-photo-dialog.view.html",parent:angular.element(document.body),fullscreen:b,locals:{rawPhoto:a.photoURL}}).then(function(b){a.croppedPhotoURL=b,p()},function(){
p()})},a.register=function(b){if(a.selectedTab==r)return void(a.selectedTab=s);if(j()&&k()){a.bank_account.dealer=a.dealer.id,n();var c=h.dataURItoBlob(a.croppedPhotoURL);g.uploadPhoto(c,q)}},window.onbeforeunload=function(){return i.dealerRegistration.contentWillBeLost},a.$on("$locationChangeStart",function(b,c){if(!a.registrationDone){var d=confirm(i.dealerRegistration.contentWillBeLostFullMessage);d||b.preventDefault()}}),b.$on("$translateChangeSuccess",function(){a.editProfilePic=i.dealerRegistration.addPhoto,a.submitButtonTitle=i.dealerRegistration.next}),a.$on("$destroy",function(){window.onbeforeunload=null})}]),angular.module("DealersApp").controller("SignInDialogController",["$scope","$rootScope","$mdDialog","Dealer","tab","isViewer","Translations",function(a,b,c,d,e,f,g){function h(b){a.selectedTab==k?a.buttonTitle=g.signIn.signUpButtonTitle:a.buttonTitle=g.signIn.logInButtonTitle,a.errorMessage=b,a.showError=!0}function i(){a.selectedTab==k?a.buttonTitle=g.signIn.signUpButtonTitle:a.buttonTitle=g.signIn.logInButtonTitle,a.errorMessage="",a.showError=!1}function j(){a.$on("sign-up",function(b,c){if(c.success)console.log("User has signed up successfully!"),a.selectedOperation=0;else{var d=c.message.data;h(d.detail?d.detail:d.user[0].username[0]?d.user[0].username[0]:d)}}),a.$on("log-in",function(b,c){if(c.success)console.log("User has logged in successfully!"),a.selectedOperation=1;else{var d=c.message.data.detail;h(d)}}),a.$on("credentials-set",function(b,c){c.success?(i(),a.enter(a.selectedOperation)):(console.log("Couldn't get token: "+String(c.message)),h(g.signIn.generalProblem))})}var k=0;a.selectedTab=e,a.selectedOperation=e,a.datepicker={opened:!1,options:{formatYear:"yyyy",maxDate:new Date,showWeeks:!1}},a.maxDate=new Date,a.logIn={},a.dealer={full_name:"",email:"",user:{username:"",password:""},date_of_birth:null,gender:"",register_date:null,role:"Viewer"},i(),j(),a.signUp=function(b){if(!b.$valid)return void h(g.signIn.invalidFields);a.showError=!1,a.buttonTitle=g.signIn.loading;var c=a.dealer,e=c.email;e>30?c.user.username=e.substring(0,30):c.user.username=e,c.gender||(c.gender="Unspecified"),c.bank_accounts=[],c.credit_cards=[],c.register_date=new Date,d.create(c)},a.logIn=function(b){return b.$valid?(a.showError=!1,a.buttonTitle=g.signIn.loading,void d.logIn(a.logIn.email,a.logIn.password)):void h(b.email.$viewValue&&""!==b.email.$viewValue?b.email.$invalid?g.signIn.invalidEmail:b.password.$viewValue&&""!==b.password.$viewValue?g.signIn.invalidFields:g.signIn.blankPassword:g.signIn.blankEmail)},a.submit=function(b,c,d){a.selectedTab==k?a.signUp(c):a.logIn(d)},a.onTabSelected=function(b){b==k?(a.buttonTitle=g.signIn.signUpButtonTitle,f?ga("send","pageview","/viewer-sign-up"):ga("send","pageview","/dealer-sign-up")):(a.buttonTitle=g.signIn.logInButtonTitle,ga("send","pageview","/log-in"))},a.openDatepicker=function(b){a.datepicker.opened=!0},a.enter=function(c){b.setUserProfilePic(),d.setIntercom(b.dealer),a.hide(c)},a.hide=function(a){c.hide(a)},a.cancel=function(){c.cancel()}}]),angular.module("DealersApp").controller("ViewDealController",["$scope","$rootScope","$http","$routeParams","$route","$location","$timeout","$mdDialog","$mdMedia","Product","ProductPhotos","DealerPhotos","ActiveSession","EditProduct","Dialogs","Checkout","Translations",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){var b=d.productID;j.getProduct(b).then(function(b){a.status="downloaded",a.product=b.data,a.product=j.mapData(a.product),m.shouldRunAction(E)&&C(),s()},function(b){a.status="failed",a.errorMessage=q.viewDeal.downloadFailed,a.errorPrompt="Please try again..."})}function s(){t(),x(),a.firstPhotoHeight=a.product.main_photo_height,a.variants=j.parseVariantsFromServer(a.product.variants),a.totalLikes=a.product.dealattribs.dealers_that_liked.length,a.user&&(a.product.comments.length>1?a.commentPlaceholder=q.viewDeal.addComment:a.commentPlaceholder=q.viewDeal.addFirstComment)}function t(){k.downloadPhotos(a.product);for(var c=0;c<k.photosNum(a.product);c++)a.productPhotosStatus.push("loading"),a.photosURLs.push(b.DEFAULT_PRODUCT_PHOTO_URL);a.$on("downloaded-photo-"+a.product.id,function(b,c){var d=c.data,e=d.photoIndex-1;c.success?(a.photosURLs[e]=d.url,a.productPhotosStatus[e]="doneLoading",a.firstPhotoSelected||(a.selectPhoto(0),a.firstPhotoSelected=!0),a.$apply()):(console.log("Photos number "+d.photoIndex+" failed to download: \n"+d.message),a.productPhotosStatus[e]="failed")})}function u(b){a.selectedIndex=b,a.changeThumbnailSelection(b),g(function(){$(".carousel-inner div").each(function(b){a.selectedIndex==b?$(this).addClass("active"):$(this).removeClass("active")})},100)}function v(a){var b=$("div.carousel-inner"),c=b.children();return $(c[a]).hasClass("active")}function w(a){$("div.ap-thumbnail").removeClass("selected"),$("li#"+a+" div.ap-thumbnail").addClass("selected")}function x(){var b=a.product.dealer.photo,c="view-deal";a.hasProfilePic=l.hasProfilePic(b),a.hasProfilePic&&(a.profilePic="",l.getPhoto(b,a.product.dealer.id,c),a.profilePicStatus="loading"),a.$on("downloaded-"+c+"-dealer-pic-"+a.product.dealer.id,function(b,c){c.success?(a.profilePic=c.data,a.profilePicStatus="doneLoading"):(console.log(c.message),a.profilePicStatus="failed")})}function y(d){if(d.$valid){var e=a.comment;e.upload_date=new Date,e.product=a.product.id,e.dealer=b.dealer.id,e.type="Deal",a.showCommentError=!1,c.post(b.baseUrl+"/addcomments/",e).then(function(c){console.log("Comment uploaded successfully!"),e=c.data,e.dealer=b.dealer,a.product.comments.push(e),a.comment={}},function(b){console.log(b.status+" : "+b.data),a.showCommmentError=!0,a.presentCommentError("There was an error, please try again")})}else a.presentCommentError()}function z(b){b?a.commentErrorMessage=b:a.commentErrorMessage="There was an error, please try again",a.showCommentError=!0}function A(a,b,c){h.show(h.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a).textContent(b).ariaLabel("Alert Dialog").ok(q.general.gotIt).targetEvent(c))}function B(){if(!b.dealer)return o.showSignInDialog(event,0,!0).then(function(a){m.addActionToRun(E),e.reload()}),!1;if(!(a.purchase.quantity>0))return A("",q.viewDeal.validQuantity),!1;if(a.purchase.quantity>a.product.max_quantity)return A("",q.viewDeal.maxQuantity+a.product.max_quantity+"."),!1;if(a.purchase.quantity=Math.round(a.purchase.quantity),0==a.product.inventory)return o.showAlertDialog(q.viewDeal.outOfStockTitle,q.viewDeal.outOfStockContent),!1;if(a.product.inventory<a.purchase.quantity)return o.showAlertDialog(q.viewDeal.notEnoughStockTitle,q.viewDeal.notEnoughStockContent1+a.product.inventory+q.viewDeal.notEnoughStockContent2),!1;for(var c in a.variants)if(a.variants.hasOwnProperty(c)){var d=a.variants[c];if(!d.selection)return A("",q.viewDeal.pleaseSelect+d.name.toLowerCase()+"."),!1;a.purchase.selections.push({name:d.name,selection:d.selection})}return!0}function C(){if(B()){a.product.photo=a.photosURLs?a.photosURLs[0]:null,m.setTempData(F,a.product),p.purchase=a.purchase,a.movedToCheckout=!0;var b="/products/"+a.product.id+"/checkout";f.path(b)}}var D=b.baseUrl+"/alldeals/"+d.productID+"/",E=(b.baseUrl+"/products/","buyClicked"),F="PRODUCT";a.product={},a.status="loading",a.productPhotosStatus=[],a.photosURLs=[],a.profilePicStatus="loading",a.hasProfilePic=!1,a.variants=[],a.purchase={selections:[],quantity:1},a.user=b.dealer,a.totalLikes=0,a.firstPhotoSelected=!1,a.movedToCheckout=!1,a.commentPlaceholder="",a.comment={},a.showCommentError=!1,a.commentErrorMessage=q.viewDeal.blankComment,a.showCommentButton=!1,a.selectPhoto=u,a.changeThumbnailSelection=w,a.checkIfActive=v,a.addComment=y,a.presentCommentError=z,a.proceedToCheckout=C,a.showAlertDialog=A,a.$watch(function(){return i("gt-sm")},function(b){a.bigScreen=b}),a.product=m.getTempData(F),!a.product||n.isAfterEdit?(r(),n.isAfterEdit=!1):a.product.id!=d.productID?r():(a.status="downloaded",m.shouldRunAction(E)&&C(),s()),a.nextPhoto=function(b){var c;c="A"==b.target.tagName?b.target:b.target.parentElement;var d,e=a.photosURLs.length;a.checkIfActive(a.selectedIndex)&&($(c).hasClass("left")?(d=a.selectedIndex-1,d<0&&(d=e-1)):$(c).hasClass("right")&&(d=a.selectedIndex+1,d>=e&&(d=0)),a.selectPhoto(d))},a.$watchGroup(["photos[0]","photos[1]","photos[2]","photos[3]"],function(b,c){for(var d=0;d<b.length;d++)null!=b[d]&&null==c[d]&&a.selectPhoto(d)}),a.canEdit=function(){return!(!a.user||a.product.dealer.id!=b.dealer.id)},a.editProduct=function(){a.canEdit()&&(n.product=a.product,f.path("edit-product/"+a.product.id))},a.openMenu=function(a,b){a(b)},a.report=function(a){console.log("Report!")},a.deleteProduct=function(a){var c=h.confirm().title(q.viewDeal.deleteProductTitle).textContent(q.viewDeal.deleteProductContent).ariaLabel(q.viewDeal.deleteProductTitle).targetEvent(a).ok(q.viewDeal.deleteProductConfirm).cancel(q.general.cancel);h.show(c).then(function(){j.deleteProduct(D).then(function(a){console.log("Product deleted successfully."),g(b.showToast,1e3,!0,"Deleted the product."),f.path("/home")},function(a){console.log(a.status+" : "+a.data),h.show(h.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title("Couldn't delete the product").textContent("Please try again!").ariaLabel("Alert Dialog").ok("OK").targetEvent(ev))})})},a.$on("$destroy",function(){a.movedToCheckout||m.removeTempData(F)})}]),angular.module("DealersApp").directive("intro",function(){return{restrict:"E",templateUrl:"app/components/views/about/intro-section.view.html",link:function(a,b){var c=$("nav.navbar"),d="navbar-shade";a.isHomePage&&a.role==a.roles.guest&&(c.removeClass(d),$(window).scroll(function(){var a=$(window).scrollTop();a>=30?c.addClass(d):c.removeClass(d)})),a.$on("$destroy",function(){$(window).off("scroll")})}}}).directive("sellWithDealers",function(){return{restrict:"E",templateUrl:"app/components/views/about/sell-with-dealers.view.html"}}).directive("findOutMore",function(){return{templateUrl:"app/components/signed-out/shared/find-out-more.view.html",link:function(a,b){b.bind("click",function(a){var c=b.find("a");$("html, body").stop().animate({scrollTop:$(c.attr("href")).offset().top},1250,"easeInOutExpo"),a.preventDefault()})}}}).directive("aboutSection",function(){return{restrict:"E",templateUrl:"app/components/views/about/about-section.view.html"}}).directive("iosSection",function(){return{restrict:"E",templateUrl:"app/components/signed-out/shared/ios-section.view.html"}}).directive("footerSection",function(){return{restrict:"E",templateUrl:"app/components/views/about/footer-section.view.html"}}).directive("menuFooter",function(){return{restrict:"E",templateUrl:"app/components/views/about/menu-footer.view.html"}}),angular.module("DealersApp").directive("dlNavbar",["$location","$routeParams","$rootScope","Dealer",function(a,b,c,d){return{restrict:"E",templateUrl:"app/components/views/navbar.view.html",controller:"NavbarController",link:function(a,b){}}}]).directive("dlCategory",function(){return{restrict:"E",replace:!0,scope:{category:"="},template:'<a href="/categories/{{category}}"><li>{{category}}</li></a>'}}).directive("vdInfoPane",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/views/view-deal-info-pane.view.html"}}).directive("minimizable",["$timeout",function(a){return{restrict:"E",scope:{text:"=",maxHeight:"="},templateUrl:"app/components/views/minimizable.view.html",link:function(b,c){var d=$(c).find(".mini-container");d.css("opacity",0),b.present=!1,b.needMinimize=!1,b.$watch("text",function(){a(function(){b.text&&b.text.length>0&&(d.height()>b.maxHeight+40&&b.activateMinimization(),d.css("opacity",1))},100)}),b.activateMinimization=function(){b.needMinimize=!0,d.css("max-height",b.maxHeight),d.addClass("animate-height")},b.toggle=function(a){b.present?(d.css("max-height",b.maxHeight),b.present=!1):(d.css("max-height","2000px"),b.present=!0)}}}}]).directive("securePayment",function(){return{restrict:"E",templateUrl:"app/components/views/secure-payment.view.html"}}).directive("dlComment",["DealerPhotos",function(a){return{restrict:"E",replace:!0,scope:{comment:"="},templateUrl:"app/components/views/comment.view.html",link:function(b,c){b.hasProfilePic=a.hasProfilePic(b.comment.dealer.photo);var d="comment";b.hasProfilePic&&(b.commenterPhoto="",a.getPhoto(b.comment.dealer.photo,b.comment.dealer.id,d),b.profilePicStatus="loading"),b.$on("downloaded-"+d+"-dealer-pic-"+b.comment.dealer.id,function(a,c){c.success?(b.commenterPhoto=c.data,b.profilePicStatus="doneLoading",b.$apply()):console.log(c.message)})}}}]);var MAX_PHOTOS=4;angular.module("DealersApp").directive("tabList",function(){return{link:function(a,b){b.children()[0];a.tabSelect=function(c){a.changeDisplayPresentation(b),a.changeDisplayToTab(c)}}}}).directive("carouselItem",function(){return{replace:!0,scope:{photo:"=photoUrl"},templateUrl:"app/components/views/carousel-item.view.html"}}).directive("photoInput",function(){return{scope:{photo:"=",photoURL:"=photoUrl"},link:function(a,b,c){b.bind("change",function(b){var c=b.target.files[0];null!=c&&(a.photo=c,a.photoURL=URL.createObjectURL(c),a.$apply())})}}}).directive("photosInput",function(){return{scope:{photos:"=",photosURLs:"=photosUrls",showAlertDialog:"&"},link:function(a,b,c){b.bind("change",function(b){var c=b.target.files[0];if(!(null==c||a.photos.length>=MAX_PHOTOS)){if($.inArray(c,a.photos)!=-1)return void a.showAlertDialog("Duplicate Photo","This photo was already uploaded.");a.photos.push(c);var d=URL.createObjectURL(c);a.photosURLs.push(d),a.$apply()}})}}}).directive("fileDropzone",function(){return{restrict:"A",scope:{photos:"=",photosURLs:"=photosUrls",showAlertDialog:"&"},link:function(a,b,c){var d,e,f,g;return f=function(a){return null!=a&&(a=a.originalEvent,a.preventDefault()),a.dataTransfer.effectAllowed="copy",!1},g=c.fileDropzone,d=function(a){var b;return void 0===(b=c.maxFileSize)||""===b||a/1024/1024<c.maxFileSize||(alert("File must be smaller than "+c.maxFileSize+" MB"),!1)},e=function(a){return void 0===g||""===g||g.indexOf(a)>-1||(alert("Invalid file type.  File must be one of following types "+g),!1)},b.bind("dragover",f),b.bind("dragenter",f),b.bind("drop",function(b){var c;if(null!=b&&(b=b.originalEvent,b.preventDefault()),c=b.dataTransfer.files[0],null==c||!d(c.size)||!e(c.type))return!1;a.photos.length<MAX_PHOTOS&&($.inArray(c,a.photos)==-1?a.photos.push(c):a.showAlertDialog());var f=URL.createObjectURL(c);return a.photosURLs.push(f),a.$apply(),!1})}}}).directive("googleLocationAutocomplete",[function(){return{scope:{location:"="},link:function(a,b){var c=b[0];c=new google.maps.places.Autocomplete(b[0],{types:["geocode"]}),c.addListener("place_changed",function(){var b=c.getPlace();b&&(a.location=b.formatted_address)}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(a){var b={lat:a.coords.latitude,lng:a.coords.longitude},d=new google.maps.Circle({center:b,radius:a.coords.accuracy});c.setBounds(d.getBounds())})}}}]),angular.module("DealersApp").directive("shippingMethods",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/views/products/shipping-methods.view.html",link:function(a,b){}}}).directive("inventoryEdit",function(){return{restrict:"E",replace:!0,templateUrl:"app/components/views/products/inventory-edit.view.html",link:function(a,b){}}}),angular.module("DealersApp").directive("productPrice",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(a=parseFloat(a))return a=Math.round(100*a)/100}),d.$formatters.push(function(a){if(a=parseFloat(a))return a=Math.round(100*a)/100})}}}).directive("productPercentageOff",function(){return{require:"ngModel",link:function(a,b,c,d){d.$parsers.push(function(a){if(a=parseFloat(a))return a>100||a<0?(d.$setValidity("is_valid",!1),null):0==a?(d.$setValidity("is_valid",void 0),null):(d.$setValidity("is_valid",!0),a)}),d.$formatters.push(function(a){if(a=parseFloat(a))return a>100||a<0?null:(d.$setValidity("is_valid",!0),a)})}}}).directive("dlProductsGrid",function(){return{restrict:"E",replace:!0,scope:{source:"=",page:"=",title:"=",description:"="},templateUrl:"app/components/views/products/products-grid.view.html",controller:"ProductsGridController"}}).directive("dlProduct",["$rootScope","$location","ActiveSession","Product","ProductPhotos","DealerPhotos",function(a,b,c,d,e,f){return{restrict:"E",replace:!0,scope:{product:"="},templateUrl:"app/components/views/products/product-cell.view.html",link:function(a,d){var g=.678125,h="loading",i="downloaded",j=a.product;a.hasPhoto=j.photo1.length>2,a.dealerProfile=function(a){b.path("dealers/"+j.dealer.id)};var k=g;j.main_photo_width&&j.main_photo_height&&(k=j.main_photo_height/j.main_photo_width);var l=$(d).find(".md-card-image-container");if(a.hasPhoto){var m=d.width(),n=k*m,o=String(n)+"px";l.css("height",o),j.main_photo?(a.productImage=j.main_photo,a.productImageStatus=i,l.removeAttr("style")):(e.downloadPhoto(j.photo1,j.id),a.productImageStatus=h)}else a.imageBackgroundColor=e.colorForNum(j.photo1);a.$on("downloaded-photo-"+j.id,function(b,c){c.success?(a.productImage=c.data.url,j.main_photo=a.productImage,a.productImageStatus=i,l.removeAttr("style"),a.$apply()):console.log(c.data.message)}),a.hasProfilePic=f.hasProfilePic(a.product.dealer.photo);var p="products-grid";a.hasProfilePic?j.dealer.profilePic?(a.profilePic=j.dealer.profilePic,a.profilePicStatus=i):(a.profilePic="",f.getPhoto(a.product.dealer.photo,a.product.dealer.id,p),a.profilePicStatus=h):a.profilePic=f,a.$on("downloaded-"+p+"-dealer-pic-"+a.product.dealer.id,function(b,c){c.success?(a.profilePic=c.data,j.dealer.profilePic=a.profilePic,a.profilePicStatus=i,a.$apply()):console.log(c.message)}),a.discountTypePP="123"===j.discount_type,a.hasLikes=j.dealattribs.dealers_that_liked.length>0,a.viewDeal=function(a){c.setTempData("PRODUCT",a),b.path("/products/"+String(a.id))}}}}]),angular.module("DealersApp").directive("updateStatusBuyer",["$mdDialog","Purchase","Dialogs","Product","Translations",function(a,b,c,d,e){return{link:function(f){function g(a,c){var d=$.extend(!0,{},c);b.updatePurchase(a,c).then(function(a){f.purchase=a.data,h(d)},function(a){console.log("Couldn't update the status of the purchase :(")})}function h(a){f.purchase.currency=d.currencyForKey(f.purchase.currency),a.deal.id&&(f.purchase.deal=a.deal),a.buyer.id&&(f.purchase.buyer=a.buyer),a.dealer.id&&(f.purchase.dealer=a.dealer)}f.changeBuyerStatus=function(d,f){var h;f.status==b.SENT_STATUS||f.status==b.PURCHASED_STATUS?(h=c.confirmDialog(e.purchaseDetails.markReceivedConfirmTitle,e.purchaseDetails.markReceivedConfirmContent,e.general.approve,d),a.show(h).then(function(){g(b.RECEIVED_STATUS,f)})):f.status==b.RECEIVED_STATUS&&(h=c.confirmDialog(e.purchaseDetails.markReceivedCancelTitle,e.purchaseDetails.markReceivedCancelContent,e.purchaseDetails.markReceivedCancelApprove,d),a.show(h).then(function(){g(b.SENT_STATUS,f)}))}}}}]).directive("updateStatusDealer",["$mdDialog","Purchase","Dialogs","Product","Translations",function(a,b,c,d,e){return{link:function(f){function g(b){a.show(a.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(e.purchaseDetails.blankETDTitle).textContent(e.purchaseDetails.blankETDContent).ariaLabel("Alert Dialog").ok(e.general.gotIt).targetEvent(b))}function h(b,c,d,f,g){return a.prompt().title(b).textContent(c).placeholder(d).ariaLabel("Estimated Delivery Time").targetEvent(g).ok(f).cancel(e.general.cancel)}function i(a,c){var d=$.extend(!0,{},c);b.updatePurchase(a,c).then(function(a){f.purchase=a.data,j(d)},function(a){console.log("Couldn't update the status of the purchase :(")})}function j(a){f.purchase.currency=d.currencyForKey(f.purchase.currency),a.deal.id&&(f.purchase.deal=a.deal),a.buyer.id&&(f.purchase.buyer=a.buyer),a.dealer.id&&(f.purchase.dealer=a.dealer)}f.changeDealerStatus=function(d,f){var j;f.status==b.PURCHASED_STATUS?(j=h(e.purchaseDetails.markSentConfirmTitle,e.purchaseDetails.markSentConfirmContent,e.purchaseDetails.markSentConfirmPlaceholder,e.general.ok,d),a.show(j).then(function(a){if(a&&a.length>0){var c=parseInt(a,10);if(c>0)return f.estimated_delivery_time=c,void i(b.SENT_STATUS,f)}g(d)})):f.status==b.SENT_STATUS&&(j=c.confirmDialog(e.purchaseDetails.markSentCancelTitle,e.purchaseDetails.markSentCancelContent,e.purchaseDetails.markSentCancelApprove,d),a.show(j).then(function(){i(b.PURCHASED_STATUS,f)}))}}}}]).directive("ordersList",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"app/components/views/purchases/orders-list.view.html",controller:["$scope","$rootScope","$location","$mdDialog","ActiveSession","Purchase","Product","Translations",function(a,b,c,d,e,f,g,h){function i(){f.getOrders(b.dealer.id).then(function(b){a.purchases=b.data.buyer_purchases,a.purchases=g.convertKeysToCurrencies(a.purchases),a.loadingStatus=k},function(a){console.log("Couldn't download the orders of this user :(")})}var j="loading",k="downloaded";a.loadingStatus=j,i(),a.markButtonTitle=function(a){return a.status==f.RECEIVED_STATUS?h.purchaseDetails.received:h.purchaseDetails.markReceived},a.parseForPresentation=function(a){return a.status==f.PURCHASED_STATUS?h.purchaseDetails.purchased:a.status==f.SENT_STATUS?h.purchaseDetails.sent:a.status==f.RECEIVED_STATUS?h.purchaseDetails.received:void 0},a.purchaseDetails=function(a,b){e.setTempData("PURCHASE",a),c.path("/purchase/"+a.id)}}]}}).directive("salesList",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"app/components/views/purchases/sales-list.view.html",controller:["$scope","$rootScope","$location","$mdDialog","ActiveSession","Purchase","Product","Translations",function(a,b,c,d,e,f,g,h){function i(){f.getSales(b.dealer.id).then(function(b){a.purchases=b.data.dealer_purchases,a.purchases=g.convertKeysToCurrencies(a.purchases),a.loadingStatus=k},function(b){console.log("Couldn't download the orders of this user :("),a.loadingStatus=k})}var j="loading",k="downloaded";a.loadingStatus=j,i(),a.markButtonTitle=function(a){return a.status==f.SENT_STATUS?h.purchaseDetails.sent:a.status==f.RECEIVED_STATUS?h.purchaseDetails.received:h.purchaseDetails.markSent},a.parseForPresentation=function(a){return a.status==f.PURCHASED_STATUS?h.purchaseDetails.purchased:a.status==f.SENT_STATUS?h.purchaseDetails.sent:a.status==f.RECEIVED_STATUS?h.purchaseDetails.received:void 0},a.purchaseDetails=function(a,b){e.setTempData("PURCHASE",a),c.path("/purchase/"+a.id)}}]}}).directive("totalPriceCalculator",function(){return{restrict:"E",replace:!0,scope:{present:"=",purchase:"=",delivery:"="},templateUrl:"app/components/views/purchases/total-price-calculator.view.html",link:function(a){a.price=a.purchase.amount/100,a.$watch("present",function(){a.present&&(a.shipping_price=a.delivery.shipping_price)})}}}),angular.module("DealersApp").directive("dl-sign-in-dialog",function(){return{restrict:"E",templateUrl:"app/components/views/sign-in/sign-in-dialog.view.html",controller:"SignInController"}}),angular.module("DealersApp").directive("likeButton",["$rootScope","$http","$route","Product","Dialogs","ActiveSession","Analytics","$translate",function(a,b,c,d,e,f,g,h){return{link:function(d,i){function j(){var a=$.inArray(p,o);return a!=-1}function k(){j()?(d.likeStatus="LIKED",d.likeTitle=h.instant("general.liked"),$(i).css("color","#9C27B0").find("span").replaceWith("<span>"+d.likeTitle+"<span>")):(d.likeStatus="LIKE",d.likeTitle=h.instant("general.like"),$(i).css("color","#313140").find("span").replaceWith("<span>"+d.likeTitle+"<span>"))}function l(){j()?d.likeTitle=h.instant("general.liked"):d.likeTitle=h.instant("general.like")}function m(h){if(!p)return void e.showSignInDialog(h,0,!0).then(function(a){f.addActionToRun(n),c.reload()});if(j()){var i=o.indexOf(p);i>-1&&o.splice(i,1)}else g.trackEvent("Product","like",String(d.product.id)),o.push(p);b.patch(a.baseUrl+"/dealattribs/"+d.product.dealattribs.id+"/",d.product.dealattribs).then(function(a){d.product.dealattribs=a.data,k()},function(a){console.log(a.status+" : "+a.data)})}var n="likeClicked";if(l(),!d.product)return void console.log("There's a problem - the parent scope doesn't have a product attribute.");var o=d.product.dealattribs.dealers_that_liked;if(a.dealer){var p=a.dealer.id;k()}d.likeClicked=m,f.shouldRunAction(n)&&d.likeClicked(),a.$on("$translateChangeSuccess",function(){l()})}}}]).directive("shareButton",["$rootScope","Analytics",function(a,b){return{link:function(c,d){$(d).on("click",function(d){b.trackEvent("Product","share",String(c.product.id));var e=a.homeUrl+"/products/"+c.product.id;FB.ui({method:"share",mobile_iframe:!0,href:e},function(a){})})}}}]).directive("registerAsDealer",["$rootScope","$location","$mdMedia","$mdDialog",function(a,b,c,d){return{link:function(e,f){e.customFullscreen=c("xs"),e.showSignInDialog=function(a,c){d.show({controller:"SignInDialogController",templateUrl:"app/components/views/sign-in/sign-in-dealer-dialog.view.html",parent:angular.element(document.body),targetEvent:a,fullscreen:e.customFullscreen,locals:{tab:c,isViewer:!1}}).then(function(a){0==a?b.path("/register"):1==a?b.path("/home"):console.error("Received something wrong to the callback of showSignInDialog")})},$(f).on("click",function(c){a.dealer?(b.path("/register"),e.$apply()):$(f).is("#nav-login")?e.showSignInDialog(c,1,!1):e.showSignInDialog(c,0,!0)})}}}]).directive("loadingSpinner",function(){return{restrict:"E",scope:{size:"@"},template:"<div class='spinnerContainer'></div>",link:function(a,b){var c=b[0].children[0],d=.25;"small"===a.size&&(d=.16);var e={lines:13,length:28,width:14,radius:42,scale:d,corners:1,color:"rgb(100,100,115)",opacity:.25,rotate:0,direction:1,speed:1.2,trail:60,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};new Spinner(e).spin(c)}}}).directive("ngTranslateLanguageSelect",["LocalesService",function(a){"use strict";return{restrict:"A",controller:["$scope",function(b){b.currentLocaleDisplayName=a.getLocaleDisplayName(),b.localesDisplayNames=a.getLocalesDisplayNames(),b.visible=b.localesDisplayNames&&b.localesDisplayNames.length>1,b.changeLanguage=function(b){a.setLocaleByDisplayName(b)},b.getFlag=function(b){return a.getFlag(b)}}]}}]).directive("scrollDetector",["Product",function(a){return{link:function(a,b){$(window).scroll(function(){$(window).scrollTop()+$(window).height()>$(document).height()-700&&(a.update.loadingMore||a.update.nextPage&&(a.update.loadingMore=!0,a.$apply(),a.getProducts(a.update.nextPage)))}),a.$on("$destroy",function(){$(window).off("scroll")})}}}]),angular.module("DealersApp").factory("ActiveSession",["$http","$rootScope","$cookies",function(a,b,c){function d(a){i.actionsToRun.push(a)}function e(a){if($.inArray(a,i.actionsToRun)!=-1){var b=i.actionsToRun.indexOf(a);return i.actionsToRun.splice(b,1),!0}return!1}function f(a){return j[a]}function g(a,b){j[a]=b}function h(a){j.hasOwnProperty(a)&&delete j.key}var i={};i.actionsToRun=[];var j={};return i.getTempData=f,i.setTempData=g,i.removeTempData=h,i.addActionToRun=d,i.shouldRunAction=e,i}]),angular.module("DealersApp").factory("AddProduct",["$http","$rootScope","Product","ProductPhotos",function(a,b,c,d){function e(){return q.product}function f(a){q.product=a}function g(a,b){if(a){var d=$.extend({},a);d=c.removePhotoPaths(d),d=c.extractData(d),"string"==typeof d.price&&(d.price=parseFloat(d.price));try{localStorage.setItem(m,JSON.stringify(d))}catch(a){console.log("Couldn't save product's data: "+a)}}else console.log("No product to save to the local storage.")}function h(){var a=localStorage.getItem(m);if(a){if(q.product=JSON.parse(a),q.product.category&&2==q.product.category.length&&(q.product.category=c.categoryForKey(q.product.category)),q.product.expiration){var b=Date.parse(q.product.expiration);q.product.expiration=new Date(b)}return!0}return!1}function i(){q.product={},q.savedPhotosURLs=[],localStorage.removeItem(m),localStorage.removeItem(n)}function j(a){q.product=a,g(a),k()}function k(){q.product.dealer=b.dealer.id,q.product.currency=c.keyForCurrency(q.product.currency),q.product.discount_value&&q.product.discount_value>0?q.product.discount_type=c.keyForDiscountType(q.product.discount_type):(q.product.discount_value=null,q.product.discount_type=null),q.product.category=c.keyForCategory(q.product.category),q.product.upload_date=new Date,q.product.store={},q.product.dealattribs={};var a=new Image;a.onload=function(){q.product.main_photo_width=this.width,q.product.main_photo_height=this.height,l()},a.src=URL.createObjectURL(q.product.photos[0])}function l(){var d=c.extractData(q.product);a.post(b.baseUrl+o,d).then(function(a){console.log("Product uploaded successfully!"),f(a.data),b.$broadcast(p,{success:!0,message:null,product:a.data})},function(a){console.log("There was an error while uploading the product: "+a.data),b.$broadcast(p,{success:!1,message:a.data})})}var m="apSession",n="apSessionPhotos",o="/adddeals/",p="ap-upload-finished",q={};return q.product={},q.savedPhotosURLs=[],q.getProduct=e,q.setProduct=f,q.saveSession=g,q.checkForSavedSessions=h,q.clearSession=i,q.uploadProduct=j,q}]),angular.module("DealersApp").factory("Authentication",["$http","$rootScope","$cookies",function(a,b,c){function d(a,b){var c=h(a+":"+b);return"Basic "+c}function e(c,d){return a.post(b.baseUrl+"/dealers-token-auth/",{username:c,password:d})}function f(d,e){b.globals={currentUser:{username:d,token:e}},a.defaults.headers.common.Authorization="Token "+e,c.putObject("globals",b.globals)}function g(){b.globals={},a.defaults.headers.common.Authorization=null,c.remove("globals")}function h(a){var b,c,d,e,f,g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",i="",j="",k=0;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),i=a.charCodeAt(k++),d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|i>>6,j=63&i,isNaN(c)?f=j=64:isNaN(i)&&(j=64),h=h+g.charAt(d)+g.charAt(e)+g.charAt(f)+g.charAt(j),b=c=i="",d=e=f=j="";while(k<a.length);return h}var i={};return i.getCredentials=d,i.getToken=e,i.saveCredentials=f,i.clearCredentials=g,i}]),angular.module("DealersApp").factory("Checkout",["$http","$rootScope","Product","ProductPhotos",function(a,b,c,d){function e(a){if(a){i.purchase=a;try{localStorage.setItem(h,JSON.stringify(a))}catch(a){console.log("Couldn't save product's data: "+a)}}else console.log("No product to save to the local storage.")}function f(){var a=localStorage.getItem(h);return a?(i.purchase=JSON.parse(a),i.purchase):null}function g(){i.product={},localStorage.removeItem(h)}var h="coSession",i={};return i.product={},i.purchase={},i.saveSession=e,i.retrieveSavedSession=f,i.clearSession=g,i}]),angular.module("DealersApp").factory("Comment",["$http","$rootScope","Authentication",function(a,b,c){function d(c){if(c)return a.get(b.baseUrl+"/alldeals/"+String(dealID)+"/")}var e={};return e.postComment=d,e.getProducts=getProducts,e.mapData=mapData,e}]),angular.module("DealersApp").factory("DealerPhotos",["$rootScope",function(a){function b(a){return a.length>2&&"None"!=a}function c(b,c,d){a.s3.getObject({Bucket:a.AWSS3Bucket,Key:b,ResponseContentType:"image/jpg"},function(b,e){var f;if(null!=b)f="Failed to download dealer's dealer pic"+c+":"+b.message,a.$broadcast("downloaded-"+d+"-dealer-pic-"+c,{success:!1,message:f});else{f="Downloaded dealer's dealer pic successfully!";var g=new Blob([e.Body],{type:"image/png"}),h=URL.createObjectURL(g);a.$broadcast("downloaded-"+d+"-dealer-pic-"+c,{success:!0,data:h})}})}function d(b,c){var d=e(),h={Bucket:a.AWSS3Bucket,Key:f+d,Body:b};a.s3.putObject(h,function(b,e){b?(console.log("There was an error with s3 config: "+b.message),a.$broadcast(g+c,{success:!1,data:b.message})):(console.log("Profile pic upload complete."),a.dealer.photo=f+d,a.$broadcast(g+c,{success:!0,data:e}))})}function e(){var b=String(a.dealer.id),c=new Date,d=String(c.getTime()/1e3);return b+"_"+d+"_dealer.png"}var f="media/Profile_Photos/",g="dealer-pic-uploaded-for-",h={};return h.DEFAULT_PROFILE_PIC="assets/images/icons/@2x/default_profile_pic.png",
h.hasProfilePic=b,h.getPhoto=c,h.uploadPhoto=d,h}]),angular.module("DealersApp").factory("Dealer",["$http","$rootScope","Authentication",function(a,b,c){function d(b){var d=b.user.password,e=c.getCredentials(t,u);a.post(x,b,{headers:{Authorization:e}}).then(function(a){var b=a.data;y.saveCurrent(b),y.setCredentials(b.user.username,d),y.broadcastResult("sign-up",!0,b)},function(a){y.broadcastResult("sign-up",!1,a)})}function e(d,e){var f=c.getCredentials(d,e);a.get(b.baseUrl+"/dealerlogins/",{headers:{Authorization:f}}).then(function(a){var b=a.data.results[0];y.saveCurrent(b),y.setCredentials(d,e),y.broadcastResult("log-in",!0,b)},function(a){y.broadcastResult("log-in",!1,a)})}function f(){c.clearCredentials(),localStorage.clear(),r(),b.dealer=null}function g(a){a&&(localStorage.setItem("dealer",JSON.stringify(a)),b.dealer=a)}function h(a){a&&k(a).then(function(a){var b=a.data;g(b)},function(a){console.log("Couldn't update the user:"+a)})}function i(a,b){c.getToken(a,b).then(function(b){console.log("Set credentials successfully! Get in!"),c.saveCredentials(a,b.data.token),y.broadcastResult("credentials-set",!0)},function(a){console.log("Couldn't get token:"+a),y.broadcastResult("credentials-set",!1)})}function j(a,c,d){b.$broadcast(a,{success:c,message:d})}function k(b){return a.get(x+b+"/")}function l(c){return a.get(b.baseUrl+"/dealershorts/"+c+"/")}function m(c,d){a.post(b.baseUrl+"/bank_accounts/",c).then(function(c){b.dealer.role=b.roles.dealer;var e=p(b.dealer);a.patch(x+e.id+"/",e,{params:{mode:"new"}}).then(function(a){var b=a.data;y.saveCurrent(b),j(v+d,!0,b)},function(a){j(v+d,!1,a)})},function(a){j(v+d,!1,a)})}function n(c,d,e){a.patch(b.baseUrl+"/bank_accounts/"+c.id+"/",c).then(function(b){console.log("Updated the bank account information successfully. Now update the the dealer's information."),d=p(d),a.patch(x+d.id+"/",d,{params:{mode:"edit"}}).then(function(a){d=a.data,y.saveCurrent(d),q(d),j(w+e,!0,d)},function(a){j(w+e,!1,a)})},function(a){j(w+e,!1,a)})}function o(b,c){b=p(b),a.patch(x+b.id+"/",b,{params:{mode:"edit"}}).then(function(a){b=a.data,y.saveCurrent(b),q(b),j(w+c,!0,b)},function(a){j(w+c,!1,a)})}function p(a){var b=$.extend({},a);return b.hasOwnProperty("bank_accounts")&&delete b.bank_accounts,b.hasOwnProperty("screen_counters")&&delete b.screen_counters,b.hasOwnProperty("uploaded_deals")&&delete b.uploaded_deals,b.hasOwnProperty("liked_deals")&&delete b.liked_deals,b}function q(a){window.Intercom("update",{app_id:b.INTERCOM_APP_ID,user_id:a.id,user_hash:a.intercom_code,name:a.full_name,email:a.email,date_of_birth:a.date_of_birth,gender:a.gender,location:a.location,role:a.role,rank:a.rank})}function r(){window.Intercom("shutdown")}function s(c){var d={shipping_address:c};return a.patch(x+b.dealer.id,d)}var t="ubuntu",u="090909deal",v="register-as-dealer-for-",w="update-as-dealer-for-",x=b.baseUrl+"/dealers/";this.saveCurrent=g,this.setCredentials=i,this.broadcastResult=j;var y=this,z={};return z.create=d,z.logIn=e,z.logOut=f,z.getDealer=k,z.getShortDealer=l,z.registerDealer=m,z.updateDealer=n,z.updateViewer=o,z.setIntercom=q,z.updateCurrentUser=h,z.updateShippingAddress=s,z}]),angular.module("DealersApp").factory("Defaults",["$http","$rootScope","Authentication",function(a,b,c){function d(c,d){var f={};c.dealers_delivery?f.dealers_delivery=c.dealers_delivery.id:f.dealers_delivery=null,c.custom_delivery?f.custom_delivery=c.custom_delivery.id:f.custom_delivery=null,c.pickup_delivery?f.pickup_delivery=c.pickup_delivery.id:f.pickup_delivery=null,a.patch(b.baseUrl+e+d+"/",f).then(function(a){console.log("Saved the shipping methods as default successfully!")},function(a){console.log("There was an error while trying to save the shipping methods as defaults: "+a.data)})}var e="/dealer_defaults/",f={};return f.updateShippingMethods=d,f}]),angular.module("DealersApp").factory("Dialogs",["$rootScope","$mdDialog","$mdMedia","Translations",function(a,b,c,d){function e(a,c,d){return b.show({controller:"SignInDialogController",templateUrl:"app/components/views/sign-in/sign-in-dialog.view.html",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0,fullscreen:i,locals:{tab:c,isViewer:d}})}function f(a,c,e,f){return b.confirm(f).parent(angular.element(document.body)).clickOutsideToClose(!1).title(a).textContent(c).ariaLabel("Confirm Dialog").ok(e).cancel(d.general.cancel).targetEvent(f)}function g(a,c,e){b.show(b.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(a).textContent(c).ariaLabel("Alert Dialog").ok(d.general.gotIt).targetEvent(e))}var h={},i=c("xs");return h.showSignInDialog=e,h.confirmDialog=f,h.showAlertDialog=g,h}]),angular.module("DealersApp").factory("EditProduct",["$http","$rootScope","$routeParams","Product","ProductPhotos",function(a,b,c,d,e){function f(a){m.product=$.extend({},a),g();var b=new Image;b.onload=function(){m.product.main_photo_width=this.width,m.product.main_photo_height=this.height,h()},b.src=URL.createObjectURL(m.product.photos[0])}function g(){m.product.currency=d.keyForCurrency(m.product.currency),m.product.discount_value&&m.product.discount_value>0?m.product.discount_type=d.keyForDiscountType(m.product.discount_type):(m.product.discount_value=null,m.product.discount_type=null),m.product.dealer=m.product.dealer.id,m.product.category=d.keyForCategory(m.product.category),delete m.product.dealers_delivery,delete m.product.custom_delivery,delete m.product.pickup_delivery}function h(){var c=d.extractData(m.product);a.patch(b.baseUrl+l+m.product.id+"/",c).then(function(a){console.log("Product uploaded successfully!"),b.$broadcast(k,{success:!0,data:a.data})},function(a){console.log("There was an error while uploading the product: "+a.data),b.$broadcast(k,{success:!1,message:a.data})})}function i(c){for(var d=0;d<c.length;d++){var e=c[d].id;e&&a.delete(b.baseUrl+"/variants/"+e+"/").then(function(a){},function(a){console.log("Failed to delete variant.")})}}function j(c){return a.post(b.baseUrl+"/variants/",c)}var k="ep-upload-finished",l="/adddeals/",m={};return m.product={},m.savedPhotosURLs=[],m.isAfterEdit=!1,m.uploadModifiedProduct=f,m.deleteVariants=i,m.postVariant=j,m}]),angular.module("DealersApp").service("LocalesService",["$translate","LOCALES","$rootScope","tmhDynamicLocale",function(a,b,c,d){"use strict";var e=b.locales,f=Object.keys(e);f&&0!==f.length||console.error("There are no _LOCALES provided");var g=[];f.forEach(function(a){g.push(e[a])});var h=c.language,i=function(a){return f.indexOf(a)!==-1},j=function(b){return i(b)?(h=b,a.use(b),c.language=b,document.documentElement.setAttribute("lang",b),void("he"==b?document.documentElement.setAttribute("dir","rtl"):document.documentElement.setAttribute("dir","ltr"))):void console.error('Locale name "'+b+'" is invalid')};return c.$on("$translateChangeSuccess",function(a,b){document.documentElement.setAttribute("lang",b.language),d.set(b.language.toLowerCase().replace(/_/g,"-"))}),{getLocaleDisplayName:function(){return e[h]},getLocaleDisplayFlag:function(){return b.localeFlags[b.locales[h]]},setLocaleByDisplayName:function(a){j(f[g.indexOf(a)])},getLocalesDisplayNames:function(){return g},getFlag:function(a){return b.localeFlags[a]}}}]),angular.module("DealersApp").factory("Photos",["$mdMedia",function(a){function b(a){return btoa(String.fromCharCode.apply(null,a.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))}function c(a){for(var b=[],c=0;c<a.length;c++)try{b.push(URL.createObjectURL(a[c]))}catch(a){console.log(a.message)}return b}function d(a){for(var b=atob(a.split(",")[1]),c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0;e<b.length;e++)d[e]=b.charCodeAt(e);return new Blob([c],{type:"image/png"})}function e(a){var b;try{b=URL.createObjectURL(a)}catch(a){return console.log("Not a Blob object:\n"+a.message),!1}if(b.length>0)return!0}function f(a,b,c,e){var f=document.createElement("img");if(m)EXIF.getData(c,function(){var g=.65,i=EXIF.getTag(this,"Orientation");f.onload=function(){var c=h(f),j=c.getContext("2d"),k=c.width*g,m=c.style.width*g,n=c.height*g,o=c.style.height*g;switch(i>4?(c.width=n,c.style.width=o,c.height=k,c.style.height=m):(c.width=k,c.style.width=m,c.height=n,c.style.height=o),i){case 2:j.translate(k,0),j.scale(-1,1);break;case 3:j.translate(k,n),j.rotate(Math.PI);break;case 4:j.translate(0,n),j.scale(1,-1);break;case 5:j.rotate(.5*Math.PI),j.scale(1,-1);break;case 6:j.rotate(.5*Math.PI),j.translate(0,-n);break;case 7:j.rotate(.5*Math.PI),j.translate(k,-n),j.scale(-1,1);break;case 8:j.rotate(-.5*Math.PI),j.translate(-k,0)}j.drawImage(f,0,0,k,n);var p=c.toDataURL("image/jpeg",l.product.quality),q=d(p);e(a,b,q)},f.src=URL.createObjectURL(c)});else{var i=new FileReader;i.onabort=function(){alert("The upload was aborted.")},i.onerror=function(){alert("An error occurred while reading the file.")},i.onload=function(c){f.src=c.target.result;var h;h=d(g(f)),e(a,b,h)},i.readAsDataURL(c)}}function g(a){for(var b=h(a);b.width>=2*l.product.maxWidth;)b=i(b);return b.width>l.product.maxWidth&&(b=j(b)),b.toDataURL("image/jpeg",l.product.quality)}function h(a){var b=document.createElement("canvas");return b.width=a.width,b.height=a.height,b.getContext("2d").drawImage(a,0,0,b.width,b.height),b}function i(a){var b=document.createElement("canvas");return b.width=a.width/2,b.height=a.height/2,b.getContext("2d").drawImage(a,0,0,b.width,b.height),b}function j(a){var b=document.createElement("canvas"),c=l.product.maxWidth/a.width;b.width=a.width*c,b.height=a.height*c;var d=a.getContext("2d").getImageData(0,0,a.width,a.height),e=b.getContext("2d").createImageData(b.width,b.height);return k(d,e,c),b.getContext("2d").putImageData(e,0,0),b}function k(a,b,c){function d(a,b,c,d,e,f){var g=1-e,h=1-f;return a*g*h+b*e*h+c*g*f+d*e*f}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;for(e=0;e<b.height;++e)for(g=e/c,h=Math.floor(g),i=Math.ceil(g)>a.height-1?a.height-1:Math.ceil(g),f=0;f<b.width;++f)j=f/c,k=Math.floor(j),l=Math.ceil(j)>a.width-1?a.width-1:Math.ceil(j),m=4*(f+b.width*e),n=4*(k+a.width*h),o=4*(l+a.width*h),p=4*(k+a.width*i),q=4*(l+a.width*i),r=j-k,s=g-h,t=d(a.data[n],a.data[o],a.data[p],a.data[q],r,s),b.data[m]=t,u=d(a.data[n+1],a.data[o+1],a.data[p+1],a.data[q+1],r,s),b.data[m+1]=u,v=d(a.data[n+2],a.data[o+2],a.data[p+2],a.data[q+2],r,s),b.data[m+2]=v,w=d(a.data[n+3],a.data[o+3],a.data[p+3],a.data[q+3],r,s),b.data[m+3]=w}var l={};l.product={maxWidth:480,quality:.6};var m=a("xs")||a("sm");return l.hexToBase64=b,l.imageDataToUrls=c,l.dataURItoBlob=d,l.checkIfImageData=e,l.preparePhotoForUpload=f,l}]),angular.module("DealersApp").factory("ProductInfo",["$http","$rootScope","Authentication",function(a,b,c){function d(a){return g[a]}function e(){var a=[],b={};return b.store={},b.title="Great product now at Zara with great accessories and stuff",b.price=Number(15),b.currency="DO",b.expiration=new Date,b.store.name="Zara, Raanana",b.photoURL1="jdsfjkdsf;",a.push(b),b={},b.store={},b.title="Wow come see what I found here",b.price=Number(266),b.currency="SH",b.expiration=new Date,b.store.name="Shekem Electric",b.photoURL1="jdsfjkdsf;",b.dealattribs={},b.dealattribs.dealers_that_liked=[2,4,14],a.push(b),b={},b.store={},b.title="1+1 on al hamburgers at McDonalds... Yam Yam!",b.store.name="McDonalds, Kiryat Mozkin Krayot",b.photoURL1="jdsfjkdsf;",a.push(b),b={},b.store={},b.title="Awesome shoes at nike store",b.price=Number(15),b.currency="SH",b.store.name="Nike",b.photoURL1="jdsfjkdsf;",a.push(b),a}var f={},g={USD:"$",ILS:"₪",CNY:"¥",GBP:"£",EUR:"€"};return f.currencyForKey=d,f.getDummyProducts=e,f}]),angular.module("DealersApp").factory("ProductPhotos",["$rootScope","Photos",function(a,b){function c(a){return a.length>2&&"None"!=a}function d(b,c,d){a.s3.getObject({Bucket:a.AWSS3Bucket,Key:b,ResponseContentType:"image/jpg"},function(b,e){var f={};if(f.photoIndex=d,null!=b)f.message="Failed to download photo of product"+c+":\n"+b.message,a.$broadcast("downloaded-photo-"+c,{success:!1,data:f});else{var g=new Blob([e.Body],{type:"image/png"});f.rawImage=g,f.url=URL.createObjectURL(g),a.$broadcast("downloaded-photo-"+c,{success:!0,data:f})}})}function e(a){a.photo1&&d(a.photo1,a.id,1),a.photo2&&d(a.photo2,a.id,2),a.photo3&&d(a.photo3,a.id,3),a.photo4&&d(a.photo4,a.id,4)}function f(b){var c=String(a.dealer.id),d=new Date,e=String(d.getTime()/1e3),f=String(b+1);return c+"_"+e+"_"+f+".png"}function g(a,b,c,d){switch(a){case 0:d.photo1=c+b;break;case 1:d.photo2=c+b;break;case 2:d.photo3=c+b;break;case 3:d.photo4=c+b}}function h(a){return a.photo1&&(a.photo1=""),a.photo2&&(a.photo2=""),a.photo3&&(a.photo3=""),a.photo4&&(a.photo4=""),a}function i(a){var b=0;return a.photo1&&b++,a.photo2&&b++,a.photo3&&b++,a.photo4&&b++,b}function j(a){switch(parseInt(a,10)){case 0:return"rgb(79,195,247)";case 1:return"rgb(129,216,132)";case 2:return"rgb(255,100,105)";case 3:return"rgb(255,212,40)";default:return"rgb(79,195,247)"}}function k(c,d){var e=c.photos;if(q.process.sender=d,q.process.amount=e.length,q.process.product=c,!e)return console.log("The photos array that was sent to the upload function is null!"),void a.$broadcast(p+d,{success:!1,data:"There was a problem, please try again!"});if(0==e.length)return console.log("The photos array that was sent to the upload function is empty!"),void a.$broadcast(p+d,{success:!1,data:"There was a problem, please try again!"});c=h(c);for(var i=l,j=0;j<e.length;j++){var k=f(j);g(j,k,o,c),b.preparePhotoForUpload(j,k,e[j],i)}}function l(b,c,d){var e={Bucket:a.AWSS3Bucket,Key:o+c,Body:d};a.s3.putObject(e,function(c,d){var e=q.process.sender;c?(console.log("There was an error with s3 config: "+c.message),a.$broadcast(p+e,{success:!1,data:c.message})):(b++,console.log("Photo number "+b+" upload complete."),b==q.process.amount&&(a.$broadcast(p+e,{success:!0,data:d,product:q.process.product}),q.process.sender="",q.process.amount=0,q.process.product=null))})}function m(a){var b=[];return a.photo1&&b.push(a.photo1),a.photo2&&b.push(a.photo2),a.photo3&&b.push(a.photo3),a.photo4&&b.push(a.photo4),b}function n(b){for(var c=0;c<b.length;c++){var d={Bucket:a.AWSS3Bucket,Key:o+b[c]};a.s3.deleteObject(d,function(a,b){a?console.log(a,a.stack):console.log("Old photo was deleted successfully!\n"+b)})}}var o="media/Deals_Photos/",p="photos-downloaded-for-",q={};return q.hasPhoto=c,q.downloadPhoto=d,q.downloadPhotos=e,q.photosNum=i,q.colorForNum=j,q.generatePhotoName=f,q.addPhotoUrlToProduct=g,q.uploadPhotosOfProduct=k,q.setProductPhotosInArray=m,q.deletePhotos=n,q.process={},q.process.sender="",q.process.amount=0,q.process.product=null,q}]),angular.module("DealersApp").factory("Product",["$http","$rootScope","ShippingMethods",function(a,b,c){function d(c){if(c)return a.get(b.baseUrl+"/alldeals/"+String(c)+"/")}function e(b){return a.get(b)}function f(b){return a.delete(b)}function g(c){return a.post(b.baseUrl+"/transactions/",c)}function h(a){return a.hasOwnProperty("photo1")&&delete a.photo1,a.hasOwnProperty("photo2")&&delete a.photo2,a.hasOwnProperty("photo3")&&delete a.photo3,a.hasOwnProperty("photo4")&&delete a.photo4,a}function i(a){if(a.category){var b=k(a.category);b&&(a.category=b)}return a.currency&&3==a.currency.length&&(a.currency=m(a.currency)),a.discount_type&&2==a.discount_type.length&&(a.discount_type=p(a.discount_type)),a.expiration&&"string"==typeof a.expiration&&(a.expiration=new Date(a.expiration)),a=c.mapProductDeliveries(a)}function j(a){return a.id&&(a.id=parseInt(a.id)),a.dealer&&a.dealer.id&&(a.dealer.id=parseInt(a.dealer.id)),a.price&&(a.price=parseFloat(a.price)),a.percentage_off&&(a.percentage_off=parseFloat(a.percentage_off)),a.original_price&&(a.original_price=parseFloat(a.original_price)),a.max_quantity&&(a.max_quantity=parseInt(a.max_quantity)),a.expiration&&(a.expiration=new Date(a.expiration)),a.upload_date&&(a.upload_date=new Date(a.upload_date)),a.main_photo_width&&(a.main_photo_width=parseInt(a.main_photo_width)),a.main_photo_height&&(a.main_photo_height=parseInt(a.main_photo_height)),a}function k(a){return x[a]}function l(a){for(var b in x)if(x.hasOwnProperty(b)&&x[b]===a)return b}function m(a){return a&&3==a.length?w[a]:a}function n(a){for(var b in w)if(w.hasOwnProperty(b)&&w[b]===a)return b}function o(a){for(var b=0;b<a.length;b++){var c=a[b].currency;a[b].currency=m(c)}return a}function p(a){return"PP"==a?"123":"PE"==a?"%":void 0}function q(a){return"123"==a?"PP":"%"==a?"PE":void 0}function r(a,b){return a.title==b.title&&(a.price==b.price&&(a.currency==b.currency&&(a.discount_value==b.discount_value&&(a.discount_type==b.discount_type&&(a.category==b.category&&(a.expiration==b.expiration&&(a.more_description==b.more_description&&a.more_description==b.more_description)))))))}function s(a){var b=[],c={};for(var d in a)if(a.hasOwnProperty(d)){c.name=a[d].name,c.options=[];for(var e=a[d].options,f=0;f<e.length;f++)c.options.push({option:a[d].options[f]});b.push(c),c={}}return b}function t(a){for(var b={},c={},d=0,e=0;e<a.length;e++){var f=a[e];c.name=f.name,c.options=[];for(var g=0;g<f.options.length;g++)c.options.push(f.options[g].option);b[d]=c,c={},d++}return b}function u(a){var b=$.extend(!0,{},a);return delete b.photos,b}var v={},w={USD:"$",ILS:"₪",CNY:"¥",GBP:"£",EUR:"€"},x={Fa:"Fashion",Au:"Automotive",Ar:"Art",Be:"Health & Beauty",Bo:"Books & Magazines",El:"Electronics",En:"Entertainment & Events",Fo:"Food & Groceries",Ho:"Home & Furniture",Ki:"Kids & Babies",Mu:"Music",Pe:"Pets",Re:"Restaurants & Bars",Se:"Services",Sp:"Sports & Outdoor",Tr:"Travel",Ot:"Other"};return v.getProduct=d,v.getProducts=e,v.deleteProduct=f,v.buyProduct=g,v.removePhotoPaths=h,v.mapData=i,v.unStringifyObject=j,v.categoryForKey=k,v.keyForCategory=l,v.currencyForKey=m,v.keyForCurrency=n,v.convertKeysToCurrencies=o,v.discountTypeForKey=p,v.keyForDiscountType=q,v.areEqual=r,v.parseVariantsToServer=s,v.parseVariantsFromServer=t,v.extractData=u,v}]),angular.module("DealersApp").factory("ProductsGrid",["$http","$rootScope","Authentication",function(a,b,c){function d(a){for(var b,c=[],d=0;d<a.length;d+=f)b=a.slice(d,d+f),c.push(b);return c}function e(a,b){if(a&&b){if(0==a.length)return d(b);var c=a[a.length-1],e=f-c.length;return Array.prototype.push.apply(c,b.splice(0,e)),b=d(b),Array.prototype.push.apply(a,b),a}}var f=2,g={};return g.divideProductsIntoChunks=d,g.addProductsToArray=e,g}]),angular.module("DealersApp").factory("Purchase",["$http","$rootScope","Product","Analytics",function(a,b,c,d){function e(b){return a.get(m+b+"/")}function f(b){return a.get(n+b+"/")}function g(b){return a.get(l+b+"/")}function h(c,e){c.purchase_date=new Date,a.post(l,c).then(function(a){console.log("Purchase saved."),c=a.data,d.addTrans(String(c.id),String(c.dealer),String(c.amount*c.quantity/100),"","","","","",c.currency),d.addItem(String(c.id),"",e.title,e.category,String(c.amount/100),String(c.quantity)),b.$broadcast("purchaseSaved",c.id)},function(a){console.log("Couldn't save the purchase data.")})}function i(b,c){return b==o.SENT_STATUS&&c.status==o.PURCHASED_STATUS?c.send_date=new Date:b==o.RECEIVED_STATUS&&c.status==o.SENT_STATUS?c.receive_date=new Date:b==o.PURCHASED_STATUS&&c.status==o.SENT_STATUS?(c.send_date=null,c.estimated_delivery_time=null):b==o.SENT_STATUS&&c.status==o.RECEIVED_STATUS&&(c.receive_date=null),c.status=b,c=j(c),a.patch(l+c.id+"/",c)}function j(a){return a.currency=c.keyForCurrency(a.currency),a.dealer.id&&(a.dealer=a.dealer.id),a.deal.id&&(a.deal=a.deal.id),a.buyer.id&&(a.buyer=a.buyer.id),a}function k(b,c){if(b>=0){var d={estimated_delivery_time:b};return a.patch(l+c.id+"/",d)}console.log("Invalid estimated delivery time value.")}var l=b.baseUrl+"/purchases/",m=b.baseUrl+"/orders/",n=b.baseUrl+"/sales/",o={};return o.PURCHASED_STATUS="Purchased",o.SENT_STATUS="Sent",o.RECEIVED_STATUS="Received",o.getOrders=e,o.getSales=f,o.getPurchase=g,o.addPurchase=h,o.updatePurchase=i,o.updateEstimatedDeliveryTime=k,o}]),angular.module("DealersApp").factory("RootDealerReady",["$q",function(a){var b=a.defer(),c={};return c.setAsReady=function(a){b.resolve(a)},c.whenReady=function(){return b.promise},c}]),angular.module("DealersApp").factory("ShippingMethods",["$http","$rootScope","Dialogs","$translate","Translations",function(a,b,c,d,e){function f(c){return c?a.get(b.baseUrl+r+"/"+c+"/"):(console.error("Didn't get a valid delivery id."),null)}function g(a){return a.hasOwnProperty("shipping_price")&&(a.shipping_price*=100),a}function h(a){return a.hasOwnProperty("shipping_price")&&(a.shipping_price/=100),a}function i(a){a.hasOwnProperty("dealers_delivery")||console.error("Error - received an object without deliveries fields.");var b={dealers:t.DEFAULT_DEALER_SHIIPPING,custom:{selected:!1},pickup:t.DEFAULT_PICKUP_SHIIPPING};return a.dealers_delivery&&(b.dealers=a.dealers_delivery,b.dealers.selected=!0),a.custom_delivery&&(b.custom=a.custom_delivery,b.custom.selected=!0),a.pickup_delivery&&(b.pickup=a.pickup_delivery,b.pickup.selected=!0),b}function j(a){return a.dealers_delivery&&(a.dealers_delivery.shipping_price/=100),a.custom_delivery&&(a.custom_delivery.shipping_price/=100),a}function k(c){c||console.error("No delivery object."),t.updateCounter++,c=g(c),a.post(b.baseUrl+s,c).then(function(a){console.log("Posted delivery"),n()},function(a){console.log("There was an error while updating the delivery method: "+a.data),o()})}function l(c){c||console.error("No delivery object."),t.updateCounter++,c=g(c),a.patch(b.baseUrl+r+c.id+"/",c).then(function(a){console.log("Patched delivery"),n()},function(a){console.log("There was an error while updating the delivery method: "+a.data),o()})}function m(c){c||console.error("No delivery object."),t.updateCounter++,a.delete(b.baseUrl+r+c.id+"/").then(function(a){console.log("Deleted delivery"),n()},function(a){console.log("There was an error while deleting the delivery method: "+a.data),o()})}function n(){t.updateCounter--,t.updateCounter<=0&&b.$broadcast(t.UPDATE_FINISHED,{success:!0})}function o(){t.updateCounter=0,b.$broadcast(t.UPDATE_FINISHED,{success:!1})}function p(a,b,c){if(t.updateCounter=0,a||console.error("No product object."),a.dealers_delivery)b.dealers.selected?angular.equals(b.dealers,c.dealers)||l(a.dealers_delivery):m(a.dealers_delivery);else if(b.dealers&&b.dealers.selected){var d={delivery_method:t.DEALERS_METHOD,title:b.dealers.title,estimated_delivery_time:b.dealers.estimated_delivery_time,shipping_price:b.dealers.shipping_price,description:b.dealers.description,dealers_dealdeliverys:[a.id]};k(d)}if(a.custom_delivery)b.custom.selected?angular.equals(b.custom,c.custom)||l(a.custom_delivery):m(a.custom_delivery);else if(b.custom&&b.custom.selected){var e={delivery_method:t.CUSTOM_METHOD,title:b.custom.title,estimated_delivery_time:b.custom.estimated_delivery_time,shipping_price:b.custom.shipping_price,description:b.custom.description,custom_dealdeliverys:[a.id]};k(e)}if(a.pickup_delivery)b.pickup.selected?angular.equals(b.pickup,c.pickup)||l(a.pickup_delivery):m(a.pickup_delivery);else if(b.pickup&&b.pickup.selected){var f=t.DEFAULT_PICKUP_SHIIPPING;f.delivery_method=t.PICKUP_METHOD,f.description=b.pickup.description,f.pickup_dealdeliverys=[a.id],k(f)}0==t.updateCounter&&n()}function q(a){var b=a.dealers,d=a.custom,f=a.pickup;if(b||(b={}),d||(d={}),f||(f={}),b.selected){if(!b.title)return c.showAlertDialog(e.shippingMethods.blankTitle,e.shippingMethods.blankTitleContent),!1;if(!(b.shipping_price>=0))return c.showAlertDialog(e.shippingMethods.invalidShippingPriceTitle,e.shippingMethods.invalidShippingPriceContent),!1;if(!(b.estimated_delivery_time>0))return c.showAlertDialog(e.shippingMethods.invalidETDTitle,e.shippingMethods.invalidETDContent),!1}if(d.selected){if(!d.title)return c.showAlertDialog(e.shippingMethods.blankTitle,e.shippingMethods.blankTitleContent),!1;if(!(d.shipping_price>=0))return c.showAlertDialog(e.shippingMethods.invalidShippingPriceTitle,e.shippingMethods.invalidShippingPriceContent),!1;if(!(d.estimated_delivery_time>0))return c.showAlertDialog(e.shippingMethods.invalidETDTitle,e.shippingMethods.invalidETDContent),!1}return!!(b.selected||d.selected||f.selected)||(c.showAlertDialog(e.shippingMethods.noShippingMethodsTitle,e.shippingMethods.noShippingMethodsContent),!1)}var r="/deliverys/",s="/editdeliverys/",t={};return t.DEALERS_TITLE="Dealers Express Shipping",t.DEALERS_SHIPPING_PRICE=35,t.DEALERS_SHIPPING_ETD=2,t.DEALERS_SHIPPING_DESCRIPTION="This is the standard express shipping.",t.DEALERS_METHOD="Dealers_delivery",t.CUSTOM_METHOD="Other_delivery",t.PICKUP_TITLE="Self Pickup",t.PICKUP_METHOD="Self_pickup",t.UPDATE_FINISHED="shipping_update_update",t.updateCounter=0,t.DEFAULT_DEALER_SHIIPPING={selected:!1,title:t.DEALERS_TITLE,shipping_price:t.DEALERS_SHIPPING_PRICE,estimated_delivery_time:t.DEALERS_SHIPPING_ETD,description:t.DEALERS_SHIPPING_DESCRIPTION},t.DEFAULT_PICKUP_SHIIPPING={selected:!1,title:t.PICKUP_TITLE,shipping_price:0},b.$on("$translateChangeSuccess",function(){t.DEALERS_TITLE=d.instant("services.shipping-methods.dealers-title"),t.DEALERS_SHIPPING_DESCRIPTION=d.instant("services.shipping-methods.dealers-description"),t.PICKUP_TITLE=d.instant("services.shipping-methods.pickup-title")}),t.getDelivery=f,t.convertDeliveryToServer=g,t.convertDeliveryFromServer=h,t.parseShippingFromServer=i,t.mapProductDeliveries=j,t.updateShippingMethods=p,t.validateShippingMethods=q,t}]),angular.module("DealersApp").service("Translations",["$rootScope","$translate","tmhDynamicLocale",function(a,b,c){"use strict";function d(){e.general.cancel=b.instant("general.cancel"),e.general.approve=b.instant("general.approve"),e.general.confirmLeave=b.instant("general.unsaved-changes"),e.general.removePhotoTitle=b.instant("general.remove-photo-title"),e.general.removePhotoConfirm=b.instant("general.remove-photo-confirm"),e.general.savingChanges=b.instant("general.saving-changes"),e.general.gotIt=b.instant("general.got-it"),e.general.ok=b.instant("general.ok"),e.general.crop=b.instant("general.crop"),e.home.seeProducts=b.instant("translations-service.home.see-products"),e.viewDeal.deletionMessageTitle=b.instant("translations-service.view-deal.deletion-title"),e.viewDeal.deletionMessageContent=b.instant("translations-service.view-deal.deletion-message"),e.viewDeal.deletedMessage=b.instant("translations-service.view-deal.deleted"),e.viewDeal.pleaseSelect=b.instant("translations-service.view-deal.please-select"),e.viewDeal.blankComment=b.instant("translations-service.view-deal.blank-comment"),e.viewDeal.downloadFailed=b.instant("translations-service.view-deal.download-failed"),e.viewDeal.addComment=b.instant("translations-service.view-deal.add-comment"),e.viewDeal.addFirstComment=b.instant("translations-service.view-deal.add-first-comment"),e.viewDeal.deleteProductTitle=b.instant("translations-service.view-deal.delete-product-title"),e.viewDeal.deleteProductContent=b.instant("translations-service.view-deal.delete-product-content"),e.viewDeal.deleteProductConfirm=b.instant("translations-service.view-deal.delete-product-confirm"),e.viewDeal.outOfStockTitle=b.instant("translations-service.view-deal.out-of-stock-title"),e.viewDeal.outOfStockContent=b.instant("translations-service.view-deal.out-of-stock-content"),e.viewDeal.notEnoughStockTitle=b.instant("translations-service.view-deal.not-enough-stock-title"),e.viewDeal.notEnoughStockContent1=b.instant("translations-service.view-deal.not-enough-stock-content-1"),e.viewDeal.notEnoughStockContent2=b.instant("translations-service.view-deal.not-enough-stock-content-2"),e.viewDeal.validQuantity=b.instant("translations-service.view-deal.valid-quantity"),e.viewDeal.maxQuantity=b.instant("translations-service.view-deal.max-quantity"),e.productsGrid.noProducts=b.instant("translations-service.products-grid.no-products"),e.productsGrid.didntFind=b.instant("translations-service.products-grid.didnt-find"),e.productsGrid.currentlyNoProducts=b.instant("translations-service.products-grid.currently-no-products"),e.productsGrid.noProductsInterests=b.instant("translations-service.products-grid.no-products-interests"),e.productEdit.addDiscount=b.instant("translations-service.product-edit.add-discount"),e.productEdit.removeDiscount=b.instant("translations-service.product-edit.remove-discount"),e.productEdit.submitTitleNext=b.instant("translations-service.product-edit.submit-title-next"),e.productEdit.submitTitleDone=b.instant("translations-service.product-edit.submit-title-done"),e.productEdit.uploadLoading=b.instant("translations-service.product-edit.upload-loading"),e.productEdit.missingPhotosTitle=b.instant("translations-service.product-edit.missing-photos-title"),e.productEdit.missingPhotosContent=b.instant("translations-service.product-edit.missing-photos-content"),e.productEdit.blankTitle=b.instant("translations-service.product-edit.blank-title"),e.productEdit.blankTitleContent=b.instant("translations-service.product-edit.blank-title-content"),e.productEdit.blankPriceTitle=b.instant("translations-service.product-edit.blank-price-title"),e.productEdit.blankPriceContent=b.instant("translations-service.product-edit.blank-price-content"),e.productEdit.invalidPriceTitle=b.instant("translations-service.product-edit.invalid-price-title"),e.productEdit.invalidPriceContent=b.instant("translations-service.product-edit.invalid-price-content"),e.productEdit.invalidDiscountTitle=b.instant("translations-service.product-edit.invalid-discount-title"),e.productEdit.invalidDiscountContent=b.instant("translations-service.product-edit.invalid-discount-content"),e.productEdit.invalidDiscountContent100=b.instant("translations-service.product-edit.invalid-discount-content-100"),e.productEdit.invalidDiscountContentOP=b.instant("translations-service.product-edit.invalid-discount-content-op"),e.productEdit.invalidMaxQuantityTitle=b.instant("translations-service.product-edit.invalid-max-quantity-title"),e.productEdit.invalidMaxQuantityContent=b.instant("translations-service.product-edit.invalid-max-quantity-content"),e.productEdit.blankCategoryTitle=b.instant("translations-service.product-edit.blank-category-title"),e.productEdit.blankCategoryContent=b.instant("translations-service.product-edit.blank-category-content"),e.productEdit.placeholderNames=[b.instant("translations-service.product-edit.variants-placeholder-names-1"),b.instant("translations-service.product-edit.variants-placeholder-names-2"),b.instant("translations-service.product-edit.variants-placeholder-names-3")],e.productEdit.placeholderOptions=[b.instant("translations-service.product-edit.variants-placeholder-options-1"),b.instant("translations-service.product-edit.variants-placeholder-options-2"),b.instant("translations-service.product-edit.variants-placeholder-options-3")],e.shippingMethods.blankTitle=b.instant("translations-service.shipping-methods.blank-title"),e.shippingMethods.blankTitleContent=b.instant("translations-service.shipping-methods.blank-title-content"),e.shippingMethods.invalidShippingPriceTitle=b.instant("translations-service.shipping-methods.invalid-shipping-price-title"),e.shippingMethods.invalidShippingPriceContent=b.instant("translations-service.shipping-methods.invalid-shipping-price-content"),e.shippingMethods.invalidETDTitle=b.instant("translations-service.shipping-methods.invalid-etd-title"),e.shippingMethods.invalidETDContent=b.instant("translations-service.shipping-methods.invalid-etd-content"),e.shippingMethods.noShippingMethodsTitle=b.instant("translations-service.shipping-methods.no-shipping-methods-title"),e.shippingMethods.noShippingMethodsContent=b.instant("translations-service.shipping-methods.no-shipping-methods-content"),e.purchaseDetails.purchased=b.instant("translations-service.purchase-details.purchased"),e.purchaseDetails.sent=b.instant("translations-service.purchase-details.sent"),e.purchaseDetails.markSent=b.instant("translations-service.purchase-details.mark-sent"),e.purchaseDetails.received=b.instant("translations-service.purchase-details.received"),e.purchaseDetails.markReceived=b.instant("translations-service.purchase-details.mark-received"),
e.purchaseDetails.markReceivedConfirmTitle=b.instant("translations-service.purchase-details.mark-received-confirm-title"),e.purchaseDetails.markReceivedConfirmContent=b.instant("translations-service.purchase-details.mark-received-confirm-content"),e.purchaseDetails.markReceivedCancelTitle=b.instant("translations-service.purchase-details.mark-received-cancel-title"),e.purchaseDetails.markReceivedCancelContent=b.instant("translations-service.purchase-details.mark-received-cancel-content"),e.purchaseDetails.markReceivedCancelApprove=b.instant("translations-service.purchase-details.mark-received-cancel-approve"),e.purchaseDetails.markSentConfirmTitle=b.instant("translations-service.purchase-details.mark-sent-confirm-title"),e.purchaseDetails.markSentConfirmContent=b.instant("translations-service.purchase-details.mark-sent-confirm-content"),e.purchaseDetails.markSentConfirmPlaceholder=b.instant("translations-service.purchase-details.mark-sent-confirm-placeholder"),e.purchaseDetails.markSentConfirmApprove=b.instant("translations-service.purchase-details.mark-sent-confirm-approve"),e.purchaseDetails.markSentCancelTitle=b.instant("translations-service.purchase-details.mark-sent-cancel-title"),e.purchaseDetails.markSentCancelContent=b.instant("translations-service.purchase-details.mark-sent-cancel-content"),e.purchaseDetails.markSentCancelApprove=b.instant("translations-service.purchase-details.mark-send-cancel-approve"),e.purchaseDetails.blankETDTitle=b.instant("translations-service.purchase-details.blank-etd-title"),e.purchaseDetails.blankETDContent=b.instant("translations-service.purchase-details.blank-etd-content"),e.signIn.signUpButtonTitle=b.instant("translations-service.sign-in.sign-up-button-title"),e.signIn.logInButtonTitle=b.instant("translations-service.sign-in.log-in-button-title"),e.signIn.loading=b.instant("translations-service.sign-in.loading"),e.signIn.invalidFields=b.instant("translations-service.sign-in.invalid-fields"),e.signIn.blankEmail=b.instant("translations-service.sign-in.blank-email"),e.signIn.invalidEmail=b.instant("translations-service.sign-in.invalid-email"),e.signIn.blankPassword=b.instant("translations-service.sign-in.blank-password"),e.signIn.generalProblem=b.instant("translations-service.sign-in.general-problem"),e.dealerRegistration.next=b.instant("translations-service.dealer-registration.next"),e.dealerRegistration.done=b.instant("translations-service.dealer-registration.done"),e.dealerRegistration.addPhoto=b.instant("translations-service.dealer-registration.add-photo"),e.dealerRegistration.changePhoto=b.instant("translations-service.dealer-registration.change-photo"),e.dealerRegistration.uploading=b.instant("translations-service.dealer-registration.uploading"),e.dealerRegistration.contentWillBeLost=b.instant("translations-service.dealer-registration.content-will-be-lost"),e.dealerRegistration.contentWillBeLostFullMessage=b.instant("translations-service.dealer-registration.content-will-be-lost-full-message"),e.dealerRegistration.missingPhotoTitle=b.instant("translations-service.dealer-registration.missing-photo-title"),e.dealerRegistration.missingPhotoContent=b.instant("translations-service.dealer-registration.missing-photo-content"),e.dealerRegistration.blankAboutTitle=b.instant("translations-service.dealer-registration.blank-about-title"),e.dealerRegistration.blankLocationTitle=b.instant("translations-service.dealer-registration.blank-location-title"),e.dealerRegistration.requiredField=b.instant("translations-service.dealer-registration.required-field"),e.dealerRegistration.blankAccountNumberTitle=b.instant("translations-service.dealer-registration.blank-account-number-title"),e.dealerRegistration.blankBranchNumberTitle=b.instant("translations-service.dealer-registration.blank-branch-number-title"),e.dealerRegistration.blankBankTitle=b.instant("translations-service.dealer-registration.blank-bank-title"),e.dealerRegistration.blankAccountHolderTitle=b.instant("translations-service.dealer-registration.blank-account-holder-title"),e.dealerRegistration.accountNumberDuplicateTitle=b.instant("translations-service.dealer-registration.account-number-duplicate-title"),e.dealerRegistration.accountNumberDuplicateContent=b.instant("translations-service.dealer-registration.account-number-duplicate-content"),e.dealerRegistration.generalProblemTitle=b.instant("translations-service.dealer-registration.general-problem-title"),e.dealerRegistration.generalProblemContent=b.instant("translations-service.dealer-registration.general-problem-content"),e.checkout.invalidQuantityTitle=b.instant("translations-service.checkout.invalid-quantity-title"),e.checkout.invalidQuantityContent=b.instant("translations-service.checkout.invalid-quantity-content"),e.checkout.blankDelivery=b.instant("translations-service.checkout.blank-delivery"),e.checkout.invalidShippingAddressTitle=b.instant("translations-service.checkout.invalid-shipping-address-title"),e.checkout.invalidShippingAddressContent=b.instant("translations-service.checkout.invalid-shipping-address-content")}var e={general:{},home:{},viewDeal:{},productsGrid:{},productEdit:{},shippingMethods:{},purchaseDetails:{},signIn:{},dealerRegistration:{},checkout:{}};return e.translateCategory=function(b){if(b.length>2){var c=a.categoriesLocal.indexOf(b);return a.categories[c]}},d(),a.$on("$translateChangeSuccess",function(){d()}),e}]);